{"version":3,"sources":["Dict.jsx","containers/layouts/PanelRightPage.jsx","dispatcher.js","stores/ModelStore.js","conf.jsx","actions/MyActions.js","containers/actuals/options.jsx","containers/actuals/form.jsx","containers/actuals/list.jsx","containers/metas/show.jsx","components/metas/show.jsx","containers/metas/list.jsx","containers/metas/index.jsx","components/metas/index.jsx","containers/metas/form.jsx","components/metas/create.jsx","components/metas/update.jsx","containers/interactions/menu.jsx","containers/shares/menu.jsx","containers/comments/form.jsx","containers/comments/list.jsx","containers/posts/show.jsx","components/posts/show.jsx","containers/posts/list.jsx","containers/posts/index.jsx","components/users/loggedIn.js","components/posts/index.jsx","containers/channels/options.jsx","containers/posts/form.jsx","components/posts/uploader.js","components/posts/create.jsx","components/posts/update.jsx","containers/notifications/list.jsx","containers/notifications/index.jsx","components/notifications/index.jsx","containers/channels/show.jsx","components/channels/show.jsx","containers/channels/list.jsx","containers/channels/index.jsx","components/channels/index.jsx","containers/channels/form.jsx","components/channels/uploader.js","components/channels/create.jsx","components/channels/update.jsx","containers/users/options.jsx","containers/assignments/form.jsx","containers/assignments/list.jsx","containers/access_controls/form.jsx","containers/access_controls/list.jsx","containers/roles/show.jsx","components/roles/show.jsx","containers/roles/list.jsx","containers/roles/index.jsx","components/roles/index.jsx","containers/roles/form.jsx","components/roles/create.jsx","components/roles/update.jsx","containers/settings/show.jsx","components/settings/show.jsx","containers/settings/list.jsx","containers/settings/index.jsx","components/settings/index.jsx","containers/settings/form.jsx","components/settings/create.jsx","components/settings/update.jsx","containers/channels/compactlist.jsx","containers/profiles/experties.jsx","containers/profiles/simpleList.jsx","containers/profiles/followers.jsx","containers/profiles/followees.jsx","containers/profiles/show.jsx","components/profiles/show.jsx","containers/profiles/list.jsx","containers/profiles/index.jsx","components/profiles/index.jsx","containers/profiles/form.jsx","components/profiles/create.jsx","components/profiles/update.jsx","containers/friendships/index.jsx","components/friendships/index.jsx","containers/privacy/index.jsx","components/privacy/index.jsx","containers/users/Login.jsx","components/users/Login.jsx","components/users/LoginJwt.jsx","containers/users/SignUp.jsx","components/users/SignUp.jsx","containers/users/Verification.jsx","components/users/Verification.jsx","containers/rooms/index.js","janus.js","routes.js","containers/layouts/HomePage.jsx","components/rooms/index.js","containers/layouts/NotFoundPage.jsx","serviceWorker.js","index.js","components/App.jsx","js/fa.js"],"names":["dict","PanelRightPage","logout","bind","state","token","window","localStorage","getItem","this","setState","removeItem","location","reload","Fragment","user_settings","view","panelClose","onClick","className","social","link","ignoreCache","reloadCurrent","posts","channels","profiles","notifications","rooms","settings","global_settings","roles","metas","privacy_settings","title","login","Shoa","logged_in","Component","Dispatcher","modelStore","list","instance","klass","i","len","data","length","push","emit","console","log","action","type","listModel","showIntance","deleteIntance","setIntance","postFile","EventEmitter","dispatcher","register","handleActions","conf","server","getList","model","page","params","queryString","Object","keys","map","key","join","axios","get","headers","then","response","dispatch","catch","error","fileUpload","id","file","url","formData","FormData","append","config","put","getInstance","removeInstance","setInstance","post","updateInstance","ActualOptions","props","options","value","content","fid","ActualForm","meta","meta_schema","items","label","placeholder","onInput","e","onChangeValue","target","name","smartSelect","smartSelectParams","pageBackLinkText","back","onChange","submit","fill","form","ActualList","actuals","body","td","j","crypto","lib","WordArray","random","defaultValue","editable","metaId","color","removeActual","uuid","ios","aurora","md","MetaShow","simple-list","JSON","stringify","handleChangeValue","Layout","fields","ModelStore","on","removeListener","MyActions","$f7route","getIntance","getKlass","newState","assign","concat","meta_id","href","position","slot","backLink","fab","MetaList","mediaList","after","subtitle","text","MetaIndex","loadData","Framework7","toast","show","receiving","closeTimeout","React","MetaForm","handleChange","inputStyle","direction","metaSchema","MetaCreate","obj","$f7router","navigate","meta_form","editing","DocumentUpdate","InteractionMenu","social_acts","interaction","sourceType","sourceId","bookmark","bookmarks","like","likes","followed","follow","follows","cancel","actionsOpen","ShareMenu","opened","sheetOpened","onSheetClosed","sheetClose","close","channel","selectedChannel","strong","tag","sheetOpen","class","CommentForm","comment_form","comment","maxlength","resizable","clearButton","commentContent","CommentList","comments","time","removeComment","locale","fromNow","ago","created_at","src","profile","avatar","width","inset","noGap","loadMore","more","PostShow","draft","contentState","convertFromRaw","editorState","EditorState","createWithContent","tabletWidth","toolbar","readOnly","submitComment","channelId","$$","f7","dialog","alert","interaction_type","interactionable_id","interactionable_type","source_type","source_id","post_id","channel_id","$f7","sheet","PostList","tooltip","fullname","height","substring","PostIndex","pageContent","panelOpen","inner","disableButtonText","search","query","tabbar","bottom","tabLink","tabLinkActive","swipeable","tabActive","loggedIn","Post","q","el","ChannelOptions","PostForm","searchbar","searchbarPlaceholder","new_post","localization","translations","fa","inline","image","uploadCallback","uploadImageCallBack","previewImage","onEditorStateChange","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","send","addEventListener","parse","responseText","PostCreate","createEmpty","convertToRaw","getCurrentContent","blocks","block","trim","incomplete_data","prev","prevstate","post_form","PostUpdate","workflow_form","NotificationList","colorClass","notification","seen","target_type","target_id","NotificationIndex","Notification","ChannelShow","admins","recent_posts","ChannelList","ChannelIndex","Channel","ChannelForm","abstract","ChannelCreate","channel_form","ChannelUpdate","UserOptions","users","email","AssignmentForm","assignment_form","user_id","UserList","removeRole","AccessControlForm","access_control_form","item","abilityTitle","abilityValue","true","false","addAbility","AbilityList","ability","removeAbility","access_control_list","RoleShow","role","assignedUsers","role_id","ability_title","ability_value","RoleList","RoleIndex","RoleForm","defaultRole","isDefaultRole","radio","checked","NonDefault","Default","disabled","RoleCreate","default_role","role_form","SettingShow","setting","removeSetting","setting_id","SettingList","SettingIndex","SettingForm","SettingCreate","setting_form","ChannelCompactList","ExpertiesList","experties","expert","removeExperties","mediaBgColor","SimpleList","Followers","followers","followees","ProfileShow","useMemo","primary","m","addTag","backLinkForce","ProfileList","last_login","ProfileIndex","ProfileForm","profile_info","firstname","surename","new_experties","submitExperties","withIcon","buttonText","choose_image","onDrop","buttonClassName","imgExtension","maxFileSize","submitFields","handleChangeValueFields","ProfileCreate","pictures","picture","profile_form","FriendshipIndex","friendship","Friendship","PrivacyIndex","profilePrivacy","findSetting","setting_schemas","schema","op","result","selected","privacySettings","completed_successfully","message","privacy","LoginForm","sign_up","autofocus","enter_your_email","animate","you_can_sign_up","cas","password","username","Login","user","setItem","SignUpForm","enter_your_name","enter_your_surename","validate","if_registered","you_can_login","hide","submitting","SignUp","verification","verification_code","enter_verification_code","verificationCode","Verification","RoomIndex","onPageAfterIn","pageAfterIn","feeds","feed","controls","autoPlay","playsInline","muted","streamAttacher","videos","aria-hidden","outline","active","publishMicrophone","publishCamera","RTCRtpTransceiver","Janus","sessions","isExtensionEnabled","navigator","mediaDevices","getDisplayMedia","userAgent","match","chromever","parseInt","maxver","extension","isInstalled","defaultExtension","extensionId","document","querySelector","getScreen","callback","pending","setTimeout","Error","cache","postMessage","init","event","origin","clearTimeout","gatewayCallbacks","success","noop","destroyed","initDone","isWebrtcSupported","websockets","ws","wsHandlers","wsKeepaliveTimeoutId","servers","serversIndex","isArray","debug","indexOf","iceServers","urls","iceTransportPolicy","bundlePolicy","ipv6Support","ipv6","withCredentials","undefined","maxev","max_poll_events","apisecret","destroyOnUnload","keepAlivePeriod","isNaN","longPollTimeout","getMaxBitrates","simulcastMaxBitrates","maxBitrates","high","medium","low","connected","sessionId","pluginHandles","that","retries","transactions","eventHandler","longpoll","Date","getTime","encodeURIComponent","httpAPICall","verb","handleEvent","timeout","textStatus","errorThrown","warn","json","skipTimeout","sender","pluginHandle","candidate","webrtcStuff","pc","remoteSdp","completed","addIceCandidate","endOfCandidates","candidates","webrtcState","hangup","detached","ondetached","detach","mediaState","slowLink","transaction","reportSuccess","code","reason","plugindata","jsep","onmessage","vdebug","keepAlive","request","randomString","createSession","callbacks","onopen","onerror","onclose","eventName","newWebSocket","sendMessage","handleId","sdp","e2ee","sendTrickleCandidate","createDataChannel","dclabel","dcprotocol","incoming","pendingData","onDataChannelStateChange","protocol","dcState","dataChannel","readyState","ondataopen","dcoptions","ordered","ondata","sendData","dataChanDefaultLabel","sendDtmf","dtmfSender","audioSender","getSenders","find","track","kind","dtmf","ontonechange","tone","tones","duration","gap","insertDTMF","destroyHandle","noRequest","cleanupWebrtc","streamsDone","media","stream","getAudioTracks","getVideoTracks","addTracks","myStream","update","streamExternal","isAudioSendEnabled","addAudio","replaceAudio","addTrack","unifiedPlan","audioTransceiver","transceivers","getTransceivers","t","receiver","replaceTrack","isVideoSendEnabled","addVideo","replaceVideo","videoTransceiver","pc_config","webRTCAdapter","browserDetails","browser","version","pc_constraints","optional","rtcConstraints","RTCRtpSender","prototype","createEncodedAudioStreams","createEncodedVideoStreams","senderTransforms","receiverTransforms","RTCPeerConnection","getStats","volume","bitrate","trickle","oniceconnectionstatechange","iceState","iceConnectionState","onicecandidate","iceDone","mySdp","localDescription","sdpSent","sendSDP","sdpMid","sdpMLineIndex","ontrack","streams","remoteStream","onremotestream","onended","receiverStreams","readableStream","pipeThrough","pipeTo","writableStream","trackMutedTimeoutId","ev","removeTrack","onmute","onunmute","simulcast2","getTracks","forEach","addTransceiver","sendEncodings","rid","maxBitrate","scaleResolutionDownBy","senderStreams","isDataEnabled","ondatachannel","onlocalstream","setRemoteDescription","customizeSdp","simulcast","mediaConstraints","audioSend","audioRecv","isAudioRecvEnabled","setDirection","removeAudio","videoSend","videoRecv","isVideoRecvEnabled","removeVideo","offerToReceiveAudio","offerToReceiveVideo","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","sendVideo","parameters","getParameters","setParameters","encodings","priority","createAnswer","answer","setLocalDescription","iceRestart","s","createOffer","offer","lines","split","video","ssrc","ssrc_fid","cname","msid","mslabel","insertAt","mline","splice","Math","floor","endsWith","mungeSdpForSimulcasting","prepareWebrtc","webrtcError","audio","keepAudio","keepVideo","addData","consentDialog","at","stop","ra","asnd","vt","rv","vsnd","tracks","mst","isGetUserMediaAvailable","constraints","audioSupport","videoSupport","callbackUserMedia","getScreenMedia","gsmCallback","useAudio","getUserMedia","audioStream","screenshareFrameRate","frameRate","screenshareHeight","screenshareWidth","captureDesktopAudio","googLeakyBucket","maxWidth","screen","maxHeight","minFrameRate","maxFrameRate","chromeMediaSource","googTemporalLayeredScreencast","chromeMediaSourceId","mozMediaSource","mediaSource","err","lastTime","currentTime","polly","setInterval","clearInterval","enumerateDevices","devices","audioExist","some","device","videoExist","isScreenSendEnabled","needAudioDevice","failIfNoAudio","isAudioSendRequired","needVideoDevice","failIfNoVideo","isVideoSendRequired","haveAudioDevice","haveVideoDevice","gumConstraints","prepareWebrtcPeer","getVolume","remote","timer","stats","res","remoteSource","audioLevel","isMuted","enabled","mute","getBitrate","inStats","mediaType","toLowerCase","bytesReceived","googCodecName","bsnow","tsnow","timestamp","bsbefore","tsbefore","timePassed","bitRate","round","hangupRequest","oncleanup","getServer","isConnected","reconnect","getSessionId","destroy","unload","notifyDestroyed","cleanupHandles","sendBeacon","unbindWebSocket","removeEventListener","onUnbindMessage","onUnbindError","session_id","destroySession","attach","plugin","opaqueId","handleToken","session","started","getId","getPlugin","getRemoteVolume","getLocalVolume","isAudioMuted","muteAudio","unmuteAudio","isVideoMuted","muteVideo","unmuteVideo","handleRemoteJsep","sendRequest","createHandle","useDefaultDependencies","deps","f","fetch","p","socketCls","WebSocket","proto","arr","Array","adapter","fetchOptions","method","credentials","fetching","timerId","race","ok","parsed","useOldDependencies","jq","jQuery","payload","contentType","xhrFields","ajax","extend","dataType","async","status","trace","d","usedDependencies","dependencies","listDevices","attachMediaStream","element","srcObject","URL","createObjectURL","reattachMediaStream","to","from","platform","oldOBF","safariVp8","getCapabilities","codecs","codec","mimeType","testpc","tempPc","charSet","randomPoz","path","component","LoginJwt","sessionCreate","registerUsername","newRemoteFeed","off","unmute","shortners","janusServer","janus","sfutest","myroom","myusername","myid","mystream","mypvtid","bitrateTimer","publisedCamera","publishedMicrophone","self","msg","display","leaving","filter","rfid","remoteFeed","shift","unpublished","exisiting","getElementById","room","ptype","simulcastStarted","subscribe","private_id","toUpperCase","videoCodec","rfdisplay","rfindex","MetaUpdate","RoleUpdate","ProfileUpdate","SettingUpdate","Boolean","hostname","use","Framework7React","ReactDOM","render","createElement","f7params","theme","panel","rightBreakpoint","touch","tapHold","routes","left","cover","themeDark","right","reveal","pushState","main","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"kTAAaA,GAAI,GACf,KAAS,2BACT,KAAS,iGACT,MAAU,2BACV,SAAc,2DACd,SAAa,+CACb,sBAAyB,6EACzB,OAAW,uEACX,MAAS,qBACT,QAAY,4BACZ,QAAY,wCACZ,KAAS,uCACT,kBAAqB,sIACrB,WAAc,+CACd,MAAS,iCACT,SAAY,iCACZ,QAAW,qBACX,OAAU,sBACV,oBAAuB,mFACvB,QAAW,oDACX,SAAY,2BACZ,aAAgB,0DAChB,iBAAoB,sEACpB,eAAkB,wFAClB,QAAW,4BACX,MAAS,kCACT,oBAAsB,uEACtB,OAAU,kCACV,OAAW,uCACX,KAAQ,iCACR,KAAQ,uCACR,OAAU,qBACV,YAAe,iLACf,QAAW,kEACX,IAAQ,wCACR,OAAU,8CACV,kBAAqB,0DACrB,SAAY,yCACZ,aAAgB,sGAChB,SAAY,iCACZ,KAAQ,qBACR,QAAW,uCACX,KAAQ,gEACR,IAAO,sBACP,UAAa,8EACb,UAAa,8EACb,SAAY,qDACZ,IAAM,2BACN,KAAO,iCACP,KAAQ,2BACR,kBAAqB,6EACrB,SAAY,sEACZ,WAAa,wCACb,IAAM,iCACN,WAAa,8CACb,QAAW,4EACX,UAAa,0DACb,eAAkB,8CAClB,gBAAmB,kFACnB,eAAkB,uEAClB,QAAW,oDACX,YAAe,sGACf,YAAe,4EACf,cAAkB,iEAClB,cAAiB,qDACjB,KAAQ,iCACR,UAAY,kCACZ,KAAS,qBACT,OAAU,oDACV,KAAQ,8CACR,OAAU,iCACV,YAAe,oDACf,MAAS,4BAxEM,qBAyER,kCAzEQ,cA0Ef,aAAc,2DA1EC,cA2Ef,MAAM,sBA3ES,cA4Ef,KAAK,sBA5EU,cA6Ef,cAAc,iEA7EC,cA8Ef,YAAY,2DA9EG,cA+Ef,cAAc,qDA/EC,cAgFf,UAAU,+CAhFK,cAiFf,cAAc,iEAjFC,cAkFf,aAAc,+CAlFC,cAmFf,MAAO,yCAnFQ,cAoFf,SAAU,sBApFK,cAqFf,mBAAoB,2DArFL,cAsFf,YAAY,8EAtFG,cAuFf,OAAQ,4BAvFO,cAwFf,YAAa,2DAxFE,cAyFf,oBAAqB,iEAzFN,cA0Ff,cAAe,qDA1FA,cA2Ff,iBAAkB,2DA3FH,cA4Ff,uBAAwB,yEA5FT,cA6Ff,QAAS,4BA7FM,cA8Ff,WAAY,mCA9FG,cA+Ff,QAAS,kCA/FM,cAgGf,gBAAgB,kEAhGD,cAiGf,aAAa,uEAjGE,cAkGf,WAAW,8CAlGI,cAmGf,YAAY,4EAnGG,cAoGf,kBAAmB,wGApGJ,cAqGf,kBAAmB,qDArGJ,cAsGf,WAAW,+CAtGI,cAuGf,UAAY,wCAvGG,cAwGf,QAAS,mCAxGM,cAyGf,QAAS,kCAzGM,cA0Gf,mBAAoB,oHA1GL,cA2Gf,sBAAuB,+GA3GR,cA4Gf,mCAAoC,qHA5GrB,cA6Gf,WAAY,mCA7GG,cA8Gf,YAAa,sBA9GE,cA+Gf,gBAAiB,iIA/GF,cAgHf,gBAAgB,sDAhHD,cAiHf,oBAAqB,8GAjHN,cAkHf,kBAAkB,kEAlHH,cAmHf,iBAAkB,8EAnHH,cAoHf,QAAS,mCApHM,cAqHf,WAAY,4BArHG,cAsHf,OAAO,kCAtHQ,cAuHf,SAAS,kCAvHM,cAwHf,QAAQ,wCAxHO,cAyHf,cAAc,gGAzHC,cA0Hf,WAAY,+CA1HG,cA2Hf,QAAS,4BA3HM,cA4Hf,UAAU,mCA5HK,cA6Hf,UAAW,sBA7HI,cA8Hf,OAAQ,6BA9HO,cA+Hf,OAAQ,sBA/HO,cAgIf,UAAW,yCAhII,cAiIf,aAAa,6DAjIE,cAkIf,QAAS,mCAlIM,cAmIf,OAAQ,4BAnIO,cAoIf,QAAS,4BApIM,cAqIf,sBAAsB,gGArIP,cAsIf,sBAAsB,0FAtIP,cAuIf,kBAAkB,wEAvIH,cAwIf,eAAgB,qDAxID,cAyIf,YAAa,yCAzIE,cA0If,QAAQ,qDA1IO,cA2If,OAAQ,4BA3IO,cA4If,OAAS,uEA5IM,cA6If,eAAgB,2DA7ID,cA8If,SAAU,4BA9IK,cA+If,OAAQ,sCA/IO,cAgJf,SAAU,8CAhJK,cAiJf,SAAU,wCAjJK,cAkJf,UAAY,kCAlJG,cAmJf,OAAQ,gBAnJO,cAoJf,OAAO,8CApJQ,cAqJf,SAAU,wCArJK,cAsJf,eAAgB,kEAtJD,cAuJf,eAAe,wEAvJA,cAwJf,YAAa,4FAxJE,cAyJf,gBAAiB,iEAzJF,cA0Jf,gBAAkB,iEA1JH,cA2Jf,kBAAkB,wGA3JH,cA4Jf,sBAAsB,yJA5JP,cA6Jf,kBAAkB,uEA7JH,cA8Jf,QAAQ,kCA9JO,cA+Jf,YAAa,6EA/JE,cAgKf,YAAY,6EAhKG,cAiKf,eAAgB,2DAjKD,cAkKf,oBAAsB,+CAlKP,cAmKf,0BAA4B,8GAnKb,cAoKf,UAAW,8CApKI,cAqKf,qBAAsB,mJArKP,cAsKf,WAAa,+CAtKE,cAuKf,YAAa,qDAvKE,cAwKf,mBAAoB,2DAxKL,cAyKf,kBAAoB,6EAzKL,cA0Kf,UAAW,4BA1KI,cA2Kf,yBAA0B,iGA3KX,cA4Kf,MAAO,0FA5KQ,G,0CCGIC,E,YACnB,aAAe,IAAD,8BACZ,+CACKC,OAAS,EAAKA,OAAOC,KAAZ,gBACd,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,UAJzB,E,sEASZC,KAAKC,SAAS,CAACL,MAAO,OACtBC,OAAOC,aAAaI,WAAW,SAC/BL,OAAOM,SAASC,W,gCAGRR,GACR,OAAIA,EAEA,kBAAC,IAAMS,SAAP,KACE,kBAAC,IAAD,KAAad,EAAKe,eAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUC,KAAK,aAAaC,YAAU,EAACC,QAAST,KAAKP,QACrD,uBAAGiB,UAAU,4BACX,8BAAOnB,EAAKE,UAGhB,kBAAC,IAAD,SAAa,uBAAGiB,UAAU,wBAA2BnB,EAAKoB,QAC1D,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUC,KAAK,UAAUC,aAAa,EAAOC,eAAe,EAAOP,KAAK,aAAaC,YAAU,GAC7F,uBAAGE,UAAU,yBACb,8BAAOnB,EAAKwB,QAGd,kBAAC,IAAD,CAAUH,KAAK,aAAaC,aAAa,EAAOC,eAAe,EAAOP,KAAK,aAAaC,YAAU,GAClG,uBAAGE,UAAU,2BACX,8BAAOnB,EAAKyB,WAGd,kBAAC,IAAD,CAAUJ,KAAK,aAAaC,aAAa,EAAOC,eAAe,EAAOP,KAAK,aAAaC,YAAU,GAChG,uBAAGE,UAAU,gCACb,8BAAOnB,EAAK0B,WAGd,kBAAC,IAAD,CAAUL,KAAK,kBAAkBC,aAAa,EAAOC,eAAe,EAAOP,KAAK,aAAaC,YAAU,GACrG,uBAAGE,UAAU,iCACb,8BAAOnB,EAAK2B,gBAGd,kBAAC,IAAD,CAAUN,KAAK,UAAUC,aAAa,EAAOC,eAAe,EAAOP,KAAK,aAAaC,YAAU,GAC7F,uBAAGE,UAAU,iCACb,8BAAOnB,EAAK4B,SAId,kBAAC,IAAD,SAAa,uBAAGT,UAAU,uBAA0BnB,EAAK6B,UACzD,kBAAC,IAAD,KACA,kBAAC,IAAD,CAAUR,KAAK,aAAaC,aAAa,EAAMN,KAAK,aAAaC,YAAU,GAC3E,uBAAGE,UAAU,sBACX,8BAAOnB,EAAK8B,kBAEd,kBAAC,IAAD,CAAUT,KAAK,UAAUC,aAAa,EAAMN,KAAK,aAAaC,YAAU,GACxE,uBAAGE,UAAU,yBACX,8BAAOnB,EAAK+B,QAEd,kBAAC,IAAD,CAAUV,KAAK,UAAUC,aAAa,EAAMN,KAAK,aAAaC,YAAU,GACxE,uBAAGE,UAAU,qBACX,8BAAOnB,EAAKgC,QAEd,kBAAC,IAAD,CAAUX,KAAK,qBAAqBC,aAAa,EAAMN,KAAK,aAAaC,YAAU,GACnF,uBAAGE,UAAU,wBACX,8BAAOnB,EAAKiC,qBAOlB,kBAAC,IAAMnB,SAAP,KACE,kBAAC,IAAD,KAAad,EAAKe,eAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUM,KAAK,UAAUa,MAAOlC,EAAKmC,MAAOnB,KAAK,aAAaC,YAAU,Q,+BAOxE,IACAZ,EAAUI,KAAKL,MAAfC,MACR,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAS,0BAAMc,UAAU,mBAAkB,uBAAGA,UAAU,2BAA8BnB,EAAKoC,OAC1F3B,KAAK4B,UAAUhC,Q,GA5FoBiC,a,SCD7B,M,OAAIC,YCgGbC,EAAa,I,YA7FjB,aAAe,IAAD,8BACZ,+CACKC,KAAO,GACZ,EAAKC,SAAW,KAChB,EAAKC,MAAO,KAJA,E,uEAOJF,GACRhC,KAAKgC,KAAO,GACZhC,KAAKkC,MAAQF,EAAKE,MAClB,IAAK,IAAIC,EAAI,EAAGC,EAAMJ,EAAKK,KAAKC,OAAQH,EAAIC,IAAOD,EACjDnC,KAAKgC,KAAKO,KAAKP,EAAKK,KAAKF,IACrBA,IAAMC,EAAM,GACdpC,KAAKwC,KAAK,YAGS,GAApBR,EAAKK,KAAKC,QACXtC,KAAKwC,KAAK,c,kCAKFP,GACVjC,KAAKkC,MAAQD,EAASC,MACtBlC,KAAKiC,SAAWA,EAASI,KACzBrC,KAAKwC,KAAK,kB,iCAGDP,GACTjC,KAAKkC,MAAQD,EAASC,MACtBlC,KAAKiC,SAAWA,EAASI,KACzBrC,KAAKwC,KAAK,kB,oCAIEP,GACZjC,KAAKkC,MAAQD,EAASC,MACtBlC,KAAKiC,SAAWA,EAASI,KACzBrC,KAAKwC,KAAK,sB,+BAGHP,GACPQ,QAAQC,IAAIT,GACZjC,KAAKkC,MAAQD,EAASC,MACtBlC,KAAKiC,SAAWA,EAASI,KACzBrC,KAAKwC,KAAK,iB,mCAIV,OAAOxC,KAAKiC,W,gCAIZ,OAAOjC,KAAKgC,O,sCAIZ,MAAO,CAAChC,KAAKgC,KAAMhC,KAAKkC,S,iCAIxB,OAAOlC,KAAKkC,Q,oCAGAS,GACZ,OAAOA,EAAOC,MACZ,IAAK,qBACH5C,KAAK6C,UAAUF,EAAOX,MACtB,MAEF,IAAK,uBACHhC,KAAK8C,YAAYH,EAAOV,UACxB,MAEF,IAAK,0BACHjC,KAAK+C,cAAcJ,EAAOV,UAC1B,MAEF,IAAK,uBACHjC,KAAKgD,WAAWL,EAAOV,UACvB,MAEF,IAAK,oBACHjC,KAAKiD,SAASN,EAAOV,e,GApFJiB,iBA+FzBC,EAAWC,SAASrB,EAAWsB,cAAc3D,KAAKqC,IAEnCA,Q,iBCrGFuB,EAAO,CACpB,OAAW,MACX,YAAgB,sCCCVC,EAAQD,EAAKC,OAKZ,SAASC,EAAQC,GAAkC,IAA3BC,EAA0B,uDAArB,EAAGC,EAAkB,uDAAX,GAAI/D,EAAO,uCACnDgE,EAAcC,OAAOC,KAAKH,GAAQI,KAAI,SAAAC,GAAG,OAAIA,EAAM,IAAML,EAAOK,MAAMC,KAAK,KAC/EC,IAAMC,IAAIZ,EAAS,IAAKE,EAAO,SAASC,EAAK,IAAIE,EAAa,CAAEQ,QAAS,CAAC,eAAgB,mBAAoB,cAAiB,UAAYxE,KAC1IyE,MAAK,SAAUC,GACdnB,EAAWoB,SAAS,CAClB3B,KAAM,qBACNZ,KAAMsC,EAASjC,UAGlBmC,OAAM,SAAUC,GACfhC,QAAQC,IAAI+B,MAIT,SAASC,EAAWjB,EAAOkB,EAAKC,EAAMhF,GAC3C,IAAMiF,EAAMtB,EAAS,IAAKE,EAAO,IAAIkB,EAC/BG,EAAW,IAAIC,SACrBD,EAASE,OAAO,kBAAkBJ,GAClCE,EAASE,OAAO,cAAcL,GAC9B,IAAMM,EAAS,CACXb,QAAS,CACL,eAAgB,sBAChB,cAAiB,UAAYxE,IAGrCsF,cAAIL,EAAKC,EAASG,GAAQZ,MAAK,SAAUC,GACvCnB,EAAWoB,SAAS,CAClB3B,KAAM,oBACNX,SAAUqC,EAASjC,UAGtBmC,OAAM,SAAUC,GACfhC,QAAQC,IAAI+B,MAIT,SAASU,EAAY1B,EAAOkB,EAAI/E,GAAgB,IAAT8D,EAAQ,uDAAH,EACjDQ,IAAMC,IAAIZ,EAAS,IAAKE,EAAO,IAAIkB,EAAG,SAASjB,EAAM,CAAEU,QAAS,CAAC,eAAgB,mBAAoB,cAAiB,UAAYxE,KACjIyE,MAAK,SAAUC,GACdnB,EAAWoB,SAAS,CAClB3B,KAAM,uBACNX,SAAUqC,EAASjC,UAGtBmC,OAAM,SAAUC,GACfhC,QAAQC,IAAI+B,MAIT,SAASW,EAAe3B,GAA2B,IAApBE,EAAmB,uDAAZ,GAAI/D,EAAQ,uCACnDgE,EAAcC,OAAOC,KAAKH,GAAQI,KAAI,SAAAC,GAAG,OAAIA,EAAM,IAAML,EAAOK,MAAMC,KAAK,KAC/EC,IAAMC,IAAIZ,EAAS,IAAKE,EAAO,WAAWG,EAAa,CAAEQ,QAAS,CAAC,eAAgB,mBAAoB,cAAiB,UAAYxE,KACnIyE,MAAK,SAAUC,GACdnB,EAAWoB,SAAS,CAClB3B,KAAM,0BACNX,SAAUqC,EAASjC,UAGtBmC,OAAM,SAAUC,GACfhC,QAAQC,IAAI+B,MAIT,SAASY,EAAY5B,EAAOpB,EAAMzC,GACvCsE,IAAMoB,KAAK/B,EAAS,IAAKE,EAAO,IAAKpB,EAAM,CAAE+B,QAAS,CAAC,eAAgB,mBAAoB,cAAiB,UAAYxE,KACvHyE,MAAK,SAAUC,GACdnB,EAAWoB,SAAS,CAClB3B,KAAM,uBACNX,SAAUqC,EAASjC,UAGtBmC,OAAM,SAAUC,GACfhC,QAAQC,IAAI+B,MAIT,SAASc,EAAe9B,EAAOpB,EAAMzC,GAC1CsE,IAAMgB,IAAI3B,EAAS,IAAKE,EAAO,IAAIpB,EAAKsC,GAAItC,EAAM,CAAE+B,QAAS,CAAC,eAAgB,mBAAoB,cAAiB,UAAYxE,KAC9HyE,MAAK,SAAUC,GACdnB,EAAWoB,SAAS,CAClB3B,KAAM,uBACNX,SAAUqC,EAASjC,UAGtBmC,OAAM,SAAUC,GACfhC,QAAQC,IAAI+B,MC3FhB,IAeee,EAfO,SAACC,GACrB,IAAIC,EAAU,CAAC,4BAAQC,MAAM,MAC7B,GAAGF,EAAMG,QACP,IAAK,IAAIzD,EAAI,EAAGA,EAAIsD,EAAMG,QAAQtD,OAAQH,IACxCuD,EAAQnD,KACN,4BAAQoD,MAAOF,EAAMG,QAAQzD,GAAGyD,QAAQ,GAAGC,KACxCJ,EAAMG,QAAQzD,GAAGyD,QAAQ,GAAGD,QAMrC,OAAOD,GCqDQI,EA9DE,SAACL,GAChB,GAAIA,EAAMM,MAAQN,EAAMM,KAAKC,YAAa,CAItC,IAFA,IAAIA,EAAcP,EAAMM,KAAKC,YACzBC,EAAQ,GAH0B,WAI7B9D,GACP,OAAQ6D,EAAY7D,GAAGS,MACrB,IAAK,SACLqD,EAAM1D,KACJ,kBAAC,IAAD,CACE2D,MAAOF,EAAY7D,GAAG+D,MACtBtD,KAAK,OACLuD,YAAY,MACZC,QAAS,SAACC,GAAD,OAAOZ,EAAMa,cAAcN,EAAY7D,GAAG0D,IAAKQ,EAAEE,OAAOZ,MAAOF,EAAMM,KAAKpB,QAEvF,MACA,IAAK,OACDsB,EAAM1D,KACJ,kBAAC,IAAD,CACE2D,MAAOF,EAAY7D,GAAGqE,KACtB5D,KAAK,WACLuD,YAAY,MACZC,QAAS,SAACC,GAAD,OAAOZ,EAAMa,cAAcN,EAAY7D,GAAG0D,IAAKQ,EAAEE,OAAOZ,MAAOF,EAAMM,KAAKpB,QAG3F,MACA,IAAK,QACGqB,EAAY7D,GAAGyD,SACjBK,EAAM1D,KACJ,kBAAC,IAAD,CACEd,MAAOuE,EAAY7D,GAAGyD,QAAQnE,MAC9BgF,aAAW,EACXC,kBAAmB,CAACC,iBAAkBpH,EAAKqH,OAE3C,4BAAQJ,KAAK,UACXK,SAAU,SAACR,GAAD,OAAOZ,EAAMa,cAAcN,EAAY7D,GAAG0D,IAAKQ,EAAEE,OAAOZ,MAAOF,EAAMM,KAAKpB,MAEpF,kBAAC,EAAD,CAAeiB,QAASI,EAAY7D,GAAGyD,eAhC9CzD,EAAI,EAAGA,EAAI6D,EAAY1D,OAAQH,IAAM,EAArCA,GAuCH,IAAI2E,EAAS,KAIb,OAHIrB,EAAMqB,SACRA,EAAS,kBAAC,IAAD,KAAY,kBAAC,IAAD,MAAa,kBAAC,IAAD,CAAQpG,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,UAG5F,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAavH,EAAKyH,KAAlB,IAAyBvB,EAAMM,KAAKG,OACpC,kBAAC,IAAD,CAAMc,MAAI,GACPf,EACAa,IAMP,OAAO,+B,iBCzBNG,EAnCI,SAACxB,GAClB,IAAIO,EAAaP,EAAMM,KAAKC,YAC5B,GAAGP,EAAMM,MAAQN,EAAMyB,QAAQ,CAI7B,IAHF,IAAIC,EAAO,CAAC,kBAAC,IAAD,KAAa1B,EAAMM,KAAKG,QAC9BkB,EAAK,GACLF,EAAWzB,EAAMyB,QAHQ,WAIpB/E,GACJyD,EAAUsB,EAAQ/E,GAAGyD,QACrBwB,EAAK,GACR,IAAK,IAAIC,EAAG,EAAGA,EAAIzB,EAAQtD,OAAQ+E,IAE/BD,EAAG7E,KAAK,kBAAC,IAAD,CAAWyB,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,IAAKvB,MAAON,EAAQyB,GAAGnB,MAAOtD,KAAK,OAAO8E,aAAc9B,EAAQyB,GAAG1B,SAErHF,EAAMkC,UAAY/B,EAAQyB,IAAMA,GAAKrB,EAAY1D,OAAS,GAAKmD,EAAMM,KAAKpB,IAAMiB,EAAQyB,GAAGO,QAC7FR,EAAG7E,KAAK,kBAAC,IAAD,CAAQsF,MAAM,OAAOpH,QAAS,kBAAMgF,EAAMqC,aAAaZ,EAAQ/E,GAAG4F,QAC1E,kBAAC,IAAD,CAAMC,IAAI,WAAWC,OAAO,WAAWC,GAAG,qBAI9Cf,EAAK5E,KAAK,kBAAC,IAAD,KAAM,kBAAC,IAAD,CAAMyB,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAAML,MAbtDjF,EAAI,EAAGA,EAAI+E,EAAQ5E,OAAQH,IAAK,CAAC,IACrCyD,EADoC,EAAhCzD,GAmBX,OACE,kBAAC,IAAM9B,SAAP,KACG8G,GAKL,OAAO,+B,kBCVMgB,EAnBE,SAAC1C,GAChB,OAAIA,EAAMM,KAEN,kBAAC,IAAM1F,SAAP,KACE,kBAAC,IAAD,KACA,kBAAC,IAAD,KAAad,EAAKkC,MAAlB,KAA2BgE,EAAMM,KAAKtE,OACtC,kBAAC,IAAD,CAAM2G,eAAA,GACJ,kBAAC,IAAD,CAAU1H,UAAU,IACpB,kBAAC,IAAD,CAAYiE,GAAG,cAActC,KAAMgG,KAAKC,UAAU7C,EAAMM,KAAKC,kBAG/D,kBAAC,EAAD,CAAYD,KAAMN,EAAMM,KAAM4B,UAAU,EAAMT,QAASzB,EAAMM,KAAKmB,QAASY,aAAcrC,EAAMqC,eAC/F,kBAAC,EAAD,CAAY/B,KAAMN,EAAMM,KAAMe,OAAQrB,EAAMqB,OAAQR,cAAeb,EAAM8C,qBAItE,MCHUC,E,YACnB,aAAe,IAAD,8BACZ,+CACKrD,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKoH,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAKoI,aAAe,EAAKA,aAAapI,KAAlB,gBAGpB,EAAKC,MAAQ,CACXoG,KAAM,KACN6B,OAAQ,KACRhI,MAAOC,OAAOC,aAAaC,QAAQ,SACnC0I,OAAQ,IAZE,E,kFAiBZC,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,mBAAoB3I,KAAKmF,e,6CAIvCuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,mBAAoB5I,KAAKmF,e,0CAInD0D,EAAsB,QAAS7I,KAAK8I,SAASnF,OAAd,U,oCAI/B,IAAIoC,EAAO2C,EAAWK,aAClB7G,EAAQwG,EAAWM,WACnBjD,GAAkB,SAAV7D,GACVlC,KAAKC,SAAS,CACZ8F,KAAMA,EACN6B,OAAQ7B,EAAKpB,O,wCAKDX,EAAK2B,GACrB,IAAI8C,EAASzI,KAAKL,MAAM8I,OACxB,GAAIA,EAAOnG,OAAS,EAClB,IAAK,IAAIH,EAAI,EAAGA,EAAIsG,EAAOnG,OAAQH,IACjC,GAAIsG,EAAOtG,GAAG0D,KAAO4C,EAAOtG,GAAG0D,MAAQ7B,EAAK,CAC1C,IAAIiF,EAAWpF,OAAOqF,OAAO,GAAIlJ,KAAKL,OACtCsJ,EAASR,OAAOtG,GAAK,CAAE0D,IAAK7B,EAAK2B,MAAOA,GACxC3F,KAAKC,SAASgJ,QAEdjJ,KAAKC,SAAS,CAAEwI,OAAQzI,KAAKL,MAAM8I,OAAOU,OAAO,CAAEtD,IAAK7B,EAAK2B,MAAOA,WAIxE3F,KAAKC,SAAS,CAAEwI,OAAQzI,KAAKL,MAAM8I,OAAOU,OAAO,CAAEtD,IAAK7B,EAAK2B,MAAOA,Q,mCAI3DoC,GACXc,EAAyB,UAAW,CAACd,KAAMA,M,+BAK3Cc,EAAsB,UADX,CAACO,QAASpJ,KAAKL,MAAMiI,OAAQhC,QAAS5F,KAAKL,MAAM8I,QACrBzI,KAAKL,MAAMC,S,4BAIlD,GAAII,KAAKL,MAAMoG,KACb,OACE,kBAAC,IAAD,CAAKsD,KAAM,UAAYrJ,KAAKL,MAAMoG,KAAKpB,GAAK,QAAS4B,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,QACjH,kBAAC,IAAD,CAAMG,IAAI,UAAUC,OAAO,UAAUC,GAAG,kBACxC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,sB,+BAMxC,IACAnC,EAAS/F,KAAKL,MAAdoG,KACR,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQtE,MAAOlC,EAAKgC,MAAOiI,SAAUjK,EAAKqH,OAC1C,kBAAC,IAAD,MACC5G,KAAKyJ,MACN,kBAAC,EAAD,CAAU1D,KAAMA,EAAM+B,aAAc9H,KAAK8H,aAAcS,kBAAmBvI,KAAKuI,kBAAmBzB,OAAQ9G,KAAK8G,c,GAxFnFjF,aCKnB6H,EArBA,SAACjE,GAEhB,OAAIA,EAAMlE,MAEN,kBAAC,IAAD,CAAMoI,WAAS,GACZlE,EAAMlE,MAAMwC,KAAI,SAACgC,GAAD,OACf,kBAAC,IAAD,CACE/B,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,IACjC7G,KAAM,UAAYmF,EAAKpB,GACvB9D,aAAa,EACbY,MAAOsE,EAAKtE,MACZmI,MAAM,GACNC,SAAS,GACTC,KAAK,SAKH,8BCHCC,EAdG,SAACtE,GACjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAKgC,MAAOiI,SAAUjK,EAAKqH,OAE1C,kBAAC,IAAD,KAAarH,EAAKyC,MAClB,kBAAC,IAAD,CAAKqH,KAAK,aAAa9C,OAAO,aAAc+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,cACpF,kBAAC,IAAD,CAAMG,IAAI,SAASC,OAAO,SAASC,GAAG,iBACtC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,oBAE5C,kBAAC,EAAD,CAAU3G,MAAOkE,EAAMlE,UCNRiH,E,YACnB,aAAe,IAAD,8BACZ,+CACKhF,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKC,MAAQ,CACX4B,MAAO,MAJG,E,kFAQZmH,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,WAAY5I,KAAKwD,W,0CAI3CxD,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QACpET,EAAkB,QAAS7I,KAAKL,MAAM+D,Q,gCAItC,IAAInC,EAAQmH,EAAWlF,UACnBtB,EAAQwG,EAAWM,WACnBzH,GAAoB,SAAVW,GACZlC,KAAKC,SAAS,CACZsB,MAAOA,M,+BAKH,IACDA,EAASvB,KAAKL,MAAd4B,MACP,OAAO,kBAAC,EAAD,CAAWA,MAAOA,Q,GAtCO+I,IAAMzI,WCwC3B0I,EA1CE,SAAC9E,GAChB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMuB,MAAI,GACR,kBAAC,IAAD,CACEd,MAAO3G,EAAKkC,MACZmB,KAAK,OACLuD,YAAY,MACZuB,aAAcjC,EAAMM,KAAKtE,MACzB2E,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE/I,MAAO4E,EAAEE,OAAOZ,WAGzC,kBAAC,IAAD,CACEO,MAAO3G,EAAK2G,MACZtD,KAAK,OACLuD,YAAY,MACZuB,aAAcjC,EAAMM,KAAKG,MACzBE,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEtE,MAAOG,EAAEE,OAAOZ,WAGzC,kBAAC,IAAD,CACEO,MAAM,SACNtD,KAAK,OACL6H,WAAY,CAACC,UAAW,OACxBhD,aAAcW,KAAKC,UAAU7C,EAAMM,KAAKC,aACxCG,YAAY,OACZC,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEG,WAAYtE,EAAEE,OAAOZ,YAMhD,kBAAC,IAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAQjF,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,WCvB7C8D,E,YACnB,aAAe,IAAD,8BACZ,+CACK9D,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBAEzB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCgG,KAAM,GACN4E,WAAY,KACZlJ,MAAO,KACPyE,MAAO,MAXG,E,kFAiBZwC,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,+BAK/CwD,EAAsB,QADX,CAACpH,MAAOzB,KAAKL,MAAM8B,MAAOyE,MAAOlG,KAAKL,MAAMuG,MAAQF,YAAahG,KAAKL,MAAMgL,YAClD3K,KAAKL,MAAMC,S,wCAIhCiL,GAChB7K,KAAKC,SAAS4K,K,oCAKd7K,KAAK8K,UAAUC,SAAS,a,+BAKhB,IACDhF,EAAQ/F,KAAKL,MAAboG,KACP,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQtE,MAAOlC,EAAKyL,UAAWxB,SAAUjK,EAAKqH,OAC9C,kBAAC,IAAD,KAAarH,EAAKyL,WAClB,kBAAC,EAAD,CAAUjF,KAAMA,EAAMe,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAMT,aAAcxK,KAAKuI,yB,GAhD7C1G,aCCnBqJ,E,YACnB,aAAe,IAAD,8BACZ,+CACKpE,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAKyF,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBAGzB,EAAKC,MAAQ,CACXoG,KAAO,GACPtE,MAAO,KACPkJ,WAAY,KACZhG,GAAI,KACJuB,MAAO,MAbG,E,kFAkBZwC,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,+BAO/CwD,EAAyB,QADd,CAAClE,GAAG3E,KAAKL,MAAMgF,GAAIlD,MAAOzB,KAAKL,MAAM8B,MAAOyE,MAAOlG,KAAKL,MAAMuG,MAAOF,YAAahG,KAAKL,MAAMgL,e,0CAIxG3K,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QAChEtJ,KAAK8I,SAASnF,OAAd,QACFkF,EAAsB,QAAS7I,KAAK8I,SAASnF,OAAd,U,oCAMjC,IAAIoC,EAAO2C,EAAWK,aAClB7G,EAAQwG,EAAWM,WACvBvG,QAAQC,IAAIqD,GACRA,GAAkB,SAAV7D,GACVlC,KAAKC,SAAS,CACZwB,MAAOsE,EAAKtE,MACZkD,GAAIoB,EAAKpB,GACToB,KAAMA,EACN4E,WAAY5E,EAAK4E,WACjBzE,MAAOH,EAAKG,U,wCAKA2E,GAChBpI,QAAQC,IAAImI,GACZ7K,KAAKC,SAAS4K,K,oCAMd7K,KAAK8K,UAAUC,SAAS,a,+BAIhB,IACGhF,EAAQ/F,KAAKL,MAAboG,KACX,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQtE,MAAOlC,EAAKyL,UAAWxB,SAAUjK,EAAKqH,OAC9C,kBAAC,IAAD,KAAarH,EAAKyL,WAClB,kBAAC,EAAD,CAAUjF,KAAMA,EAAMe,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAMT,aAAcxK,KAAKuI,yB,GAhFzC1G,a,yBCO7BsJ,EAxBS,SAAC1F,GACvB,OAAIA,EAAMhC,MAEN,kBAAC,IAAMpD,SAAP,KAEA,kBAAC,IAAD,CAASsE,GAAI,sBAAsBc,EAAMhC,MAAMkB,IAC7C,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAepF,EAAK6L,aACpB,kBAAC,IAAD,CAAe3K,QAAS,kBAAMgF,EAAM4F,YAAY,WAAY5F,EAAMhC,MAAMkB,GAAIc,EAAMvD,MAAOuD,EAAM6F,WAAY7F,EAAM8F,YAAW,uBAAG7K,UAAU,2BAA8BnB,EAAKiM,SAA5K,KAAwL/F,EAAMhC,MAAMgI,UAApM,KACA,kBAAC,IAAD,CAAehL,QAAS,kBAAMgF,EAAM4F,YAAY,OAAQ5F,EAAMhC,MAAMkB,GAAIc,EAAMvD,MAAOuD,EAAM6F,WAAY7F,EAAM8F,YAAW,uBAAG7K,UAAU,wBAA2BnB,EAAKmM,KAArK,KAA6KjG,EAAMhC,MAAMkI,MAAzL,KACA,kBAAC,IAAD,CAAelL,QAASgF,EAAMhC,MAAMmI,SAAW,GAAG,kBAAMnG,EAAM4F,YAAY,SAAU5F,EAAMhC,MAAMkB,GAAIc,EAAMvD,MAAOuD,EAAM6F,WAAY7F,EAAM8F,YAAW,uBAAG7K,UAAU,uBAA0BnB,EAAKsM,OAAhM,KAA0MpG,EAAMhC,MAAMqI,QAAtN,MAEF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAejE,MAAM,OAAOtI,EAAKwM,UAIrC,kBAAC,IAAD,CAAQrL,UAAU,MAAO2I,MAAM,EAAO2C,YAAa,uBAAuBvG,EAAMhC,MAAMkB,IAAI,uBAAGjE,UAAU,qBAIlG,MC8BIuL,EAnDG,SAACxG,GACjB,GAAIA,EAAMhC,MAAO,CACf,GAAIgC,EAAMzE,SAER,IADA,IAAI0E,EAAU,GACLvD,EAAI,EAAGA,EAAIsD,EAAMzE,SAASsB,OAAQH,IACzCuD,EAAQnD,KACN,4BAAQoD,MAAOF,EAAMzE,SAASmB,GAAGwC,IAC9Bc,EAAMzE,SAASmB,GAAGV,QAK3B,OACE,kBAAC,IAAMpB,SAAP,KACE,kBAAC,IAAD,CAAOK,UAAU,aAAawL,OAAQzG,EAAM0G,YAAaC,cAAe,WAAQ3G,EAAM+E,aAAa,CAAE2B,aAAa,MAChH,kBAAC,IAAD,KACE,yBAAKzL,UAAU,SACf,yBAAKA,UAAU,SACb,kBAAC,IAAD,CAAM2L,YAAU,GAAE9M,EAAK+M,SAI3B,kBAAC,IAAD,KAEE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEpG,MAAO3G,EAAKgN,QACZ3J,KAAK,SACLiE,SAAU,SAACR,GACTZ,EAAM+E,aAAa,CAAEgC,gBAAiBnG,EAAEE,OAAOZ,UAIhDD,IAGL,kBAAC,IAAD,CAAO+G,QAAM,GACX,kBAAC,IAAD,CAAKC,IAAI,KACP,kBAAC,IAAD,CAAQhM,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,YAMlE,kBAAC,IAAD,CAAQpG,UAAU,MAAM2I,MAAM,EAAOsD,UAAU,eAAc,uBAAGC,MAAM,uBAI1E,OAAQ,MCzBKC,EAxBG,SAACpH,GACjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAalG,EAAKuN,cAClB,kBAAC,IAAD,CAAM9F,MAAI,GACV,kBAAC,IAAD,CACId,MAAO3G,EAAKwN,QACZnK,KAAK,WACLuD,YAAY,MACZ6G,UAAU,MACVC,WAAS,EACTC,aAAa,EACb9G,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE2C,eAAgB9G,EAAEE,OAAOZ,YAIpD,kBAAC,IAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAQjF,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,W,kBCwBrDsG,I,YAxCK,SAAC3H,GACjB,IAAIQ,EAAQ,GACZ,GAAIR,EAAM4H,SAAU,CAEhB,IAFiB,IAAD,WAEPlL,GACDmL,EAAO,kBAAC,IAAMjN,SAAP,KAAgB,kBAAC,IAAD,CAAMI,QAAS,kBAAMgF,EAAM8H,cAAc9H,EAAM4H,SAASlL,GAAGwC,MAAK,uBAAGjE,UAAU,yBAAiC,kBAAC,KAAD,CAAQ8M,OAAO,KAAKC,SAAO,EAACC,KAAG,GAAEjI,EAAM4H,SAASlL,GAAGwL,YAAqBpO,EAAKmO,KACtNzH,EAAM1D,KACF,kBAAC,IAAD,CACI7B,UAAU,YACVoJ,KAAMwD,EACNzD,SAAUpE,EAAM4H,SAASlL,GAAGyD,SAE5B,yBAAK2D,KAAK,QAAQqE,IAAKnI,EAAM4H,SAASlL,GAAG0L,QAAQC,OAAQC,MAAM,UARlE5L,EAAI,EAAGA,EAAIsD,EAAM4H,SAAS/K,OAAQH,IAAK,CAAC,IACzCmL,EADwC,EAAvCnL,GAcT,OACI,kBAAC,IAAM9B,SAAP,KACI,kBAAC,IAAD,KAAad,EAAK8N,UAClB,kBAAC,IAAD,CAAM1D,WAAS,EAACqE,OAAK,GAChB/H,GAEL,kBAAC,IAAD,CAAKgI,OAAK,GACN,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAKvN,UAAU,UACX,uBAAGA,UAAU,aAAaD,QAAS,kBAAMgF,EAAMyI,aAC1C3O,EAAK4O,OAGd,kBAAC,IAAD,QAMZ,OAAQ,OCIDC,GApCE,SAAC3I,GAChB,GAAIA,EAAMH,MAAQG,EAAMH,KAAK+I,MAAO,CAAC,IAAD,EAC5BC,EAAeC,yBAAe9I,EAAMH,KAAK+I,OACzCG,EAAcC,cAAYC,kBAAkBJ,GAClD,OACE,kBAAC,IAAMjO,SAAP,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAK0N,MAAM,KAAKY,YAAY,OAC5B,kBAAC,IAAD,CAAKZ,MAAM,KAAKY,YAAY,KAAKjO,UAAU,QACzC,kBAAC,IAAD,CAAQqG,MAAI,GAAC,kBAAC,GAAD,GAAWtD,MAAOgC,EAAMH,KAAMwB,OAAQrB,EAAMqB,OAAQ9F,SAAUyE,EAAMzE,SAAUkB,MAAM,OAAOiK,YAAa1G,EAAM0G,YAAa3B,aAAc/E,EAAM+E,cAA/I,sBAAmK,WAAnK,4BAA0L/E,EAAM4F,aAAhM,MAEf,kBAAC,IAAD,CAAK0C,MAAM,KAAKY,YAAY,MAC1B,kBAAC,IAAD,CAAQ5H,MAAI,GAAC,kBAAC,EAAD,CAAiBtD,MAAOgC,EAAMH,KAAMpD,MAAM,OAAOmJ,YAAa5F,EAAM4F,kBAIvF,kBAAC,IAAD,KAAa9L,EAAKkC,OAClB,kBAAC,IAAD,CAAM2G,eAAA,GACJ,kBAAC,IAAD,KAAW3C,EAAMH,KAAK7D,QAGxB,kBAAC,IAAD,KAAalC,EAAKqG,SAClB,kBAAC,SAAD,CAAQ4I,YAAaA,EACnBI,QAAS,CAAElJ,QAAS,IACpBmJ,UAAU,IAGZ,kBAAC,EAAD,CAAavJ,KAAMG,EAAMH,KAAMwB,OAAQrB,EAAMqJ,cAAetE,aAAc/E,EAAM+E,eAChF,kBAAC,GAAD,CAAa6C,SAAU5H,EAAM4H,SAAUE,cAAe9H,EAAM8H,cAAeW,SAAUzI,EAAMyI,YAI/F,OAAQ,MCxBS1F,G,YACnB,aAAe,IAAD,8BACZ,+CACKrD,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK2L,YAAc,EAAKA,YAAY3L,KAAjB,gBACnB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKoH,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAKoP,cAAgB,EAAKA,cAAcpP,KAAnB,gBACrB,EAAK6N,cAAgB,EAAKA,cAAc7N,KAAnB,gBACrB,EAAKwO,SAAW,EAAKA,SAASxO,KAAd,gBAKhB,EAAKC,MAAQ,CACX2F,KAAM,KACNX,GAAI,KACJjB,KAAM,EACN1C,SAAU,KACVwL,gBAAiB,KACjBuC,UAAW,KACX5C,aAAa,EACbgB,eAAgB,GAChBE,SAAU,KACVzN,MAAOC,OAAOC,aAAaC,QAAQ,UAzBzB,E,kFA+BZ2I,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKqF,aACnCqD,EAAWC,GAAG,WAAY3I,KAAKwD,SAC/BkF,EAAWC,GAAG,mBAAoB3I,KAAKmF,e,6CAKvCuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKqF,aAC/CqD,EAAWE,eAAe,WAAY5I,KAAKwD,SAC3CkF,EAAWE,eAAe,mBAAoB5I,KAAKmF,e,0CAInDnF,KAAKgP,GAAG,cAAcrG,GAAG,WAAW,SAAUsG,GAC5CA,EAAGC,OAAOC,MAAM,sBAElBtG,EAAsB,QAAS7I,KAAK8I,SAASnF,OAAd,OAAgC3D,KAAKL,MAAMC,OAC1EiJ,EAAkB,cAAe7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,oCAIjE,IAAI0F,EAAOoD,EAAWK,aAClB7G,EAAQwG,EAAWM,WACnB1D,GAAkB,SAAVpD,GACVlC,KAAKC,SAAS,CACZqF,KAAMA,EACNX,GAAIW,EAAKX,GACT0I,SAAU/H,EAAK+H,a,gCAMnB,IAAIrM,EAAW0H,EAAWlF,UACtBtB,EAAQwG,EAAWM,WACnBhI,GAAsB,YAAVkB,GACdlC,KAAKC,SAAS,CACZe,SAAUA,EACV+N,UAAW/N,EAAS,GAAG2D,KAG3BlC,QAAQC,IAAI1B,K,oCAIZ,IAAIsE,EAAOoD,EAAWK,aAClB7G,EAAQwG,EAAWM,WACnB1D,GAAkB,SAAVpD,GACVlC,KAAKC,SAAS,CACZqF,KAAMA,EACN+H,SAAU/H,EAAK+H,SACf3J,KAAM,M,iCAKA,IAAD,OACT1D,KAAKC,SAAS,CAAEyD,KAAM1D,KAAKL,MAAM+D,KAAO,IAAK,WAC3CmF,EAAsB,QAAS,EAAKC,SAASnF,OAAd,OAAgC,EAAKhE,MAAMC,MAAO,EAAKD,MAAM+D,W,4BAK9F,GAAI1D,KAAKL,MAAM2F,KACb,OACE,kBAAC,IAAD,CAAK+D,KAAM,UAAYrJ,KAAKL,MAAM2F,KAAKX,GAAK,QAAS4B,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,QACjH,kBAAC,IAAD,CAAMG,IAAI,UAAUC,OAAO,UAAUC,GAAG,kBACxC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,sB,wCAMhC2C,GAChB7K,KAAKC,SAAS4K,K,kCAIJuE,EAAkBC,EAAoBC,GAA6D,IAAvCC,EAAsC,uDAAxB,KAAMC,EAAkB,uDAAN,KAClGnN,EAAO,CAAE+M,iBAAkBA,EAAkBC,mBAAoBA,EAAoBC,qBAAsBA,EAAsBC,YAAaA,EAAaC,UAAWA,GAC1K3G,EAAsB,eAAgBxG,EAAMrC,KAAKL,MAAMC,S,+BAKvDiJ,EAAsB,SADX,CAAE4G,QAASzP,KAAKL,MAAMgF,GAAI+K,WAAY1P,KAAKL,MAAM6M,iBACtBxM,KAAKL,MAAMC,OACpCI,KACR2P,IAAIC,MAAMtD,MAAM,iB,sCAKrBzD,EAAsB,WADX,CAAE4G,QAASzP,KAAKL,MAAMgF,GAAIiB,QAAS5F,KAAKL,MAAMwN,gBACjBnN,KAAKL,MAAMC,S,oCAGvC+E,GAEZkE,EAAyB,WADd,CAAElE,GAAIA,GAC0B3E,KAAKL,MAAMC,MAAOI,KAAKL,MAAM+D,Q,+BAGhE,IAAD,EAC2C1D,KAAKL,MAA/C2F,EADD,EACCA,KAAmBtE,GADpB,EACOmL,YADP,EACoBnL,UAAUqM,EAD9B,EAC8BA,SACrC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ5L,MAAOlC,EAAKwB,MAAOyI,SAAUjK,EAAKqH,OAC1C,kBAAC,IAAD,MACC5G,KAAKyJ,MACN,kBAAC,GAAD,CAAUnE,KAAMA,EAAM+H,SAAUA,EAAUrM,SAAUA,EAAU8N,cAAe9O,KAAK8O,cAAevB,cAAevN,KAAKuN,cAAezG,OAAQ9G,KAAK8G,OAAQuE,YAAarL,KAAKqL,YAAab,aAAcxK,KAAKuI,kBAAmB2F,SAAUlO,KAAKkO,gB,GA7IjNrM,aCgCrBgO,GA/CE,SAACpK,GAChB,OAAIA,EAAM1E,OAAS0E,EAAM1E,MAAMuB,OAAS,EAEpC,kBAAC,IAAMjC,SAAP,KACE,kBAAC,IAAD,CAAK4N,OAAK,GACPxI,EAAM1E,MAAMgD,KAAI,SAACuB,GAAD,OACf,kBAAC,IAAD,CAAKyI,MAAM,MAAMY,YAAY,KAAK3K,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KACjE,kBAAC,IAAD,CAAM/G,UAAU,sBACd,kBAAC,IAAD,CAAYA,UAAU,aACtB,yBAAKA,UAAU,wBAAuB,kBAAC,IAAD,CAAMoP,QAASxK,EAAKuI,QAAQkC,SAAU1G,KAAM,aAAe/D,EAAKuI,QAAQlJ,IAAI,yBAAKiJ,IAAKtI,EAAKuI,QAAQC,OAAQkC,OAAO,SACtJ,yBAAKtP,UAAU,uBACb,yBAAKA,UAAU,0BACb,kBAAC,IAAD,CAAMA,UAAU,aAAa2I,KAAM,aAAe/D,EAAKuI,QAAQlJ,IAAKW,EAAKuI,QAAQkC,SAASE,UAAU,EAAG,MAEzG,kBAAC,IAAD,CAAMH,QAASvQ,EAAKgB,KAAMG,UAAU,aAAa2I,KAAM,UAAY/D,EAAKX,IAAKW,EAAK7D,MAAMwO,UAAU,EAAG,IAAM,OAC7G,yBAAKvP,UAAU,sBACb,kBAAC,EAAD,CAAiB+C,MAAO6B,EAAMpD,MAAM,OAAOmJ,YAAa5F,EAAM4F,YAAaC,WAAY7F,EAAM6F,WAAYC,SAAU9F,EAAM8F,aAG7H,kBAAC,IAAD,CAAa7K,UAAU,yBACpB4E,EAAKM,QAAQqK,UAAU,EAAG,KAAO,MAClC,yBAAKvP,UAAU,sBACb,kBAAC,IAAD,CAAMA,UAAU,aAAa2I,KAAM,UAAY/D,EAAKX,IACjDpF,EAAKgB,KACN,uBAAGG,UAAU,sCAQ3B,kBAAC,IAAD,CAAKuN,OAAK,GACR,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAKvN,UAAU,gBACf,uBAAGA,UAAU,aAAaD,QAAS,kBAAMgF,EAAMyI,aAC5C3O,EAAK4O,OAGR,kBAAC,IAAD,QAKE,8BCIG+B,GAjDG,SAACzK,GACjB,OACE,kBAAC,IAAD,CAAM0K,aAAa,GACjB,kBAAC,IAAD,CAAQ1O,MAAOlC,EAAKwB,OAClB,kBAAC,IAAD,CAAMqP,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,UAEX,kBAAC,IAAD,CAAWoB,OAAO,GAChB,kBAAC,IAAD,CACEC,kBAAmB/Q,EAAKwM,OACxB5F,YAAa5G,EAAKgR,OAClB1J,SAAU,SAACR,GACTZ,EAAM8K,OAAO,CAAEC,MAAOnK,EAAEE,OAAOZ,aAKvC,kBAAC,IAAD,CAAS8K,QAAM,EAACC,QAAM,GAClB,kBAAC,IAAD,CAAMC,QAAQ,SAASC,eAAa,GAAC,uBAAGlQ,UAAU,wBAClD,kBAAC,IAAD,CAAMiQ,QAAQ,UAAS,uBAAGjQ,UAAU,wBACpC,kBAAC,IAAD,CAAMiQ,QAAQ,UAAS,uBAAGjQ,UAAU,2BAExC,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAK2I,KAAK,aAAa9C,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,cACnF,kBAAC,IAAD,CAAMG,IAAI,SAASC,OAAO,SAASC,GAAG,iBACtC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,oBAE5C,kBAAC,IAAD,CAAM2I,WAAS,GACb,kBAAC,IAAD,CAAKlM,GAAG,QAAQjE,UAAU,eAAeoQ,WAAS,GAChD,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAU/P,MAAO0E,EAAM1E,MAAOsK,YAAa5F,EAAM4F,YAAa6C,SAAUzI,EAAMyI,aAIlF,kBAAC,IAAD,CAAKvJ,GAAG,QAAQjE,UAAU,gBACxB,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAUK,MAAO0E,EAAM1E,MAAOsK,YAAa5F,EAAM4F,YAAa6C,SAAUzI,EAAMyI,aAIlF,kBAAC,IAAD,CAAKvJ,GAAG,QAAQjE,UAAU,gBACxB,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAUK,MAAO0E,EAAM1E,MAAOsK,YAAa5F,EAAM4F,YAAa6C,SAAUzI,EAAMyI,gBC9CnF,SAAS6C,KAGZ,GAFFtO,QAAQC,IAAI,yBACE7C,OAAOC,aAAaC,QAAQ,SAEtC,OAAO,EAEPC,KAAK8K,UAAUC,SAAS,W,ICCTiG,G,YACnB,aAAe,IAAD,8BACZ,+CACKxN,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKqR,SAAWA,GAASrR,KAAT,gBAChB,EAAK2L,YAAc,EAAKA,YAAY3L,KAAjB,gBACnB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6Q,OAAS,EAAKA,OAAO7Q,KAAZ,gBACd,EAAKwO,SAAW,EAAKA,SAASxO,KAAd,gBAGhB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCgB,MAAO,GACPyP,MAAO,KACP9M,KAAM,GAdI,E,kFAkBZgF,EAAWC,GAAG,WAAY3I,KAAKwD,SAC/BkF,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,WAAY5I,KAAKwD,SAC3CkF,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAI/CrF,KAAK+Q,WACL/Q,KAAKgK,a,iCAILnB,EAAkB,QAAS7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,6BAGtDiL,GAAM,IAAD,OACV7K,KAAKC,SAAS,CAAEc,MAAO,GAAI2C,KAAM,IACjC1D,KAAKC,SAAS4K,GAAK,WACjBhC,EAAkB,eAAgB,EAAKlJ,MAAM+D,KAAM,CAAEuN,EAAG,EAAKtR,MAAM6Q,a,oCAMrE,IAAIlL,EAAOoD,EAAWK,aAClBzD,GACFtF,KAAKC,SAAS,CAAEc,MAAOf,KAAKL,MAAMoB,MAAMgD,KAAI,SAAAmN,GAAE,OAAKA,EAAGvM,KAAOW,EAAKX,GAAKd,OAAOqF,OAAO,GAAIgI,EAAI5L,GAAQ4L,S,iCAK7F,IAAD,OACLlR,KAAKL,MAAM6Q,OAASxQ,KAAKL,MAAM6Q,MAAMlO,OAAS,EAChDtC,KAAKC,SAAS,CAAEyD,KAAM1D,KAAKL,MAAM+D,KAAO,IAAK,WAC3CmF,EAAkB,eAAgB,EAAKlJ,MAAM+D,KAAM,CAACuN,EAAG,EAAKtR,MAAM6Q,OAAS,EAAK7Q,MAAMC,UAGxFI,KAAKC,SAAS,CAAEyD,KAAM1D,KAAKL,MAAM+D,KAAO,IAAK,WAC3CmF,EAAkB,QAAS,EAAKlJ,MAAM+D,KAAM,GAAI,EAAK/D,MAAMC,Y,gCAM/D,IAAImB,EAAQ2H,EAAWlF,UACnBtB,EAAQwG,EAAWM,WACnBjI,EAAMuB,OAAS,GAAe,SAAVJ,GACtBlC,KAAKC,SAAS,CACZc,MAAOf,KAAKL,MAAMoB,MAAMoI,OAAOpI,O,kCAKzBqO,EAAkBC,EAAoBC,GAA6D,IAAvCC,EAAsC,uDAAxB,KAAMC,EAAkB,uDAAN,KAClGnN,EAAO,CAAE+M,iBAAkBA,EAAkBC,mBAAoBA,EAAoBC,qBAAsBA,EAAsBC,YAAaA,EAAaC,UAAWA,GAC1K3G,EAAsB,eAAgBxG,EAAMrC,KAAKL,MAAMC,S,+BAG/C,IACAmB,EAAUf,KAAKL,MAAfoB,MACR,OAAQ,kBAAC,GAAD,CAAWsK,YAAarL,KAAKqL,YAAa6C,SAAUlO,KAAKkO,SAAUnN,MAAOA,EAAOwP,OAAQvQ,KAAKuQ,a,GAlFxEjG,IAAMzI,WCUzBsP,GAhBQ,SAAC1L,GACtB,IAAIC,EAAU,CAAC,4BAAQC,MAAM,MAC7B,GAAGF,EAAMG,QAEP,IAAK,IAAIzD,EAAI,EAAGA,EAAIsD,EAAMG,QAAQtD,OAAQH,IACxCuD,EAAQnD,KACN,4BAAQoD,MAAOF,EAAMG,QAAQzD,GAAGwC,IAC7Bc,EAAMG,QAAQzD,GAAGV,QAM1B,OAAOiE,G,oBC4DM0L,GAjEE,SAAC3L,GAChB,GAAIA,EAAMH,KAAM,CACd,IAAItE,EAAW,KAiBf,OAhBIyE,EAAMzE,WACRA,EACE,kBAAC,IAAD,CACES,MAAOlC,EAAKgN,QACZ9F,aAAW,EACXC,kBAAmB,CAAEC,iBAAkBpH,EAAKqH,KAAMyK,WAAW,EAAMC,qBAAsB/R,EAAKgR,SAE9F,4BAAQ/J,KAAK,UACXkB,aAAcjC,EAAMsJ,UACpBlI,SAAU,SAACR,GACTZ,EAAM+E,aAAa,CAAEuE,UAAW1I,EAAEE,OAAOZ,UAE3C,kBAAC,GAAD,CAAgBC,QAASH,EAAMzE,cAKrC,kBAAC,IAAMX,SAAP,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAad,EAAKgS,UAClB,kBAAC,IAAD,CAAMvK,MAAI,GACPhG,EACD,kBAAC,IAAD,CACEkF,MAAO3G,EAAKkC,MAAQ,IACpBmB,KAAK,OACLuD,YAAY,MACZ6G,UAAU,KACVrH,MAAOF,EAAMH,KAAK7D,MAClB2E,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE/I,MAAO4E,EAAEE,OAAOZ,WAGzC,kBAAC,SAAD,CACE6I,YAAa/I,EAAM+I,YACnBrI,YAAa5G,EAAKqG,QAClB4L,aAAc,CACZhE,OAAQ,KACRiE,aAAcC,MAEhB9C,QAAS,CACPlJ,QAAS,CAAC,SAAU,OAAQ,OAAQ,SACpCiM,OAAQ,CAAEjM,QAAS,CAAC,OAAQ,SAAU,cACtCkM,MAAO,CACLC,eAAgBpM,EAAMqM,oBACtBC,cAAc,IAGlBC,oBAAqBvM,EAAMuM,uBAG/B,kBAAC,IAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAQtR,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,WAOlE,OAAQ,MCxEL,SAASgL,GAAoBlN,GAClC,OAAO,IAAIqN,SACT,SAACC,EAASC,GACR,IAAMC,EAAM,IAAIC,eAChBD,EAAIE,KAAK,OAAQ,oCACjBF,EAAIG,iBAAiB,gBAAiB,6BACtC,IAAMlQ,EAAO,IAAI0C,SACjB1C,EAAK2C,OAAO,gBAAiBJ,GAC7BwN,EAAII,KAAKnQ,GACT+P,EAAIK,iBAAiB,QAAQ,WAC3B,IAAMnO,EAAW+D,KAAKqK,MAAMN,EAAIO,cAChCT,EAAQ5N,MAEV8N,EAAIK,iBAAiB,SAAS,WAC5B,IAAMhO,EAAQ4D,KAAKqK,MAAMN,EAAIO,cAC7BR,EAAO1N,S,ICSMmO,G,YACnB,aAAe,IAAD,8BACZ,+CACK9L,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKsS,oBAAsB,EAAKA,oBAAoBtS,KAAzB,gBAC3B,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKoS,oBAAsBA,GAAoBpS,KAApB,gBAG3B,EAAKC,MAAQ,CACX2F,KAAM,GACNtE,SAAU,KACVwN,YAAaC,cAAYoE,cACzBjT,MAAOC,OAAOC,aAAaC,QAAQ,SACnC0B,MAAO,KACPsN,UAAW,KACX1D,YAAa,KACb3H,KAAM,GAlBI,E,kFAwBZgF,EAAWC,GAAG,eAAgB3I,KAAKqF,aACnCqD,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,eAAgB5I,KAAKqF,aAC/CqD,EAAWE,eAAe,WAAY5I,KAAKwD,W,+BAM3C,IACMmC,EADSmN,uBAAa9S,KAAKL,MAAM6O,YAAYuE,qBAAqBC,OACnDjP,KAAI,SAAAkP,GAAK,OAAMA,EAAMnJ,KAAKoJ,OAAmBD,EAAMnJ,KAAf,QAAqB7F,KAAK,MAC/E5B,EAAO,CAAEZ,MAAOzB,KAAKL,MAAM8B,MAAOmE,QAASD,EAAO+J,WAAY1P,KAAKL,MAAMoP,UAAWV,MAAOyE,uBAAa9S,KAAKL,MAAM6O,YAAYuE,sBACnI,GAAI/S,KAAKL,MAAM8B,MACboH,EAAsB,QAASxG,EAAMrC,KAAKL,MAAMC,WAC3C,CACQI,KACR2P,IAAIT,OAAOC,MAAM5P,EAAK4T,gBAAiB5T,EAAK4P,U,0CAIjCX,GAClBxO,KAAKC,SAAS,CACZuO,kB,wCAKc3D,GAChB7K,KAAKC,SAAS4K,K,0CAKd7K,KAAKgK,a,iCAILnB,EAAkB,cAAe7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,yCAGhDwT,EAAMC,M,gCAIvB,IAAIrS,EAAW0H,EAAWlF,UACtBtB,EAAQwG,EAAWM,WACnBhI,GAAsB,YAAVkB,GACdlC,KAAKC,SAAS,CACZe,SAAUA,M,oCAOdhB,KAAK8K,UAAUC,SAAS,a,+BAOhB,IAAD,EACiC/K,KAAKL,MAArC2F,EADD,EACCA,KAAMkJ,EADP,EACOA,YAAaxN,EADpB,EACoBA,SAC3B,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQS,MAAOlC,EAAK+T,YACpB,kBAAC,GAAD,CAAUhO,KAAMA,EAAMtE,SAAUA,EAAUwN,YAAaA,EAAawD,oBAAqBhS,KAAKgS,oBAAqBlL,OAAQ9G,KAAK8G,OAAQ0D,aAAcxK,KAAKuI,kBAAmBuJ,oBAAqB9R,KAAK8R,2B,GA/FxKjQ,aCAnB0R,G,YACnB,aAAe,IAAD,8BACZ,+CACKzM,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAKyF,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKsS,oBAAsB,EAAKA,oBAAoBtS,KAAzB,gBAC3B,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKoS,oBAAsBA,GAAoBpS,KAApB,gBAG3B,EAAKC,MAAQ,CACX2F,KAAM,CAAC7D,MAAO,GAAI4M,MAAO,IACzBG,YAAaC,cAAYoE,cACzBjT,MAAOC,OAAOC,aAAaC,QAAQ,SACnC4E,GAAI,KACJlD,MAAO,KACP4M,MAAO,KACP3K,KAAM,GAlBI,E,kFAuBZgF,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKqF,aACnCqD,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKqF,aAC/CqD,EAAWE,eAAe,WAAY5I,KAAKwD,W,+BAK3CqF,EAAyB,QADd,CAAClE,GAAI3E,KAAKL,MAAMgF,GAAIlD,MAAOzB,KAAKL,MAAM8B,MAAO4M,MAAMyE,uBAAa9S,KAAKL,MAAM6O,YAAYuE,sBAC1D/S,KAAKL,MAAMC,S,0CAInDI,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QAChEtJ,KAAK8I,SAASnF,OAAd,QACFkF,EAAsB,QAAS7I,KAAK8I,SAASnF,OAAd,OAAgC3D,KAAKL,MAAMC,S,uEAS5E,IAAI0F,EAAOoD,EAAWK,aAEtB,GAAIzD,EAAK,CACP,IAAMgJ,EAAeC,yBAAejJ,EAAK+I,OACnCG,EAAcC,cAAYC,kBAAkBJ,GAClDtO,KAAKC,SAAS,CACZqF,KAAMA,EACN7D,MAAO6D,EAAK7D,MACZkD,GAAIW,EAAKX,GACT6J,YAAaA,IAGjB/L,QAAQC,IAAI4C,K,wCAGIuF,GAChB7K,KAAKC,SAAS4K,K,0CAGI2D,GAChBxO,KAAKC,SAAS,CACduO,kB,oCAOFxO,KAAK8K,UAAUC,SAAS,a,+BAIhB,IAAD,EACsB/K,KAAKL,MAA1B2F,EADD,EACCA,KAAMkJ,EADP,EACOA,YACd,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ/M,MAAM,OAAO+H,SAAUjK,EAAKqH,OACpC,kBAAC,IAAD,KAAarH,EAAKiU,eAClB,kBAAC,GAAD,CAAUlO,KAAMA,EAAOkJ,YAAaA,EAAawD,oBAAqBhS,KAAKgS,oBAAqBlL,OAAQ9G,KAAK8G,OAAS0D,aAAcxK,KAAKuI,kBAAmBuJ,oBAAqB9R,KAAK8R,2B,GA/FtJjQ,aCYzB4R,GA9BU,SAAChO,GACxB,GAAIA,EAAMvE,eAAiBuE,EAAMvE,cAAcoB,OAAS,EAAG,CAAC,IAKjDoR,EAAT,SAAoBC,GAClB,IAAKA,EAAaC,KAChB,MAAO,aAGX,OACE,kBAAC,IAAD,CAAMjK,WAAS,GACZlE,EAAMvE,cAAc6C,KAAI,SAAC4P,GAAD,OACvB,kBAAC,IAAD,CACEjT,UAAWgT,EAAWC,GACtB3P,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,IACjC7G,KAAM,IAAM+S,EAAaE,YAAa,IAAKF,EAAaG,UACxDrS,MAAOkS,EAAa/N,QACpBiE,UAjBagE,EAiBS8F,EAAa9F,QAhBlC,kBAAC,IAAD,CAAMxE,KAAK,cAAcwE,EAAQkC,YAkBpC,yBAAKxG,KAAK,QAAQqE,IAAK+F,EAAa9F,QAAQC,OAAQC,MAAM,QAnBhE,IAAqBF,MAyBrB,OAAQ,8BCdGkG,GAdW,SAACtO,GACzB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAK2B,eAClB,kBAAC,IAAD,CAAMkP,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,WAIb,kBAAC,GAAD,CAAkB/N,cAAeuE,EAAMvE,cAAegN,SAAUzI,EAAMyI,aCNvD8F,G,YACnB,aAAe,IAAD,8BACZ,+CACKxQ,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKqR,SAAWA,GAASrR,KAAT,gBAChB,EAAK2L,YAAc,EAAKA,YAAY3L,KAAjB,gBACnB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6Q,OAAS,EAAKA,OAAO7Q,KAAZ,gBACd,EAAKwO,SAAW,EAAKA,SAASxO,KAAd,gBAGhB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCmB,cAAe,GACfsP,MAAO,KACP9M,KAAM,GAdI,E,kFAkBZgF,EAAWC,GAAG,WAAY3I,KAAKwD,SAC/BkF,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,WAAY5I,KAAKwD,SAC3CkF,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAK/CrF,KAAK+Q,WACL/Q,KAAKgK,a,iCAILnB,EAAkB,gBAAiB7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,6BAG9DiL,GAAM,IAAD,OACV7K,KAAKC,SAAS,CAAEiB,cAAe,GAAIwC,KAAM,IACzC1D,KAAKC,SAAS4K,GAAK,WACjBhC,EAAkB,uBAAwB,EAAKlJ,MAAM+D,KAAM,CAAEuN,EAAG,EAAKtR,MAAM6Q,a,iCAKnE,IAAD,OACLxQ,KAAKL,MAAM6Q,OAASxQ,KAAKL,MAAM6Q,MAAMlO,OAAS,EAChDtC,KAAKC,SAAS,CAAEyD,KAAM1D,KAAKL,MAAM+D,KAAO,IAAK,WAC3CmF,EAAkB,uBAAwB,EAAKlJ,MAAM+D,KAAM,CAACuN,EAAG,EAAKtR,MAAM6Q,OAAS,EAAK7Q,MAAMC,UAGhGI,KAAKC,SAAS,CAAEyD,KAAM1D,KAAKL,MAAM+D,KAAO,IAAK,WAC3CmF,EAAkB,gBAAiB,EAAKlJ,MAAM+D,KAAM,GAAI,EAAK/D,MAAMC,Y,oCAQvE,IAAI+T,EAAejL,EAAWK,aAC1B4K,GACF3T,KAAKC,SAAS,CAAEiB,cAAelB,KAAKL,MAAMuB,cAAc6C,KAAI,SAAAmN,GAAE,OAAKA,EAAGvM,KAAOgP,EAAahP,GAAKd,OAAOqF,OAAO,GAAIgI,EAAIyC,GAAgBzC,S,gCAKvI,IAAIhQ,EAAgBwH,EAAWlF,UAC3BtB,EAAQwG,EAAWM,WACnB9H,EAAcoB,OAAS,GAAe,iBAAVJ,GAC9BlC,KAAKC,SAAS,CACZiB,cAAelB,KAAKL,MAAMuB,cAAciI,OAAOjI,KAInD2H,EAAsB,gBADX,GACkC7I,KAAKL,MAAMC,S,kCAG9CwP,EAAkBC,EAAoBC,GAA6D,IAAvCC,EAAsC,uDAAxB,KAAMC,EAAkB,uDAAN,KAClGnN,EAAO,CAAE+M,iBAAkBA,EAAkBC,mBAAoBA,EAAoBC,qBAAsBA,EAAsBC,YAAaA,EAAaC,UAAWA,GAC1K3G,EAAsB,eAAgBxG,EAAMrC,KAAKL,MAAMC,S,+BAG/C,IACAsB,EAAkBlB,KAAKL,MAAvBuB,cACR,OAAQ,kBAAC,GAAD,CAAmBmK,YAAarL,KAAKqL,YAAa6C,SAAUlO,KAAKkO,SAAUhN,cAAeA,EAAeqP,OAAQvQ,KAAKuQ,a,GAtFxFjG,IAAMzI,WCsCjCoS,GAvCK,SAACxO,GACnB,OAAIA,EAAM8G,SACR9J,QAAQC,IAAI+C,EAAM8G,QAAQxL,OAExB,kBAAC,IAAMV,SAAP,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAK4N,OAAK,GACR,kBAAC,IAAD,CAAKF,MAAM,OAEX,kBAAC,IAAD,CAAKA,MAAM,MACT,kBAAC,IAAD,KAAQ,kBAAC,EAAD,CAAiBtK,MAAOgC,EAAM8G,QAASrK,MAAM,UAAUmJ,YAAa5F,EAAM4F,YAAaC,WAAW,UAAUC,SAAU9F,EAAM8G,QAAQ5H,SAIlJ,kBAAC,IAAD,CAAKsJ,OAAK,GACR,kBAAC,IAAD,CAAKF,MAAM,MAAMY,YAAY,MAC3B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAYjO,UAAU,SAAS+E,EAAM8G,QAAQ9K,OAC7C,kBAAC,IAAD,CAAaf,UAAU,yBAAyB+E,EAAM8G,QAAQ3G,WAGlE,kBAAC,IAAD,CAAKmI,MAAM,MAAMY,YAAY,MAC3B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAYjO,UAAU,SAASnB,EAAK2U,QACpC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMpE,QAASrK,EAAM8G,QAAQsB,QAAQkC,SAAU1G,KAAM,aAAe5D,EAAM8G,QAAQsB,QAAQlJ,IAAI,yBAAKjE,UAAU,wBAAuB,yBAAKkN,IAAKnI,EAAM8G,QAAQsB,QAAQC,OAAQC,MAAM,KAAKiC,OAAO,aAMtM,kBAAC,IAAD,KAAazQ,EAAK4U,cAClB,kBAAC,GAAD,CAAUpT,MAAO0E,EAAM8G,QAAQxL,MAAOsK,YAAa5F,EAAM4F,YAAaC,WAAW,UAAUC,SAAU9F,EAAM8G,QAAQ5H,OAI/G,MC/BS6D,G,YACnB,aAAe,IAAD,8BACZ,+CACKrD,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK2L,YAAc,EAAKA,YAAY3L,KAAjB,gBACnB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBAGnB,EAAKC,MAAQ,CACX4M,QAAS,KACTJ,aAAa,EACbvM,MAAOC,OAAOC,aAAaC,QAAQ,UAVzB,E,kFAgBZ2I,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAI/CwD,EAAsB,WAAY7I,KAAK8I,SAASnF,OAAd,UAAmC3D,KAAKL,MAAMC,S,oCAIhF,IAAI2M,EAAU7D,EAAWK,aACrB7G,EAAQwG,EAAWM,WACnBuD,GAAqB,YAAVrK,GACblC,KAAKC,SAAS,CACZsM,QAASA,IAGb9J,QAAQC,IAAI,UAAW6J,K,oCAIvB,IAAIA,EAAU7D,EAAWK,aACrB7G,EAAQwG,EAAWM,WACpBuD,GAAqB,YAAVrK,GACZlC,KAAKC,SAAS,CACZsM,QAASA,IAGb9J,QAAQC,IAAI6J,K,4BAKZ,GAAIvM,KAAKL,MAAM4M,QACb,OACE,kBAAC,IAAD,CAAKlD,KAAM,aAAarJ,KAAKL,MAAM4M,QAAQ5H,GAAG,QAAS4B,OAAO,aAAc+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,QACpH,kBAAC,IAAD,CAAMG,IAAI,UAAUC,OAAO,UAAUC,GAAG,kBACxC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,sB,kCAMtCkH,EAAkBC,EAAoBC,GAAwD,IAAlCC,EAAiC,uDAArB,KAAMC,EAAe,uDAAL,KAC9FnN,EAAO,CAAC+M,iBAAkBA,EAAkBC,mBAAoBA,EAAoBC,qBAAsBA,EAAsBC,YAAaA,EAAaC,UAAWA,GACzK3G,EAAsB,eAAgBxG,EAAMrC,KAAKL,MAAMC,S,+BAG/C,IAAD,EACwBI,KAAKL,MAA7B4M,EADA,EACAA,QAASJ,EADT,EACSA,YAChB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ1K,MAAOlC,EAAKyB,SAAUwI,SAAUjK,EAAKqH,MAC7C,kBAAC,IAAD,CAAMwJ,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,WAIVjP,KAAKyJ,MACN,kBAAC,GAAD,CAAa8C,QAASA,EAASJ,YAAaA,EAAad,YAAarL,KAAKqL,mB,GAhF/CxJ,aCoCrBuS,GA1CK,SAAC3O,GACnB,OAAIA,EAAMzE,UAAYyE,EAAMzE,SAASsB,OAAS,EAE1C,kBAAC,IAAMjC,SAAP,KACA,kBAAC,IAAD,CAAK4N,OAAK,GACPxI,EAAMzE,SAAS+C,KAAI,SAACwI,GAAD,OAClB,kBAAC,IAAD,CAAKwB,MAAM,MAAMY,YAAY,KAAK3K,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KACjE,kBAAC,IAAD,CAAM/G,UAAU,sBACd,kBAAC,IAAD,CAAYA,UAAU,aACpB,yBAAKA,UAAU,wBAAuB,yBAAKkN,IAAKrB,EAAQuB,OAAQC,MAAM,KAAKiC,OAAO,QAClF,yBAAKtP,UAAU,wBAAuB,kBAAC,IAAD,CAAMA,UAAU,aAAa2I,KAAM,aAAekD,EAAQ5H,IAAK4H,EAAQ9K,MAAMwO,UAAU,EAAG,MAChI,yBAAKvP,UAAU,sBAAqB,kBAAC,EAAD,CAAiB+C,MAAO8I,EAASrK,MAAM,UAAUmJ,YAAa5F,EAAM4F,YAAaC,WAAW,UAAUC,SAAUgB,EAAQ5H,OAE9J,kBAAC,IAAD,CAAajE,UAAU,mBACnB,0BAAMA,UAAU,SAAS6L,EAAQ3G,QAAQqK,UAAU,EAAG,KAAO,OAC7D,yBAAKvP,UAAU,sBACb,kBAAC,IAAD,CAAMA,UAAU,aAAa2I,KAAM,aAAekD,EAAQ5H,IACvDpF,EAAKgB,KACN,uBAAGG,UAAU,sCAQ7B,kBAAC,IAAD,CAAKuN,OAAK,GACR,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAKvN,UAAU,gBACb,uBAAGA,UAAU,aAAaD,QAAS,kBAAMgF,EAAMyI,aAC5C3O,EAAK4O,OAGV,kBAAC,IAAD,QAMI,8BCSGkG,GAjDM,SAAC5O,GACpB,OACE,kBAAC,IAAD,CAAM0K,aAAa,GACjB,kBAAC,IAAD,CAAQ1O,MAAOlC,EAAKyB,UAClB,kBAAC,IAAD,CAAMoP,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,UAEX,kBAAC,IAAD,CAAWoB,OAAO,GAChB,kBAAC,IAAD,CACEC,kBAAmB/Q,EAAKwM,OACxB5F,YAAa5G,EAAKgR,OAClB1J,SAAU,SAACR,GACTZ,EAAM8K,OAAO,CAAEC,MAAOnK,EAAEE,OAAOZ,aAKvC,kBAAC,IAAD,CAAS8K,QAAM,EAACC,QAAM,GACpB,kBAAC,IAAD,CAAMC,QAAQ,SAASC,eAAa,GAAC,uBAAGlQ,UAAU,wBAClD,kBAAC,IAAD,CAAMiQ,QAAQ,UAAS,uBAAGjQ,UAAU,wBACpC,kBAAC,IAAD,CAAMiQ,QAAQ,UAAS,uBAAGjQ,UAAU,2BAEtC,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAK2I,KAAK,gBAAgB9C,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,cACtF,kBAAC,IAAD,CAAMG,IAAI,SAASC,OAAO,SAASC,GAAG,iBACtC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,oBAE5C,kBAAC,IAAD,CAAM2I,WAAS,GACb,kBAAC,IAAD,CAAKlM,GAAG,QAAQjE,UAAU,eAAeoQ,WAAS,GAChD,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAa9P,SAAUyE,EAAMzE,SAAUqK,YAAa5F,EAAM4F,YAAa6C,SAAUzI,EAAMyI,aAI3F,kBAAC,IAAD,CAAKvJ,GAAG,QAAQjE,UAAU,gBACxB,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAaM,SAAUyE,EAAMzE,SAAUqK,YAAa5F,EAAM4F,YAAa6C,SAAUzI,EAAMyI,aAI3F,kBAAC,IAAD,CAAKvJ,GAAG,QAAQjE,UAAU,gBACxB,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAaM,SAAUyE,EAAMzE,SAAUqK,YAAa5F,EAAM4F,YAAa6C,SAAUzI,EAAMyI,gBCrC9EoG,G,YACnB,aAAe,IAAD,8BACZ,+CACK9Q,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKqR,SAAWA,GAASrR,KAAT,gBAChB,EAAK2L,YAAc,EAAKA,YAAY3L,KAAjB,gBACnB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6Q,OAAS,EAAKA,OAAO7Q,KAAZ,gBACd,EAAKwO,SAAW,EAAKA,SAASxO,KAAd,gBAEhB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCiB,SAAU,GACVwP,MAAO,KACP9M,KAAM,GAbI,E,kFAiBZgF,EAAWC,GAAG,WAAY3I,KAAKwD,SAC/BkF,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,WAAY5I,KAAKwD,SAC3CkF,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAI/CrF,KAAK+Q,WACL/Q,KAAKgK,a,iCAILnB,EAAkB,WAAY7I,KAAKL,MAAM+D,KAAM,GAAK1D,KAAKL,MAAMC,S,6BAG1DiL,GAAM,IAAD,OACV7K,KAAKC,SAAS,CAAEe,SAAU,GAAI0C,KAAM,IACpC1D,KAAKC,SAAS4K,GAAK,WACjBhC,EAAkB,kBAAmB,EAAKlJ,MAAM+D,KAAM,CAAEuN,EAAG,EAAKtR,MAAM6Q,a,oCAMxE,IAAIjE,EAAU7D,EAAWK,aACrB7G,EAAQwG,EAAWM,WACpBuD,GAAqB,YAAVrK,GACZlC,KAAKC,SAAS,CAACe,SAAUhB,KAAKL,MAAMqB,SAAS+C,KAAI,SAAAmN,GAAE,OAAKA,EAAGvM,KAAO4H,EAAQ5H,GAAKd,OAAOqF,OAAO,GAAIgI,EAAI3E,GAAW2E,S,iCAMxG,IAAD,OACLlR,KAAKL,MAAM6Q,OAASxQ,KAAKL,MAAM6Q,MAAMlO,OAAS,EAChDtC,KAAKC,SAAS,CAAEyD,KAAM1D,KAAKL,MAAM+D,KAAO,IAAK,WAC3CmF,EAAkB,kBAAmB,EAAKlJ,MAAM+D,KAAM,CAACuN,EAAG,EAAKtR,MAAM6Q,OAAS,EAAK7Q,MAAMC,UAG3FI,KAAKC,SAAS,CAAEyD,KAAM1D,KAAKL,MAAM+D,KAAO,IAAK,WAC3CmF,EAAkB,WAAY,EAAKlJ,MAAM+D,KAAM,GAAI,EAAK/D,MAAMC,Y,gCAOlE,IAAIoB,EAAW0H,EAAWlF,UACtBtB,EAAQwG,EAAWM,WACnBhI,EAASsB,OAAS,GAAe,YAAVJ,GACzBlC,KAAKC,SAAS,CACZe,SAAUhB,KAAKL,MAAMqB,SAASmI,OAAOnI,O,kCAK/BoO,EAAkBC,EAAoBC,GAAwD,IAAlCC,EAAiC,uDAArB,KAAMC,EAAe,uDAAL,KAC9FnN,EAAO,CAAC+M,iBAAkBA,EAAkBC,mBAAoBA,EAAoBC,qBAAsBA,EAAsBC,YAAaA,EAAaC,UAAWA,GACzK3G,EAAsB,eAAgBxG,EAAMrC,KAAKL,MAAMC,S,+BAG/C,IACDoB,EAAYhB,KAAKL,MAAjBqB,SACP,OAAO,kBAAC,GAAD,CAAcqK,YAAarL,KAAKqL,YAAakF,OAAQvQ,KAAKuQ,OAAQrC,SAAUlO,KAAKkO,SAAUlN,SAAUA,Q,GApF3EsJ,IAAMzI,WC8B1B0S,GAnCG,SAAC9O,GACnB,OAAIA,EAAM8G,QAEN,kBAAC,IAAMlM,SAAP,KACE,kBAAC,IAAD,CAAM2G,MAAI,GACR,kBAAC,IAAD,CACEd,MAAO3G,EAAKkC,MACZmB,KAAK,OACLuD,YAAY,MACZR,MAAOF,EAAMhE,MACb2E,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE/I,MAAO4E,EAAEE,OAAOZ,WAGzC,kBAAC,IAAD,CACEO,MAAO3G,EAAKiV,SACZ5R,KAAK,WACLuD,YAAY,MACZR,MAAOF,EAAMG,QACbqH,WAAS,EACT7G,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE5E,QAASS,EAAEE,OAAOZ,YAI7C,kBAAC,IAAD,CAAO8G,QAAM,EAAC/L,UAAU,WACtB,kBAAC,IAAD,CAAKgM,IAAI,KACP,kBAAC,IAAD,CAAQhM,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,WAKxD,MCrCP,SAASgL,GAAoBlN,GAClC,OAAO,IAAIqN,SACT,SAACC,EAASC,GACR,IAAMC,EAAM,IAAIC,eAChBD,EAAIE,KAAK,OAAQ,oCACjBF,EAAIG,iBAAiB,gBAAiB,6BACtC,IAAMlQ,EAAO,IAAI0C,SACjB1C,EAAK2C,OAAO,gBAAiBJ,GAC7BwN,EAAII,KAAKnQ,GACT+P,EAAIK,iBAAiB,QAAQ,WAC3B,IAAMnO,EAAW+D,KAAKqK,MAAMN,EAAIO,cAChCT,EAAQ5N,MAEV8N,EAAIK,iBAAiB,SAAS,WAC5B,IAAMhO,EAAQ4D,KAAKqK,MAAMN,EAAIO,cAC7BR,EAAO1N,S,ICSMgQ,G,YACnB,aAAe,IAAD,8BACZ,+CACK3N,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKsS,oBAAsB,EAAKA,oBAAoBtS,KAAzB,gBAC3B,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKoS,oBAAsBA,GAAoBpS,KAApB,gBAG3B,EAAKC,MAAQ,CACX4M,QAAS,GACTiC,YAAaC,cAAYoE,cACzBjT,MAAOC,OAAOC,aAAaC,QAAQ,SACnC0B,MAAO,KACPmE,QAAS,KACTyF,YAAa,KACb3H,KAAM,GAjBI,E,kFAuBZgF,EAAWC,GAAG,eAAgB3I,KAAKqF,aACnCqD,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,eAAgB5I,KAAKqF,aAC/CqD,EAAWE,eAAe,WAAY5I,KAAKwD,W,+BAO3CqF,EAAsB,WADX,CAACpH,MAAOzB,KAAKL,MAAM8B,MAAOmE,QAAS5F,KAAKL,MAAMiG,SACjB5F,KAAKL,MAAMC,S,0CAGjC4O,GAClBxO,KAAKC,SAAS,CACZuO,kB,wCAKc3D,GAChB7K,KAAKC,SAAS4K,K,0CAKd7K,KAAKgK,a,2GAYLhK,KAAK8K,UAAUC,SAAS,gB,+BAOhB,IAAD,EACwB/K,KAAKL,MAA7B4M,EADA,EACAA,QAASiC,EADT,EACSA,YAChB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ/M,MAAOlC,EAAKmV,aAAclL,SAAUjK,EAAKqH,OACjD,kBAAC,IAAD,KAAarH,EAAKmV,cAClB,kBAAC,GAAD,CAAanI,QAASA,EAAUiC,YAAaA,EAAawD,oBAAqBhS,KAAKgS,oBAAqBlL,OAAQ9G,KAAK8G,OAAS0D,aAAcxK,KAAKuI,kBAAmBuJ,oBAAqB9R,KAAK8R,2B,GA9E5JjQ,aCFtB8S,G,YACnB,aAAe,IAAD,8BACZ,+CACK7N,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAKyF,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKsS,oBAAsB,EAAKA,oBAAoBtS,KAAzB,gBAC3B,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBAEf,EAAKC,MAAQ,CACX4M,QAAS,CAAC9K,MAAO,GAAI4M,MAAO,IAC5BzO,MAAOC,OAAOC,aAAaC,QAAQ,SACnC4E,GAAI,KACJlD,MAAO,KACPmE,QAAS,KACTlC,KAAM,GAfI,E,kFAoBZgF,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKqF,aACnCqD,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKqF,aAC/CqD,EAAWE,eAAe,WAAY5I,KAAKwD,W,+BAK3CqF,EAAyB,WADd,CAAClE,GAAI3E,KAAKL,MAAMgF,GAAIlD,MAAOzB,KAAKL,MAAM8B,MAAOmE,QAAS5F,KAAKL,MAAMiG,SACjC5F,KAAKL,MAAMC,S,0CAItDI,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QAChEtJ,KAAK8I,SAASnF,OAAd,WACFkF,EAAsB,WAAY7I,KAAK8I,SAASnF,OAAd,UAAmC3D,KAAKL,MAAMC,S,uEASlF,IAAI2M,EAAU7D,EAAWK,aACrB7G,EAAQwG,EAAWM,WACnBuD,GAAqB,YAAVrK,GACblC,KAAKC,SAAS,CACZsM,QAASA,EACT9K,MAAO8K,EAAQ9K,MACfkD,GAAI4H,EAAQ5H,GACZiB,QAAS2G,EAAQ3G,Y,wCAKLiF,GAChB7K,KAAKC,SAAS4K,K,0CAGI2D,GAChBxO,KAAKC,SAAS,CACduO,kB,oCAOFxO,KAAK8K,UAAUC,SAAS,gB,+BAIhB,IAAD,EAC4B/K,KAAKL,MAAhC4M,EADD,EACCA,QAAS9K,EADV,EACUA,MAAOmE,EADjB,EACiBA,QACxB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQnE,MAAOlC,EAAKyH,KAAMwC,SAAUjK,EAAKqH,OACzC,kBAAC,IAAD,KAAarH,EAAKmV,cAClB,kBAAC,GAAD,CAAanI,QAASA,EAAS9K,MAAOA,EAAOmE,QAASA,EAAUoM,oBAAqBhS,KAAKgS,oBAAqBlL,OAAQ9G,KAAK8G,OAAS0D,aAAcxK,KAAKuI,yB,GAzFrH1G,aCH5B+S,GAfK,SAACnP,GACnB,IAAIC,EAAU,CAAC,4BAAQC,MAAM,MAC7B,GAAGF,EAAMoP,MACP,IAAK,IAAI1S,EAAI,EAAGA,EAAIsD,EAAMoP,MAAMvS,OAAQH,IACtCuD,EAAQnD,KACN,4BAAQoD,MAAOF,EAAMoP,MAAM1S,GAAGwC,IAC3Bc,EAAMoP,MAAM1S,GAAG2S,QAMxB,OAAOpP,GCYQqP,GAvBM,SAACtP,GACpB,OACE,kBAAC,IAAMpF,SAAP,KACE,kBAAC,IAAD,KAAad,EAAKyV,iBAClB,kBAAC,IAAD,CAAMhO,MAAI,EAACgH,OAAK,GACd,kBAAC,IAAD,CACEvM,MAAOlC,EAAKuV,MACZrO,aAAW,GAEX,4BAAQD,KAAK,UACXK,SAAU,SAACR,GAASZ,EAAM+E,aAAa,CAAEyK,QAAS5O,EAAEE,OAAOZ,UAC3D,kBAAC,GAAD,CAAakP,MAAOpP,EAAMoP,WAIlC,kBAAC,IAAD,CAAOpI,QAAM,EAACuB,OAAK,GACjB,kBAAC,IAAD,CAAKtB,IAAI,KACP,kBAAC,IAAD,CAAQhM,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,YCuBrDoO,GAxCE,SAACzP,GACd,IAAI0B,EAAO,GACb,GAAG1B,EAAMoP,MAAM,CAGb,IAHc,IAAD,WAGJ1S,GACI,GACTgF,EAAK5E,KAAK,wBAAIyB,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAC/C,wBAAIzD,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAAMhC,EAAMoP,MAAM1S,GAAGwC,IAC1D,wBAAIX,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAAMhC,EAAMoP,MAAM1S,GAAG2S,OAC1D,wBAAIpU,UAAU,gBAAgBsD,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAC3D,kBAAC,IAAD,CAAQI,MAAM,OAAOpH,QAAS,kBAAMgF,EAAM0P,WAAW1P,EAAMoP,MAAM1S,GAAGwC,MAClE,kBAAC,IAAD,CAAMqD,IAAI,WAAWC,OAAO,WAAWC,GAAG,wBAP3C/F,EAAI,EAAGA,EAAIsD,EAAMoP,MAAMvS,OAAQH,IAAK,GAApCA,GAaX,OACE,yBAAKzB,UAAU,mBACb,+BACE,+BACE,4BACE,kCACA,uCAIJ,+BACGyG,KAQT,OAAO,MCFMiO,GAlCW,SAAC3P,GACvB,OACI,kBAAC,IAAMpF,SAAP,KACI,kBAAC,IAAD,KAAad,EAAK8V,qBAClB,kBAAC,IAAD,CAAMrO,MAAI,EAACgH,OAAK,GACZ,kBAAC,IAAD,CACI9H,MAAO3G,EAAK+V,KACZ1S,KAAK,OACLuD,YAAY,MACZC,QAAS,SAACC,GACNZ,EAAM+E,aAAa,CAAE+K,aAAclP,EAAEE,OAAOZ,WAGpD,kBAAC,IAAD,CACIO,MAAO3G,EAAKoG,MACZ/C,KAAK,SACL8E,cAAc,EACdvB,YAAY,mBACZU,SAAU,SAACR,GACPZ,EAAM+E,aAAa,CAAEgL,aAAcnP,EAAEE,OAAOZ,UAGhD,4BAAQA,OAAO,GAAOpG,EAAKkW,MAC3B,4BAAQ9P,OAAO,GAAQpG,EAAKmW,SAGpC,kBAAC,IAAD,CAAOjJ,QAAM,EAACuB,OAAK,GACf,kBAAC,IAAD,CAAKtB,IAAI,KACL,kBAAC,IAAD,CAAQhM,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMkQ,YAAapW,EAAKuH,YCcnE8O,GA3CK,SAACnQ,GACjB,IAAI0B,EAAO,GACX,GAAI1B,EAAMoQ,QAAS,CAGf,IAHgB,IAAD,WAGN1T,GACI,GACTgF,EAAK5E,KAAK,wBAAIyB,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAC3C,wBAAIzD,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAAMhC,EAAMoQ,QAAQ1T,GAAGV,OAC5D,wBAAIuC,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAAMlI,EAAKkG,EAAMoQ,QAAQ1T,GAAGwD,QACjE,wBAAIjF,UAAU,gBAAgBsD,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,KAC3D,kBAAC,IAAD,CAAQI,MAAM,OAAOpH,QAAS,kBAAMgF,EAAMqQ,cAAcrQ,EAAMoQ,QAAQ1T,GAAGV,SACrE,kBAAC,IAAD,CAAMuG,IAAI,WAAWC,OAAO,WAAWC,GAAG,wBAPjD/F,EAAI,EAAGA,EAAIsD,EAAMoQ,QAAQvT,OAAQH,IAAK,GAAtCA,GAaT,OACI,kBAAC,IAAM9B,SAAP,KACA,kBAAC,IAAD,KAAad,EAAKwW,qBAClB,yBAAKrV,UAAU,mBACX,+BACI,+BACI,4BACI,4BAAKnB,EAAKkC,OACV,4BAAKlC,EAAKoG,SAIlB,+BACKwB,MASjB,OAAQ,MCbD6O,GAvBE,SAACvQ,GAChB,OAAIA,EAAMwQ,KAEN,kBAAC,IAAM5V,SAAP,KACE,kBAAC,IAAD,KAAad,EAAKkC,OAClB,kBAAC,IAAD,CAAM2G,eAAA,GACJ,kBAAC,IAAD,KAAW3C,EAAMwQ,KAAKxU,QAGxB,kBAAC,GAAD,CAAoBoU,QAASpQ,EAAMoQ,QAASC,cAAerQ,EAAMqQ,gBACjE,kBAAC,GAAD,CAAoBH,WAAYlQ,EAAMkQ,WAAYnL,aAAc/E,EAAM+E,eAGtE,kBAAC,GAAD,CAAgBqK,MAAOpP,EAAMyQ,cAAef,WAAY1P,EAAM0P,aAC9D,kBAAC,GAAD,CAAgBN,MAAOpP,EAAMoP,MAAQ/N,OAAQrB,EAAMqB,OAAQ0D,aAAc/E,EAAM+E,gBAM5E,MCTUhC,G,YACnB,aAAe,IAAD,8BACZ,+CACKrD,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKoH,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKyV,WAAa,EAAKA,WAAWzV,KAAhB,gBAClB,EAAKiW,WAAa,EAAKA,WAAWjW,KAAhB,gBAClB,EAAKoW,cAAgB,EAAKA,cAAcpW,KAAnB,gBAIrB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCkW,KAAM,KACNtR,GAAI,KACJkQ,MAAO,KACPqB,cAAe,KACfjB,QAAS,KACTM,aAAc,GACdC,cAAc,EACdK,QAAS,MArBC,E,kFA0BZnN,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,WAAY3I,KAAKwD,SAC/BkF,EAAWC,GAAG,mBAAoB3I,KAAKmF,e,6CAIvCuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,WAAY5I,KAAKwD,SAC3CkF,EAAWE,eAAe,mBAAoB5I,KAAKmF,e,0CAInD0D,EAAsB,QAAS7I,KAAK8I,SAASnF,OAAd,OAAgC3D,KAAKL,MAAMC,OAC1EiJ,EAAkB,QAAS7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,oCAI3D,IAAIqW,EAAOvN,EAAWK,aAClB7G,EAAQwG,EAAWM,WACnBiN,GAAkB,SAAV/T,GACVlC,KAAKC,SAAS,CACZgW,KAAMA,EACNtR,GAAIsR,EAAKtR,GACTuR,cAAeD,EAAKpB,MACpBgB,QAASI,EAAKJ,Y,gCAMlB,IAAIhB,EAAQnM,EAAWlF,UACnBtB,EAAQwG,EAAWM,WACnB6L,GAAmB,SAAV3S,GACXlC,KAAKC,SAAS,CACZ4U,MAAOA,M,+BAOXhM,EAAsB,oBADX,CAAEsN,QAASnW,KAAKL,MAAMgF,GAAIsQ,QAASjV,KAAKL,MAAMsV,SACRjV,KAAKL,MAAMC,S,mCAK5DiJ,EAAsB,kBADX,CAAElE,GAAI3E,KAAKL,MAAMgF,GAAIyR,cAAepW,KAAKL,MAAM4V,aAAcc,cAAerW,KAAKL,MAAM6V,cACnDxV,KAAKL,MAAMC,S,wCAG1CiL,GAChB7K,KAAKC,SAAS4K,K,4BAId,GAAI7K,KAAKL,MAAMsW,KACb,OACE,kBAAC,IAAD,CAAK5M,KAAM,UAAYrJ,KAAKL,MAAMsW,KAAKtR,GAAK,QAAS4B,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,QACjH,kBAAC,IAAD,CAAMG,IAAI,UAAUC,OAAO,UAAUC,GAAG,kBACxC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,sB,iCAMvC+M,GACTpM,EAAyB,oBAAqB,CAAEoM,QAASA,EAASkB,QAASnW,KAAKL,MAAMgF,IAAM3E,KAAKL,MAAMC,S,oCAG3F6B,GACZoH,EAAyB,kBAAmB,CAAElE,GAAI3E,KAAKL,MAAMgF,GAAIlD,MAAOA,GAASzB,KAAKL,MAAMC,S,+BAGpF,IAAD,EACyCI,KAAKL,MAA7CsW,EADD,EACCA,KAAMpB,EADP,EACOA,MAAOqB,EADd,EACcA,cAAeL,EAD7B,EAC6BA,QACpC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQpU,MAAOlC,EAAK+B,MAAOkI,SAAUjK,EAAKqH,OAC1C,kBAAC,IAAD,MACC5G,KAAKyJ,MACN,kBAAC,GAAD,CAAUwM,KAAMA,EAAMpB,MAAOA,EAAOgB,QAASA,EAASC,cAAe9V,KAAK8V,cAAeI,cAAeA,EAAeP,WAAY3V,KAAK2V,WAAYR,WAAYnV,KAAKmV,WAAYrO,OAAQ9G,KAAK8G,OAAQ0D,aAAcxK,KAAKuI,yB,GA5G7L1G,aCKnByU,GArBA,SAAC7Q,GAEhB,OAAIA,EAAMnE,MAEN,kBAAC,IAAD,CAAMqI,WAAS,GACZlE,EAAMnE,MAAMyC,KAAI,SAACkS,GAAD,OACf,kBAAC,IAAD,CACEjS,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,IACjC7G,KAAM,UAAYqV,EAAKtR,GACvB9D,aAAa,EACbY,MAAOwU,EAAKxU,MACZmI,MAAM,GACNC,SAAS,GACTC,KAAK,SAKH,8BCHCyM,GAdG,SAAC9Q,GACjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAK+B,MAAOkI,SAAUjK,EAAKqH,OAE1C,kBAAC,IAAD,KAAarH,EAAKyC,MAClB,kBAAC,IAAD,CAAKqH,KAAK,aAAa9C,OAAO,aAAc+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,cACpF,kBAAC,IAAD,CAAMG,IAAI,SAASC,OAAO,SAASC,GAAG,iBACtC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,oBAE5C,kBAAC,GAAD,CAAU5G,MAAOmE,EAAMnE,UCNRkH,G,YACnB,aAAe,IAAD,8BACZ,+CACKhF,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCuB,MAAO,MALG,E,kFASZoH,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,WAAY5I,KAAKwD,W,0CAI3CxD,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QACpET,EAAkB,QAAS7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,gCAI3D,IAAI0B,EAAQoH,EAAWlF,UACnBtB,EAAQwG,EAAWM,WACnB1H,GAAmB,SAAVY,GACXlC,KAAKC,SAAS,CACZqB,MAAOA,M,+BAKH,IACDA,EAAStB,KAAKL,MAAd2B,MACP,OAAO,kBAAC,GAAD,CAAWA,MAAOA,Q,GAvCOgJ,IAAMzI,WCsC3B2U,GAzCE,SAAC/Q,GAChB,GAAIA,EAAMgR,YACR,IAAIC,GAAgB,OAEhBA,GAAgB,EAEtB,OACE,kBAAC,IAAMrW,SAAP,KACE,kBAAC,IAAD,KAAad,EAAK0W,MAClB,kBAAC,IAAD,CAAMjP,MAAI,GACR,kBAAC,IAAD,CACEd,MAAO3G,EAAKkC,MACZmB,KAAK,OACLuD,YAAY,MACZuB,aAAcjC,EAAMwQ,KAAKxU,MACzB2E,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE/I,MAAO4E,EAAEE,OAAOZ,WAGzC,kBAAC,IAAD,CAAUgR,OAAK,EAAChR,OAAO,EAAOiR,SAAUF,EAAelQ,KAAK,cAAc/E,MAAOlC,EAAKsX,WACpFhQ,SAAU,SAACR,GACT5D,QAAQC,IAAI2D,GACZZ,EAAM+E,aAAa,CAAEiM,YAAapO,KAAKqK,MAAMrM,EAAEE,OAAOZ,YAG1D,kBAAC,IAAD,CAAUgR,OAAK,EAAChR,OAAO,EAAMiR,QAASF,EAAelQ,KAAK,cAAc/E,MAAOlC,EAAKuX,QAClFjQ,SAAU,SAACR,GACT5D,QAAQC,IAAI2D,GACZZ,EAAM+E,aAAa,CAAEiM,YAAapO,KAAKqK,MAAMrM,EAAEE,OAAOZ,aAK5D,kBAAC,IAAD,CAAO8G,QAAM,GACX,kBAAC,IAAD,CAAKC,IAAI,KACP,kBAAC,IAAD,CAAQhM,UAAU,MAAMqG,MAAI,EAACgQ,UAAWtR,EAAMwF,QAASxK,QAASgF,EAAMqB,QAASvH,EAAKuH,YCpBzEkQ,G,YACnB,aAAe,IAAD,8BACZ,+CACKlQ,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBAEzB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCkW,KAAM,GACNgB,cAAc,GATJ,E,kFAeZvO,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,+BAK/CwD,EAAsB,QADX,CAACpH,MAAOzB,KAAKL,MAAM8B,MAAOwV,aAAcjX,KAAKL,MAAM8W,aACzBzW,KAAKL,MAAMC,S,wCAIhCiL,GAChB7K,KAAKC,SAAS4K,K,oCAKd7K,KAAK8K,UAAUC,SAAS,a,+BAKhB,IACDkL,EAAQjW,KAAKL,MAAbsW,KACP,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQxU,MAAOlC,EAAK2X,UAAW1N,SAAUjK,EAAKqH,OAC9C,kBAAC,IAAD,KAAarH,EAAK2X,WAClB,kBAAC,GAAD,CAAUjB,KAAMA,EAAMnP,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAMT,aAAcxK,KAAKuI,yB,GA9C7C1G,aCCnBqJ,G,YACnB,aAAe,IAAD,8BACZ,+CACKpE,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAKyF,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBAGzB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCkW,KAAO,GACPQ,YAAa,MAXH,E,kFAgBZ/N,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,+BAO/CwD,EAAyB,QADd,CAAClE,GAAG3E,KAAKL,MAAMgF,GAAIlD,MAAOzB,KAAKL,MAAM8B,MAAOwV,aAAcjX,KAAKL,MAAM8W,aACvCzW,KAAKL,MAAMC,S,0CAGpDI,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QAChEtJ,KAAK8I,SAASnF,OAAd,QACFkF,EAAsB,QAAS7I,KAAK8I,SAASnF,OAAd,OAAiC3D,KAAKL,MAAMC,S,oCAM7E,IAAIqW,EAAOvN,EAAWK,aAClB7G,EAAQwG,EAAWM,WACnBiN,GAAkB,SAAV/T,GACVlC,KAAKC,SAAS,CACZwB,MAAOwU,EAAKxU,MACZkD,GAAIsR,EAAKtR,GACTsR,KAAMA,EACNQ,YAAaR,EAAKgB,iB,wCAKNpM,GAChB7K,KAAKC,SAAS4K,K,oCAMd7K,KAAK8K,UAAUC,SAAS,a,+BAIhB,IAAD,EACyB/K,KAAKL,MAA1BsW,EADJ,EACIA,KAAMQ,EADV,EACUA,YACjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhV,MAAOlC,EAAK2X,UAAW1N,SAAUjK,EAAKqH,OAC9C,kBAAC,IAAD,KAAarH,EAAK2X,WAClB,kBAAC,GAAD,CAAUjB,KAAMA,EAAMQ,YAAaA,EAAa3P,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAMT,aAAcxK,KAAKuI,yB,GA3EnE1G,aCQ7BsV,GArBK,SAAC1R,GACnB,OAAIA,EAAM2R,QAEN,kBAAC,IAAM/W,SAAP,KACE,kBAAC,IAAD,KAAad,EAAKkC,OAClB,kBAAC,IAAD,CAAM2G,eAAA,GACJ,kBAAC,IAAD,KAAW3C,EAAM2R,QAAQ3V,QAG3B,kBAAC,IAAD,KAAalC,EAAKqG,SAClB,kBAAC,IAAD,CAAMwC,eAAA,GACJ,kBAAC,IAAD,KAAW3C,EAAM2R,QAAQxR,WAOxB,MCPU4C,G,YACnB,aAAe,IAAD,8BACZ,+CACKrD,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKoH,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAK2X,cAAgB,EAAKA,cAAc3X,KAAnB,gBACrB,EAAKiW,WAAa,EAAKA,WAAWjW,KAAhB,gBAClB,EAAKoW,cAAgB,EAAKA,cAAcpW,KAAnB,gBAIrB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCqX,QAAS,KACTzS,GAAI,KACJkQ,MAAO,KACPqB,cAAe,KACfjB,QAAS,KACTM,aAAc,GACdC,cAAc,EACdK,QAAS,MArBC,E,kFA0BZnN,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,WAAY3I,KAAKwD,SAC/BkF,EAAWC,GAAG,mBAAoB3I,KAAKmF,e,6CAIvCuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,WAAY5I,KAAKwD,SAC3CkF,EAAWE,eAAe,mBAAoB5I,KAAKmF,e,0CAInD0D,EAAsB,WAAY7I,KAAK8I,SAASnF,OAAd,UAAmC3D,KAAKL,MAAMC,OAChFiJ,EAAkB,QAAS7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,oCAI3D,IAAIwX,EAAU1O,EAAWK,aACrB7G,EAAQwG,EAAWM,WACnBoO,GAAqB,YAAVlV,GACblC,KAAKC,SAAS,CACZmX,QAASA,EACTzS,GAAIyS,EAAQzS,GACZuR,cAAekB,EAAQvC,MACvBgB,QAASuB,EAAQvB,Y,gCAMrB,IAAIhB,EAAQnM,EAAWlF,UACnBtB,EAAQwG,EAAWM,WACnB6L,GAAmB,SAAV3S,GACXlC,KAAKC,SAAS,CACZ4U,MAAOA,M,+BAOXhM,EAAsB,oBADX,CAAEyO,WAAYtX,KAAKL,MAAMgF,GAAIsQ,QAASjV,KAAKL,MAAMsV,SACXjV,KAAKL,MAAMC,S,mCAK5DiJ,EAAsB,qBADX,CAAElE,GAAI3E,KAAKL,MAAMgF,GAAIyR,cAAepW,KAAKL,MAAM4V,aAAcc,cAAerW,KAAKL,MAAM6V,cAChDxV,KAAKL,MAAMC,S,wCAG7CiL,GAChB7K,KAAKC,SAAS4K,K,4BAId,GAAI7K,KAAKL,MAAMyX,QACb,OACE,kBAAC,IAAD,CAAK/N,KAAM,aAAerJ,KAAKL,MAAMyX,QAAQzS,GAAK,QAAS4B,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,QACvH,kBAAC,IAAD,CAAMG,IAAI,UAAUC,OAAO,UAAUC,GAAG,kBACxC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,sB,oCAMpC+M,GACZpM,EAAyB,oBAAqB,CAAEoM,QAASA,EAASqC,WAAYtX,KAAKL,MAAMgF,IAAM3E,KAAKL,MAAMC,S,oCAG9F6B,GACZoH,EAAyB,qBAAsB,CAAElE,GAAI3E,KAAKL,MAAMgF,GAAIlD,MAAOA,GAASzB,KAAKL,MAAMC,S,+BAGvF,IAAD,EAC4CI,KAAKL,MAAhDyX,EADD,EACCA,QAASvC,EADV,EACUA,MAAOqB,EADjB,EACiBA,cAAeL,EADhC,EACgCA,QACvC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQpU,MAAOlC,EAAK6B,SAAUoI,SAAUjK,EAAKqH,OAC7C,kBAAC,IAAD,MACC5G,KAAKyJ,MACN,kBAAC,GAAD,CAAa2N,QAASA,EAASvC,MAAOA,EAAOgB,QAASA,EAASC,cAAe9V,KAAK8V,cAAeI,cAAeA,EAAeP,WAAY3V,KAAK2V,WAAY0B,cAAerX,KAAKqX,cAAevQ,OAAQ9G,KAAK8G,OAAQ0D,aAAcxK,KAAKuI,yB,GA5G5M1G,aCKnB0V,GArBG,SAAC9R,GAEnB,OAAIA,EAAMrE,SAEN,kBAAC,IAAD,CAAMuI,WAAS,GACZlE,EAAMrE,SAAS2C,KAAI,SAACqT,GAAD,OAClB,kBAAC,IAAD,CACEpT,IAAKsD,IAAOC,IAAIC,UAAUC,OAAO,IACjC7G,KAAM,aAAewW,EAAQzS,GAC7B9D,aAAa,EACbY,MAAO2V,EAAQ3V,MACfmI,MAAM,GACNC,SAAS,GACTC,KAAK,SAKH,8BCHC0N,GAdM,SAAC/R,GACpB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAK6B,SAAUoI,SAAUjK,EAAKqH,OAE7C,kBAAC,IAAD,KAAarH,EAAKyC,MAClB,kBAAC,IAAD,CAAKqH,KAAK,gBAAgB9C,OAAO,aAAc+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,cACvF,kBAAC,IAAD,CAAMG,IAAI,SAASC,OAAO,SAASC,GAAG,iBACtC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,oBAE5C,kBAAC,GAAD,CAAa9G,SAAUqE,EAAMrE,aCNdoH,G,YACnB,aAAe,IAAD,8BACZ,+CACKhF,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCqB,SAAU,MALA,E,kFASZsH,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,WAAY5I,KAAKwD,W,0CAI3CxD,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QACpET,EAAkB,WAAY7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,gCAI9D,IAAIwB,EAAWsH,EAAWlF,UACtBtB,EAAQwG,EAAWM,WACnB5H,GAAsB,YAAVc,GACdlC,KAAKC,SAAS,CACZmB,SAAUA,M,+BAKN,IACDA,EAAYpB,KAAKL,MAAjByB,SACP,OAAO,kBAAC,GAAD,CAAcA,SAAUA,Q,GAvCCkJ,IAAMzI,WCiC3B4V,GApCK,SAAChS,GAEnB,OADAhD,QAAQC,IAAI+C,GAEV,kBAAC,IAAMpF,SAAP,KACE,kBAAC,IAAD,KAAad,EAAK6X,SAClB,kBAAC,IAAD,CAAMpQ,MAAI,GACR,kBAAC,IAAD,CACEd,MAAM,QACNuE,WAAY,CAACC,UAAW,OACxB9H,KAAK,OACLuD,YAAY,MACZuB,aAAcjC,EAAMhE,MACpB2E,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE/I,MAAO4E,EAAEE,OAAOZ,WAGzC,kBAAC,IAAD,CACEO,MAAM,SACNtD,KAAK,OACL6H,WAAY,CAACC,UAAW,OACxB/E,MAAOF,EAAMG,QACbO,YAAY,OACZC,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE5E,QAASS,EAAEE,OAAOZ,YAK7C,kBAAC,IAAD,CAAO8G,QAAM,GACX,kBAAC,IAAD,CAAKC,IAAI,KACP,kBAAC,IAAD,CAAQhM,UAAU,MAAMqG,MAAI,EAACgQ,UAAWtR,EAAMwF,QAASxK,QAASgF,EAAMqB,QAASvH,EAAKuH,YCfzE4Q,G,YACnB,aAAe,IAAD,8BACZ,+CACK5Q,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBAEzB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnC0B,MAAO,GACPmE,QAAS,IATC,E,kFAeZ8C,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,+BAK/CwD,EAAsB,WADX,CAACpH,MAAOzB,KAAKL,MAAM8B,MAAOmE,QAAS5F,KAAKL,MAAMiG,SACjB5F,KAAKL,MAAMC,S,wCAInCiL,GAChB7K,KAAKC,SAAS4K,K,oCAKd7K,KAAK8K,UAAUC,SAAS,gB,+BAKhB,IAAD,EACkB/K,KAAKL,MAAvB8B,EADA,EACAA,MAAOmE,EADP,EACOA,QACd,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQnE,MAAOlC,EAAKoY,aAAcnO,SAAUjK,EAAKqH,OACjD,kBAAC,IAAD,KAAarH,EAAKoY,cAClB,kBAAC,GAAD,CAAalW,MAAOA,EAAOmE,QAASA,EAASkB,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAMT,aAAcxK,KAAKuI,yB,GA9CjE1G,aCAtB6V,G,YACnB,aAAe,IAAD,8BACZ,+CACK5Q,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKyF,YAAc,EAAKA,YAAYzF,KAAjB,gBAGnB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnC0B,MAAO,GACPkD,GAAI,KACJiB,QAAS,IAZC,E,kFAkBZ8C,EAAWC,GAAG,eAAgB3I,KAAKqF,aACnCqD,EAAWC,GAAG,eAAgB3I,KAAKmF,e,6CAInCuD,EAAWE,eAAe,eAAgB5I,KAAKqF,aAC/CqD,EAAWE,eAAe,eAAgB5I,KAAKmF,e,0CAI/C0D,EAAsB,WAAY7I,KAAK8I,SAASnF,OAAd,UAAmC3D,KAAKL,MAAMC,S,oCAKhF,IAAIwX,EAAU1O,EAAWK,aACrB7G,EAAQwG,EAAWM,WACnBoO,GAAqB,YAAVlV,GACblC,KAAKC,SAAS,CACZwB,MAAO2V,EAAQ3V,MACfkD,GAAIyS,EAAQzS,GACZiB,QAASwR,EAAQxR,Y,+BAOrBiD,EAAyB,WADd,CAAClE,GAAI3E,KAAKL,MAAMgF,GAAIlD,MAAOzB,KAAKL,MAAM8B,MAAOmE,QAAS5F,KAAKL,MAAMiG,SACjC5F,KAAKL,MAAMC,S,wCAItCiL,GAChB7K,KAAKC,SAAS4K,K,oCAKd7K,KAAK8K,UAAUC,SAAS,gB,+BAKhB,IAAD,EACkB/K,KAAKL,MAAvB8B,EADA,EACAA,MAAOmE,EADP,EACOA,QACd,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQnE,MAAOlC,EAAKoY,aAAcnO,SAAUjK,EAAKqH,OACjD,kBAAC,IAAD,KAAarH,EAAKoY,cAClB,kBAAC,GAAD,CAAalW,MAAOA,EAAOmE,QAASA,EAASkB,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAMT,aAAcxK,KAAKuI,yB,GApEjE1G,aCW5B+V,I,cA3BY,SAACnS,GAC1B,OAAIA,EAAMzE,UAAYyE,EAAMzE,SAASsB,OAAS,GAC5CG,QAAQC,IAAI+C,EAAMzE,UAEhB,kBAAC,IAAMX,SAAP,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACGd,EAAKyB,UAER,kBAAC,IAAD,KACA,kBAAC,IAAD,KACGyE,EAAMzE,SAAS+C,KAAI,SAACwI,GAAD,OAClB,kBAAC,IAAD,CACE3L,KAAM,aAAa2L,EAAQ5H,GAC3BlD,MAAO8K,EAAQ9K,MAAMwO,UAAU,EAAG,cAUtC,+BCQG4H,GA7BO,SAACpS,GAEnB,OAAIA,EAAMqS,UACFrS,EAAMkC,SAEF,kBAAC,IAAD,CAAKsG,OAAK,GACLxI,EAAMqS,UAAU/T,KAAI,SAACgU,GAAD,OACjB,uBAAGtX,QAAS,kBAAMgF,EAAMuS,gBAAgBD,KACpC,kBAAC,IAAD,CAAMjO,KAAMiO,EAAQE,aAAa,UAC7B,kBAAC,IAAD,CAAM1O,KAAK,QAAQtB,OAAO,mBAQ1C,kBAAC,IAAD,CAAKgG,OAAK,GACLxI,EAAMqS,UAAU/T,KAAI,SAACgU,GAAD,OACjB,uBAAG1O,KAAM,cAAc0O,GAAQ,kBAAC,IAAD,CAAMjO,KAAMiO,SAOnD,MCRDG,GAlBI,SAACzS,GAClB,OAAGA,EAAMxE,SAEL,kBAAC,IAAD,KACGwE,EAAMxE,SAAS8C,KAAI,SAAC8J,GAAD,OAClB,kBAAC,IAAD,CACApM,MAAOoM,EAAQkC,SACflG,SAAS,MACTjJ,KAAM,aAAaiN,EAAQlJ,IAC3B,yBAAK4E,KAAK,QAAQqE,IAAKC,EAAQC,OAAQC,MAAM,YAM3C,8BCEGoK,GAhBG,SAAC1S,GAEf,OADAhD,QAAQC,IAAI+C,GACRA,EAAM2S,UAEF,kBAAC,IAAD,KACI,kBAAC,IAAD,KACK7Y,EAAK6Y,WAEV,kBAAC,IAAD,KACI,kBAAC,GAAD,CAAYnX,SAAUwE,EAAM2S,cAIhC,MCEDD,GAfG,SAAC1S,GACf,OAAIA,EAAM4S,UAEF,kBAAC,IAAD,KACI,kBAAC,IAAD,KACK9Y,EAAK8Y,WAEV,kBAAC,IAAD,KACI,kBAAC,GAAD,CAAYpX,SAAUwE,EAAM4S,cAIhC,MC8GDC,GAtHK,SAAC7S,GACN6E,IAAMiO,SACjB,iBAAM,CACJ,CACErS,MAAO,WACP7D,KAAM,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,KAE7C,CACE6D,MAAO,WACP7D,KAAM,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,QAG/C,IAGWiI,IAAMiO,SACjB,iBAAM,CACJ,CAAEC,SAAS,EAAM5V,KAAM,SAAU0G,SAAU,UAC3C,CAAE1G,KAAM,SAAU0G,SAAU,WAE9B,IAGF,OAAI7D,EAAMoI,QAGN,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKlJ,GAAG,QAAQjE,UAAU,eAAeoQ,WAAS,GAChD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAK/C,MAAM,MAAMY,YAAY,MAE3B,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,yBAAKf,IAAKnI,EAAMoI,QAAQC,OAAQC,MAAM,OACtC,yBAAKrN,UAAU,gBAAgB+E,EAAMoI,QAAQkC,UAC7C,yBAAKrP,UAAU,sBAAqB,kBAAC,EAAD,CAAiB+C,MAAOgC,EAAMoI,QAAS3L,MAAM,UAAUmJ,YAAa5F,EAAM4F,YAAaC,WAAW,UAAUC,SAAU9F,EAAMoI,QAAQlJ,OAE1K,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAemT,UAAWrS,EAAMoI,QAAQiK,cAG5C,kBAAC,GAAD,CAAWM,UAAW3S,EAAMoI,QAAQuK,UAAWvK,QAASpI,EAAMoI,WAGhE,kBAAC,IAAD,CAAKE,MAAM,MAAMY,YAAY,MAC7B,kBAAC,GAAD,CAAoB3N,SAAUyE,EAAMzE,WACpC,kBAAC,GAAD,CAAWqX,UAAW5S,EAAMoI,QAAQwK,UAAWxK,QAASpI,EAAMoI,aAKlE,kBAAC,IAAD,CAAKlJ,GAAG,QAAQjE,UAAU,gBACxB,kBAAC,IAAD,CAAKuN,OAAK,GACR,kBAAC,IAAD,CAAKF,MAAM,MAAMY,YAAY,MAgB1BlJ,EAAMlE,MAAMwC,KAAI,SAAC0U,GAAD,OACf,kBAAC,IAAMpY,SAAP,KACE,kBAAC,EAAD,CAAY0F,KAAM0S,EAAE1S,KAAM4B,UAAU,EAAOT,QAASuR,EAAEvR,QAASY,aAAcrC,EAAMqC,sBAO7F,kBAAC,IAAD,CAAKnD,GAAG,QAAQjE,UAAU,gBACxB,yBAAKA,UAAU,eAAf,4BACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKqN,MAAM,MAAMY,YAAY,OAC3B,yBAAKjO,UAAU,2BACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,sBAAf,MAAuC,uCACvC,yBAAKA,UAAU,0BACf,yBAAKA,UAAU,yBACb,yBAAKA,UAAU,uBACb,yBAAKA,UAAU,sBAAf,SACA,yBAAKA,UAAU,uBAAf,SACA,yBAAKA,UAAU,0BAAf,YACA,yBAAKA,UAAU,sBAAf,WAIN,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,sBAAf,MAAuC,uCACvC,yBAAKA,UAAU,0BACf,yBAAKA,UAAU,yBACb,yBAAKA,UAAU,uBACb,yBAAKA,UAAU,sBAAf,SACA,yBAAKA,UAAU,uBAAf,SACA,yBAAKA,UAAU,0BAAf,YACA,yBAAKA,UAAU,sBAAf,gBAYV,MC5GS8H,G,YACnB,aAAe,IAAD,8BACZ,+CACKrD,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAKgZ,OAAS,EAAKA,OAAOhZ,KAAZ,gBACd,EAAK2L,YAAc,EAAKA,YAAY3L,KAAjB,gBAEnB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnC8N,QAAS,KACTlJ,GAAI,KACJuC,QAAS,KACT3F,MAAO,KACPP,SAAU,MAZA,E,kFAiBZ0H,EAAWC,GAAG,eAAgB3I,KAAKmF,e,6CAInCuD,EAAWE,eAAe,eAAgB5I,KAAKmF,e,0CAI/C0D,EAAsB,WAAY7I,KAAK8I,SAASnF,OAAd,UAAmC3D,KAAKL,MAAMC,S,oCAIhF,IAAIiO,EAAUnF,EAAWK,aACrB7G,EAAQwG,EAAWM,WACnB6E,GAAqB,YAAV3L,GACblC,KAAKC,SAAS,CACZ4N,QAASA,EACTlJ,GAAIkJ,EAAQlJ,GACZuC,QAAS2G,EAAQ3G,QACjB3F,MAAOsM,EAAQtM,MACfP,SAAU6M,EAAQ7M,a,4BAMtB,GAAIhB,KAAKL,MAAMkO,QACb,OACE,kBAAC,IAAD,CAAKxE,KAAM,aAAerJ,KAAKL,MAAMkO,QAAQlJ,GAAK,QAAS4B,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,QACvH,kBAAC,IAAD,CAAMG,IAAI,UAAUC,OAAO,UAAUC,GAAG,kBACxC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,sB,+BAOhDzF,QAAQC,IAAI,S,kCAGF0M,EAAkBC,EAAoBC,GAA6D,IAAvCC,EAAsC,uDAAxB,KAAMC,EAAkB,uDAAN,KAClGnN,EAAO,CAAE+M,iBAAkBA,EAAkBC,mBAAoBA,EAAoBC,qBAAsBA,EAAsBC,YAAaA,EAAaC,UAAWA,GAC1K3G,EAAsB,eAAgBxG,EAAMrC,KAAKL,MAAMC,S,+BAG/C,IAAD,EACuCI,KAAKL,MAA3CkO,EADD,EACCA,QAAS3G,EADV,EACUA,QAAS3F,EADnB,EACmBA,MAAOP,EAD1B,EAC0BA,SACjC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQS,MAAOlC,EAAK0B,SAAU0X,eAAe,EAAMnP,SAAUjK,EAAKqH,OAClE,kBAAC,IAAD,CAAS6J,QAAM,EAACC,QAAM,GACpB,kBAAC,IAAD,CAAMC,QAAQ,SAASC,eAAa,GAAC,uBAAGlQ,UAAU,+BAClD,kBAAC,IAAD,CAAMiQ,QAAQ,UAAS,uBAAGjQ,UAAU,6BACpC,kBAAC,IAAD,CAAMiQ,QAAQ,UAAS,uBAAGjQ,UAAU,yBAErCV,KAAKyJ,MACN,kBAAC,GAAD,CAAaoE,QAASA,EAAS3G,QAASA,EAASlG,SAAUA,EAAUO,MAAOA,EAAOmX,OAAQ1Y,KAAK0Y,OAAQrN,YAAarL,KAAKqL,mB,GA1E9FxJ,aCmBrB+W,GA7BK,SAACnT,GAEnB,OAAIA,EAAMxE,UACRwB,QAAQC,IAAI+C,EAAMxE,UAEhB,kBAAC,IAAD,CAAKgN,OAAK,GACPxI,EAAMxE,SAAS8C,KAAI,SAAC8J,GAAD,OAClB,kBAAC,IAAD,CAAKE,MAAM,MAAMY,YAAY,MAC3B,kBAAC,IAAD,CAAMjO,UAAU,sBACd,kBAAC,IAAD,CAAYA,UAAU,aACpB,yBAAKA,UAAU,wBAAuB,yBAAKkN,IAAKC,EAAQC,OAAQC,MAAM,KAAKiC,OAAO,QAClF,yBAAKtP,UAAU,uBAAsB,kBAAC,IAAD,CAAMA,UAAU,aAAa2I,KAAM,aAAewE,EAAQlJ,IAAKkJ,EAAQkC,SAASE,UAAU,EAAG,MAClI,yBAAKvP,UAAU,sBAAqB,kBAAC,EAAD,CAAiB+C,MAAOoK,EAAS3L,MAAM,UAAUmJ,YAAa5F,EAAM4F,YAAaC,WAAW,UAAUC,SAAUsC,EAAQlJ,MACpK,yBAAKjE,UAAU,qBACb,kBAAC,KAAD,CAAQ8M,OAAO,KAAKC,SAAO,EAACC,KAAG,GAAEG,EAAQgL,YAD3C,IACiEtZ,EAAKmO,MAGhE,kBAAC,IAAD,CAAYhN,UAAU,kBACtB,kBAAC,GAAD,CAAeoX,UAAWjK,EAAQiK,oBAQpC,8BCJGgB,GA3BM,SAACrT,GACpB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAK0B,UAClB,kBAAC,IAAD,CAAMmP,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,UAEX,kBAAC,IAAD,CAAWoB,OAAO,GAChB,kBAAC,IAAD,CACEC,kBAAmB/Q,EAAKwM,OACxB5F,YAAa5G,EAAKgR,OAClB1J,SAAU,SAACR,GACTZ,EAAM8K,OAAO,CAAEC,MAAOnK,EAAEE,OAAOZ,aAKvC,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAK0D,KAAK,gBAAgB9C,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,cACtF,kBAAC,IAAD,CAAMG,IAAI,SAASC,OAAO,SAASC,GAAG,iBACtC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,oBAE5C,kBAAC,GAAD,CAAajH,SAAUwE,EAAMxE,SAAUoK,YAAa5F,EAAM4F,gBClB3C7C,G,YACnB,aAAe,IAAD,8BACZ,+CACKhF,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAK6Q,OAAS,EAAKA,OAAO7Q,KAAZ,gBACd,EAAK2L,YAAc,EAAKA,YAAY3L,KAAjB,gBAInB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCkB,SAAU,KACVuP,MAAO,MAXG,E,kFAeZ9H,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,WAAY5I,KAAKwD,W,0CAI3CxD,KAAKgK,a,iCAIkBC,IAAWhI,SAC/BiI,MAAMC,KAAK,CAAEL,KAAMvK,EAAK6K,UAAWC,aAAc,IAAMf,SAAU,QACpET,EAAkB,WAAY7I,KAAKL,MAAM+D,Q,6BAGpCmH,GAAK,IAAD,OACT7K,KAAKC,SAAS4K,GAAK,WACjBhC,EAAkB,kBAAmB,EAAKlJ,MAAM+D,KAAM,CAACuN,EAAG,EAAKtR,MAAM6Q,a,gCAKvE,IAAIvP,EAAWyH,EAAWlF,UACtBtB,EAAQwG,EAAWM,WACnB/H,GAAsB,YAAViB,GACdlC,KAAKC,SAAS,CACZgB,SAAUA,M,kCAKJmO,EAAkBC,EAAoBC,GAAwD,IAAlCC,EAAiC,uDAArB,KAAMC,EAAe,uDAAL,KAC9FnN,EAAO,CAAC+M,iBAAkBA,EAAkBC,mBAAoBA,EAAoBC,qBAAsBA,EAAsBC,YAAaA,EAAaC,UAAWA,GACzK3G,EAAsB,eAAgBxG,EAAMrC,KAAKL,MAAMC,S,+BAG/C,IACDqB,EAAYjB,KAAKL,MAAjBsB,SACP,OAAO,kBAAC,GAAD,CAAcA,SAAUA,EAAUoK,YAAarL,KAAKqL,YAAakF,OAAQvQ,KAAKuQ,a,GAxDrDjG,IAAMzI,W,qBC2F3BkX,GA5FK,SAACtT,GACnB,OAAIA,EAAMe,MAAQf,EAAMlE,MAEpB,kBAAC,IAAMlB,SAAP,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAad,EAAKyZ,cAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMhS,MAAI,GACR,kBAAC,IAAD,CACEd,MAAO3G,EAAK0Z,UACZrW,KAAK,OACLuD,YAAY,MACZuB,aAAcjC,EAAMe,KACpBJ,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEhE,KAAMH,EAAEE,OAAOZ,WAIxC,kBAAC,IAAD,CACEO,MAAO3G,EAAK2Z,SACZtW,KAAK,OACLuD,YAAY,MACZuB,aAAcjC,EAAMyT,SACpB9S,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE0O,SAAU7S,EAAEE,OAAOZ,aAKhD,kBAAC,IAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAQjF,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKuH,UAI9D,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAavH,EAAKuY,WAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAeA,UAAWrS,EAAMqS,UAAWnQ,UAAU,EAAMqQ,gBAAiBvS,EAAMuS,oBAItF,kBAAC,IAAD,CAAMhR,MAAI,GACR,kBAAC,IAAD,CACEd,MAAO3G,EAAK4Z,cACZvW,KAAK,OACLuD,YAAY,MACZuB,aAAcjC,EAAMsS,OACpB3R,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEuN,OAAQ1R,EAAEE,OAAOZ,aAM9C,kBAAC,IAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAQjF,UAAU,MAAMqG,MAAI,EAACtG,QAASgF,EAAM2T,iBAAkB7Z,EAAKuH,UAKvE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,yBAAK8G,IAAKnI,EAAMqI,OAAQC,MAAM,QAEhC,kBAAC,KAAD,CACEsL,UAAU,EACVC,WAAY/Z,EAAKga,aACjB1S,SAAUpB,EAAM+T,OAChBC,gBAAgB,aAChBC,aAAc,CAAC,OAAQ,QAAS,QAChCC,YAAa,WAGhBlU,EAAMlE,MAAMwC,KAAI,SAAC0U,GAAD,OACf,kBAAC,IAAMpY,SAAP,KACE,kBAAC,EAAD,CAAY0F,KAAM0S,EAAE1S,KAAM4B,UAAU,EAAMT,QAASuR,EAAEvR,QAASY,aAAcrC,EAAMqC,eAClF,kBAAC,EAAD,CAAY/B,KAAM0S,EAAE1S,KAAMe,OAAQrB,EAAMmU,aAActT,cAAeb,EAAMoU,+BAQ3E,MC3ESC,G,YACnB,aAAe,IAAD,8BACZ,+CACKhT,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKma,wBAA0B,EAAKA,wBAAwBna,KAA7B,gBAC/B,EAAKoI,aAAe,EAAKA,aAAapI,KAAlB,gBACpB,EAAKyF,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAKka,aAAe,EAAKA,aAAala,KAAlB,gBACpB,EAAK8Z,OAAS,EAAKA,OAAO9Z,KAAZ,gBACd,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBAGf,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBAEf,EAAKC,MAAQ,CACXkO,QAAS,GACTtM,MAAO,KACP3B,MAAOC,OAAOC,aAAaC,QAAQ,SACnC0I,OAAQ,GACRjC,KAAM,KACN0S,SAAU,GACVa,SAAU,GACVjM,OAAQ,MAvBE,E,kFA6BZpF,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,mBAAoB3I,KAAKmF,aACvCuD,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,mBAAoB5I,KAAKmF,aACnDuD,EAAWE,eAAe,WAAY5I,KAAKwD,W,0CAI3CxD,KAAKgK,a,iCAKLnB,EAAkB,QAAS7I,KAAKL,MAAM+D,Q,6BAGjCsW,GACLvX,QAAQC,IAAIsX,EAAQ,IACpBnR,EAAqB,WAAY7I,KAAKL,MAAMgF,GAAIqV,EAAQ,GAAIha,KAAKL,MAAMC,S,+BAMvEiJ,EAAyB,WADd,CAAClE,GAAI3E,KAAKL,MAAMgF,GAAI6B,KAAMxG,KAAKL,MAAM6G,KAAM0S,SAAUlZ,KAAKL,MAAMuZ,UAChClZ,KAAKL,MAAMC,S,qCAKtDiJ,EAAsB,UADX,CAACO,QAASpJ,KAAKL,MAAMiI,OAAQhC,QAAS5F,KAAKL,MAAM8I,QACrBzI,KAAKL,MAAMC,S,wCAIlCiL,GAChB7K,KAAKC,SAAS4K,K,8CAGQ7G,EAAK2B,EAAOiC,GAClC,IAAIa,EAASzI,KAAKL,MAAM8I,OACxB,GAAIA,EAAOnG,OAAS,EAClB,IAAK,IAAIH,EAAI,EAAGA,EAAIsG,EAAOnG,OAAQH,IACjC,GAAIsG,EAAOtG,GAAG0D,KAAO4C,EAAOtG,GAAG0D,MAAQ7B,EAAK,CAC1C,IAAIiF,EAAWpF,OAAOqF,OAAO,GAAIlJ,KAAKL,OACtCsJ,EAASR,OAAOtG,GAAK,CAAE0D,IAAK7B,EAAK2B,MAAOA,EAAOiC,OAAQA,GACvD5H,KAAKC,SAASgJ,QAEdjJ,KAAKC,SAAS,CAAEwI,OAAQzI,KAAKL,MAAM8I,OAAOU,OAAO,CAAEtD,IAAK7B,EAAK2B,MAAOA,EAAQiC,OAAOA,WAIvF5H,KAAKC,SAAS,CAAEwI,OAAQzI,KAAKL,MAAM8I,OAAOU,OAAO,CAAEtD,IAAK7B,EAAK2B,MAAOA,EAAOiC,OAAOA,Q,oCAMpF5H,KAAK8K,UAAUC,SAAS,gB,oCAIxB,IAAI8C,EAAUnF,EAAWK,aACrB7G,EAAQwG,EAAWM,WACnB6E,GAAqB,YAAV3L,GACblC,KAAKC,SAAS,CACZsB,MAAOsM,EAAQtM,MACfsM,QAASA,M,mCAMF9F,GACXc,EAAyB,UAAW,CAACd,KAAMA,M,gCAI3C,IAAIxG,EAAQmH,EAAWlF,UACnBtB,EAAQwG,EAAWM,WACnBzH,GAAmB,SAAVW,GACXlC,KAAKC,SAAS,CACZsB,MAAOA,M,+BAOH,IAAD,EAC0CvB,KAAKL,MAAtC4B,GADT,EACAsM,QADA,EACStM,OAAOiF,EADhB,EACgBA,KAAMsH,EADtB,EACsBA,OAAQoL,EAD9B,EAC8BA,SACrC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQzX,MAAOlC,EAAK0a,aAAczQ,SAAUjK,EAAKqH,OACjD,kBAAC,IAAD,KAAarH,EAAK0a,cAClB,kBAAC,GAAD,CAAazT,KAAMA,EAAMsH,OAAQA,EAAQoL,SAAUA,EAAU3X,MAAOA,EAAOiY,OAAQxZ,KAAKwZ,OAAQ1R,aAAc9H,KAAK8H,aAAc8R,aAAc5Z,KAAK4Z,aAAc9S,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAM4O,wBAAyB7Z,KAAK6Z,wBAAyBrP,aAAcxK,KAAKuI,yB,GAjI7O1G,aCTtBiY,G,YACnB,aAAe,IAAD,8BACZ,+CACKhT,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBACnB,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAKma,wBAA0B,EAAKA,wBAAwBna,KAA7B,gBAC/B,EAAKoI,aAAe,EAAKA,aAAapI,KAAlB,gBACpB,EAAKyF,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAKka,aAAe,EAAKA,aAAala,KAAlB,gBACpB,EAAK8Z,OAAS,EAAKA,OAAO9Z,KAAZ,gBACd,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAK0Z,gBAAkB,EAAKA,gBAAgB1Z,KAArB,gBACvB,EAAKsY,gBAAkB,EAAKA,gBAAgBtY,KAArB,gBAKvB,EAAKC,MAAQ,CACX6G,KAAM,KACN0S,SAAU,KACV3X,MAAO,KACPqG,OAAQ,KACRV,QAAS,KACT4Q,UAAW,KACXC,OAAQ,KACRnY,MAAOC,OAAOC,aAAaC,QAAQ,SACnC0I,OAAQ,GACR9D,GAAI,KACJoV,SAAU,GACVjM,OAAQ,MA7BE,E,kFAmCZpF,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,mBAAoB3I,KAAKmF,aACvCuD,EAAWC,GAAG,cAAe3I,KAAKmF,e,6CAIlCuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,mBAAoB5I,KAAKmF,aACnDuD,EAAWE,eAAe,cAAe5I,KAAKmF,e,0CAI9CnF,KAAKgK,a,iCAIDhK,KAAK8I,SAASnF,OAAd,WACFkF,EAAsB,WAAY7I,KAAK8I,SAASnF,OAAd,a,6BAI/BqW,GACLvX,QAAQC,IAAIsX,EAAQ,IACpBnR,EAAqB,WAAY7I,KAAKL,MAAMgF,GAAIqV,EAAQ,GAAIha,KAAKL,MAAMC,S,+BAMvEiJ,EAAyB,WADd,CAAClE,GAAI3E,KAAKL,MAAMgF,GAAI6B,KAAMxG,KAAKL,MAAM6G,KAAM0S,SAAUlZ,KAAKL,MAAMuZ,UAChClZ,KAAKL,MAAMC,S,qCAKtDiJ,EAAsB,UADX,CAACO,QAASpJ,KAAKL,MAAMiI,OAAQhC,QAAS5F,KAAKL,MAAM8I,QACrBzI,KAAKL,MAAMC,S,wCAIlD,IAAIyC,EAAO,CAACsC,GAAI3E,KAAKL,MAAMgF,GAAImT,UAAW9X,KAAKL,MAAMoY,QACrDlP,EAAsB,0BAA0B7I,KAAK8I,SAASnF,OAAd,UAAmCtB,EAAMrC,KAAKL,MAAMC,S,sCAGtFkY,GACd,IAAIzV,EAAO,CAACsC,GAAI3E,KAAKL,MAAMgF,GAAImT,UAAWA,GAC1CjP,EAAsB,6BAA6B7I,KAAK8I,SAASnF,OAAd,UAAmCtB,EAAMrC,KAAKL,MAAMC,S,wCAIvFiL,GAChB7K,KAAKC,SAAS4K,K,8CAGQ7G,EAAK2B,EAAOiC,GAClC,IAAIa,EAASzI,KAAKL,MAAM8I,OACxB,GAAIA,EAAOnG,OAAS,EAClB,IAAK,IAAIH,EAAI,EAAGA,EAAIsG,EAAOnG,OAAQH,IACjC,GAAIsG,EAAOtG,GAAG0D,KAAO4C,EAAOtG,GAAG0D,MAAQ7B,EAAK,CAC1C,IAAIiF,EAAWpF,OAAOqF,OAAO,GAAIlJ,KAAKL,OACtCsJ,EAASR,OAAOtG,GAAK,CAAE0D,IAAK7B,EAAK2B,MAAOA,EAAOiC,OAAQA,GACvD5H,KAAKC,SAASgJ,QAEdjJ,KAAKC,SAAS,CAAEwI,OAAQzI,KAAKL,MAAM8I,OAAOU,OAAO,CAAEtD,IAAK7B,EAAK2B,MAAOA,EAAQiC,OAAOA,WAIvF5H,KAAKC,SAAS,CAAEwI,OAAQzI,KAAKL,MAAM8I,OAAOU,OAAO,CAAEtD,IAAK7B,EAAK2B,MAAOA,EAAOiC,OAAOA,Q,oCAOpF5H,KAAK8K,UAAUC,SAAS,gB,oCAIxB,IAAI8C,EAAUnF,EAAWK,aACrB7G,EAAQwG,EAAWM,WACnB6E,GAAqB,YAAV3L,GACblC,KAAKC,SAAS,CACZ0E,GAAIkJ,EAAQlJ,GACZpD,MAAOsM,EAAQtM,MACfiF,KAAMqH,EAAQrH,KACd0S,SAAWrL,EAAQqL,SACnBpL,OAAQD,EAAQC,OAChBgK,UAAWjK,EAAQiK,c,mCAMZ/P,GACXc,EAAyB,UAAW,CAACd,KAAMA,M,gCAI3C,IAAIxG,EAAQmH,EAAWlF,UACnBtB,EAAQwG,EAAWM,WACnBzH,GAAmB,SAAVW,GACXlC,KAAKC,SAAS,CACZsB,MAAOA,M,+BAOH,IAAD,EACoDvB,KAAKL,MAAzD6G,EADA,EACAA,KAAM0S,EADN,EACMA,SAAUpL,EADhB,EACgBA,OAAOvM,EADvB,EACuBA,MAAgBuW,GADvC,EAC8B5Q,QAD9B,EACuC4Q,WAC9C,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQrW,MAAOlC,EAAK0a,aAAczQ,SAAUjK,EAAKqH,OACjD,kBAAC,IAAD,KAAarH,EAAK0a,cAClB,kBAAC,GAAD,CAAazT,KAAMA,EAAMsH,OAAQA,EAAQoL,SAAUA,EAAU3X,MAAOA,EAAOuW,UAAWA,EAAW0B,OAAQxZ,KAAKwZ,OAAQ1R,aAAc9H,KAAK8H,aAAc8R,aAAc5Z,KAAK4Z,aAAc9S,OAAQ9G,KAAK8G,OAAQmE,SAAS,EAAM4O,wBAAyB7Z,KAAK6Z,wBAAyBrP,aAAcxK,KAAKuI,kBAAmB6Q,gBAAiBpZ,KAAKoZ,gBAAiBpB,gBAAiBhY,KAAKgY,uB,GAvJnVnW,aCc5BqY,GAlBS,SAACzU,GACrB,OAAIA,EAAM0U,WAEF,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAQ1Y,MAAOlC,EAAK0B,SAAUuI,SAAUjK,EAAKqH,MACzC,kBAAC,IAAD,CAAMwJ,UAAU,SACZ,kBAAC,IAAD,CAAMnB,GAAG,WAIjB,kBAAC,IAAD,MACA,kBAAC,GAAD,CAAYhO,SAAUwE,EAAM0U,WAAW9B,aAIvC,MCfK+B,G,YACnB,aAAe,IAAD,8BACZ,+CACKjV,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAKqR,SAAWA,GAASrR,KAAT,gBAGhB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCoa,WAAY,KACZ3J,MAAO,KACP9M,KAAM,GAVI,E,kFAcZgF,EAAWC,GAAG,eAAgB3I,KAAKmF,e,6CAInCuD,EAAWE,eAAe,eAAgB5I,KAAKmF,e,0CAI/CnF,KAAK+Q,WACL/Q,KAAKgK,a,iCAILnB,EAAsB,cAAe7I,KAAK8I,SAASnF,OAAd,SAAkC3D,KAAKL,MAAMC,S,oCAKlF,IAAIua,EAAazR,EAAWK,aACxB7G,EAAQwG,EAAWM,WACnBmR,GAAwB,eAAVjY,GAChBlC,KAAKC,SAAS,CACZka,WAAYA,EACZxV,GAAIwV,EAAWxV,KAGnBlC,QAAQC,IAAIyX,EAAYjY,K,+BAKhB,IACAiY,EAAena,KAAKL,MAApBwa,WACR,OAAQ,kBAAC,GAAD,CAAkBA,WAAYA,Q,GAhDF7P,IAAMzI,WC6D/BwY,GA/DM,SAAC5U,GAClB,GAAIA,EAAM6U,eAAgB,CAAC,IACdC,EAAT,SAAqBnZ,EAAUK,GAC3B,IAAK,IAAIU,EAAI,EAAGA,EAAIf,EAASkB,OAAQH,IACjC,GAAGf,EAASe,GAAGV,OAASA,EACpB,OAAOL,EAASe,GAAGwD,OAuB/B,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAQlE,MAAOlC,EAAKiC,iBAAkBgI,SAAUjK,EAAKqH,MACjD,kBAAC,IAAD,CAAMwJ,UAAU,SACZ,kBAAC,IAAD,CAAMnB,GAAG,WAGjB,kBAAC,IAAD,KACI,kBAAC,IAAD,KAAa1P,EAAK6B,UAClB,kBAAC,IAAD,KACI,kBAAC,IAAD,KACKqE,EAAM6U,eAAeE,gBAAgBzW,KAAI,SAAC0W,GAAD,OACtC,kBAAC,IAAD,CACIvU,MAAOuU,EAAOvU,MACdtD,KAAK,SACLiE,SAAU,SAACR,GACPZ,EAAM8C,kBAAmBkS,EAAOhZ,MAAO4E,EAAEE,OAAOZ,SAnChF,SAAiB+U,EAAIjZ,EAAML,GAGvB,IAFA,IAAIuZ,EAAS,CAAC,kCACVC,GAAW,EACNzY,EAAI,EAAGA,EAAIuY,EAAGpY,OAAQH,IAEvByY,EADDF,EAAGvY,GAAGV,OAAS8Y,EAAYnZ,EAAUK,GAKxCkZ,EAAOpY,KACH,4BAAQoD,MAAO+U,EAAGvY,GAAGV,MAAOmZ,SAAUA,GACjCF,EAAGvY,GAAG+D,QAInB,OAAOyU,EAwBkBjV,CAAQ+U,EAAO/U,QAAS+U,EAAOhZ,MAAOgE,EAAMoV,uBAI7D,kBAAC,IAAD,KACI,kBAAC,IAAD,MACC,kBAAC,IAAD,CAAQna,UAAU,MAAMqG,MAAI,EAAEtG,QAASgF,EAAMqB,QAASvH,EAAKuH,WAM5E,OAAQ,MCxDK0B,G,YACnB,aAAe,IAAD,8BACZ,+CACKrD,YAAc,EAAKA,YAAYzF,KAAjB,gBACnB,EAAKoH,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBAEnB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCua,eAAgB,KAChBO,gBAAiB,KACjBpS,OAAQ,IAXE,E,kFAiBZC,EAAWC,GAAG,eAAgB3I,KAAKmF,aACnCuD,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAKnCqD,EAAWE,eAAe,eAAgB5I,KAAKmF,aAC/CuD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAI/CwD,EAAsB,UAAW,EAAG7I,KAAKL,MAAMC,S,oCAI/C,IAAI0a,EAAiB5R,EAAWK,aAC5B7G,EAAQwG,EAAWM,WACnBsR,GAA4B,YAAVpY,GACpBlC,KAAKC,SAAS,CACZqa,eAAgBA,EAChBO,gBAAiBP,EAAe9Y,iBAChCiH,OAAS6R,EAAe9Y,qB,oCAMfxB,KACR2P,IAAIT,OAAOC,MAAM5P,EAAKub,uBAAwBvb,EAAKwb,W,+BAMxDlS,EAAsB,UADX,CAAElE,GAAI,EAAGqW,QAAShb,KAAKL,MAAM8I,QACDzI,KAAKL,MAAMC,S,wCAKlCoE,EAAK2B,GACrB,IAAI8C,EAASzI,KAAKL,MAAM8I,OACxB,GAAIA,EAAOnG,OAAS,GAClB,IAAK,IAAIH,EAAI,EAAGA,EAAIsG,EAAOnG,OAAQH,IACjC,GAAIsG,EAAOtG,GAAGV,OAASgH,EAAOtG,GAAGV,OAASuC,EAAK,CAC7C,IAAIiF,EAAWpF,OAAOqF,OAAO,GAAIlJ,KAAKL,OACtCsJ,EAASR,OAAOtG,GAAK,CAAEV,MAAOuC,EAAK2B,MAAOA,GAC1C3F,KAAKC,SAASgJ,SAIlBjJ,KAAKC,SAAS,CAAEwI,OAAQzI,KAAKL,MAAM8I,OAAOU,OAAO,CAAE1H,MAAOuC,EAAK2B,MAAOA,Q,+BAIhE,IAAD,EACqC3F,KAAKL,MAAzC2a,EADD,EACCA,eAAgBO,EADjB,EACiBA,gBACxB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQpZ,MAAOlC,EAAKiC,iBAAkBgI,SAAUjK,EAAKqH,OACrD,kBAAC,GAAD,CAAc0T,eAAgBA,EAAgBO,gBAAiBA,EAAiBtS,kBAAmBvI,KAAKuI,kBAAmBzB,OAAQ9G,KAAK8G,c,GA7E5GjF,aCsCrBoZ,GA3CG,SAACxV,GACjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAK2b,SAClB,kBAAC,IAAD,CAAM9K,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,WAGb,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAa1P,EAAKmC,OAClB,kBAAC,IAAD,CAAahB,UAAU,WACrB,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEwF,MAAO3G,EAAKuV,MACZlS,KAAK,OACLuY,WAAW,EACXhV,YAAa5G,EAAK6b,iBAClBzV,MAAOF,EAAMqP,MACb1O,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEsK,MAAOzO,EAAEE,OAAOZ,aAc7C,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAM0D,KAAK,YAAYgS,SAAS,EAAOxa,aAAa,GAAOtB,EAAK+b,gBAAhE,KACA,kBAAC,IAAD,CAAQvU,MAAI,EAACrG,UAAU,uCAAuC2I,KAAK,2FAA4FgS,SAAS,EAAOxa,aAAa,GAAOtB,EAAKgc,IAAxM,KACA,kBAAC,IAAD,CAAM7a,UAAU,eAChB,kBAAC,IAAD,CAAQA,UAAU,UAAUqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKmC,W,eClBtE,aAAe,IAAD,8BACZ,+CACKoF,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBAEnB,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnC+U,MAAO,GACP0G,SAAU,IATA,E,kFAcZ9S,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAG5CrF,KAAK8I,SAASnF,OAAd,OACDkF,EAAsB,uBAAwB,GAAI7I,KAAK8I,SAASnF,OAAd,OAEjD3D,KAAKL,MAAMC,OAASI,KAAKL,MAAMC,MAAM0C,OAAS,IAC/CuG,EAAsB,uBAAwB,GAAI7I,KAAKL,MAAMC,S,+BAM/DiJ,EAAsB,cADX,CAACiM,MAAO9U,KAAKL,MAAMmV,MAAO0G,SAAUxb,KAAKL,MAAM6b,a,oCAK1D,IAAItZ,EAAQwG,EAAWM,WACT,UAAV9G,GACFlC,KAAK8K,UAAUC,SAAS,iBAAiB/K,KAAKL,MAAMmV,OAExC,aAAV5S,IACFlC,KAAK8K,UAAUC,SAAS,KACxBlL,OAAOM,SAASC,UAElBqC,QAAQC,IAAIR,K,wCAII2I,GAChB7K,KAAKC,SAAS4K,K,+BAGN,IAAD,EACsB7K,KAAKL,MAD3B,EACA8b,SADA,EACUD,SACjB,OACE,kBAACE,GAAD,CAAW5U,OAAQ9G,KAAK8G,OAAQ0D,aAAcxK,KAAKuI,wB,GAvD5B+B,IAAMzI,W,eCCjC,aAAe,IAAD,8BACZ,+CACK0G,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBAEnB,EAAKC,MAAQ,CACXmV,MAAO,GACP0G,SAAU,IAPA,E,kFAYZ9S,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAG/CwD,EAAsB,uBAAwB,GAAI7I,KAAK8I,SAASnF,OAAd,S,oCAIlD,IAAIgY,EAAOjT,EAAWK,aAER,aADFL,EAAWM,YAErBnJ,OAAOC,aAAa8b,QAAQ,QAASD,EAAK/b,OAC1CI,KAAK8K,UAAUC,SAAS,KACxBlL,OAAOM,SAASC,WAEhBJ,KAAK8K,UAAUC,SAAS,iBACxBlL,OAAOM,SAASC,Y,wCAMFyK,GAChB7K,KAAKC,SAAS4K,K,+BAGN,IAAD,EACsB7K,KAAKL,MAD3B,EACA8b,SADA,EACUD,SACjB,OACE,kBAACE,GAAD,CAAW5U,OAAQ9G,KAAK8G,OAAQ0D,aAAcxK,KAAKuI,wB,GA7C5B+B,IAAMzI,WC2DpBga,GA7EI,SAACpW,GAClB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAK2b,SAClB,kBAAC,IAAD,CAAM9K,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,WAGb,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAa1P,EAAK2b,SAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEhV,MAAO3G,EAAK0Z,UAAY,KACxB9S,YAAa5G,EAAKuc,gBAClBlZ,KAAK,OACL4D,KAAMc,IAAOC,IAAIC,UAAUC,OAAO,IAClCrB,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEhE,KAAMH,EAAEE,OAAOZ,WAIxC,kBAAC,IAAD,CACEO,MAAO3G,EAAK2Z,SAAW,KACvB/S,YAAa5G,EAAKwc,oBAClBnZ,KAAK,OACL4D,KAAMc,IAAOC,IAAIC,UAAUC,OAAO,IAClCrB,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAE0O,SAAU7S,EAAEE,OAAOZ,WAK5C,kBAAC,IAAD,CACEO,MAAO,MAAQ3G,EAAKuV,MACpBlS,KAAK,QACLoZ,UAAQ,EACR7V,YAAa5G,EAAK6b,iBAClB1a,UAAU,MACViF,MAAOF,EAAMqP,MACb1O,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEsK,MAAOzO,EAAEE,OAAOZ,aA2B7C,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAM0D,KAAK,WAAW9J,EAAK0c,cAAe,OAAU1c,EAAK2c,cAAzD,KACA,kBAAC,IAAD,CAAMxb,UAAU,eAChB,kBAAC,IAAD,CAAQA,UAAU,UAAUqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAK2b,a,eCpDtE,aAAe,IAAD,8BACZ,+CACKpU,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBAEnB,EAAKC,MAAQ,CACXmV,MAAO,GACPtO,KAAM,GACN0S,SAAU,IATA,E,kFAcZxQ,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,+BAI/CrF,KAAKgP,GAAG,QAAQmN,OAChBnc,KAAKgP,GAAG,eAAelF,KAAKvK,EAAK6c,YACjC,IAAI/Z,EAAO,CACTyS,MAAO9U,KAAKL,MAAMmV,MACjBtO,KAAMxG,KAAKL,MAAM6G,KACjB0S,SAAUlZ,KAAKL,MAAMuZ,UACxB,GACGlZ,KAAKL,MAAMmV,OAAS9U,KAAKL,MAAMmV,MAAMxS,OAAS,GAC9CtC,KAAKL,MAAM6G,MAAQxG,KAAKL,MAAM6G,KAAKlE,OAAS,GAC5CtC,KAAKL,MAAMuZ,UAAYlZ,KAAKL,MAAMuZ,SAAS5W,OAAS,EAErDuG,EAAsB,gBAAiBxG,OAClC,CACQrC,KACR2P,IAAIT,OAAOC,MAAM5P,EAAK4T,gBAAiB5T,EAAK4P,U,oCAMrC,WADFzG,EAAWM,aAErBhJ,KAAKgP,GAAG,QAAQ7E,OAChBnK,KAAK8K,UAAUC,SAAS,iBAAiB/K,KAAKL,MAAMmV,U,wCAKtCjK,GAChB7K,KAAKC,SAAS4K,GACdpI,QAAQC,IAAImI,K,+BAGJ,IAAD,EACwB7K,KAAKL,MAD7B,EACC8b,SADD,EACWD,SAClB,OACE,kBAACa,GAAD,CAAYvV,OAAQ9G,KAAK8G,OAAQ0D,aAAcxK,KAAKuI,wB,GA1D7B+B,IAAMzI,WCuBpBoZ,GAzCG,SAACxV,GACjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQhE,MAAOlC,EAAK+c,cAClB,kBAAC,IAAD,CAAMlM,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,WAGb,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAa1P,EAAKmC,OAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACA,kBAAC,IAAD,CACIwE,MAAO3G,EAAKuV,MACZlS,KAAK,OACLuY,WAAW,EACXhV,YAAa5G,EAAK6b,iBAClBzV,MAAOF,EAAMqP,MACb1O,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEsK,MAAOzO,EAAEE,OAAOZ,WAGzC,kBAAC,IAAD,CACEO,MAAO3G,EAAKgd,kBACZ3Z,KAAK,OACLuD,YAAa5G,EAAKid,wBAClBpW,QAAS,SAACC,GACRZ,EAAM+E,aAAa,CAAEiS,iBAAkBpW,EAAEE,OAAOZ,aAKxD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAM0D,KAAK,YAAYgS,SAAS,EAAOxa,aAAa,GAAOtB,EAAK+b,gBAAhE,KACA,kBAAC,IAAD,CAAM5a,UAAU,eAChB,kBAAC,IAAD,CAAQA,UAAU,UAAUqG,MAAI,EAACtG,QAASgF,EAAMqB,QAASvH,EAAKmC,W,eChBtE,aAAe,IAAD,8BACZ,+CACKoF,OAAS,EAAKA,OAAOpH,KAAZ,gBACd,EAAK6I,kBAAoB,EAAKA,kBAAkB7I,KAAvB,gBACzB,EAAK2F,YAAc,EAAKA,YAAY3F,KAAjB,gBAEnB,EAAKC,MAAQ,CACX8c,iBAAkB,GAClB3H,MAAO,IARG,E,kFAaZpM,EAAWC,GAAG,eAAgB3I,KAAKqF,e,6CAInCqD,EAAWE,eAAe,eAAgB5I,KAAKqF,e,0CAI/CrF,KAAKC,SAAS,CAAC6U,MAAO9U,KAAK8I,SAASnF,OAAd,U,+BAKtBkF,EAAsB,eADX,CAAC0T,kBAAmBvc,KAAKL,MAAM8c,qB,oCAK1C,IAAId,EAAOjT,EAAWK,aAClB7G,EAAQwG,EAAWM,WACnB2S,GAAiB,UAATzZ,IACVrC,OAAOC,aAAa8b,QAAQ,QAASD,EAAK/b,OAC1CI,KAAK8K,UAAUC,SAAS,KACxBlL,OAAOM,SAASC,Y,wCAKFyK,GAChB7K,KAAKC,SAAS4K,K,+BAGN,IAAD,EACmB7K,KAAKL,MAAdmV,GADV,EACA2G,SADA,EACU3G,OACjB,OACE,kBAAC4H,GAAD,CAAkB5V,OAAQ9G,KAAK8G,OAAQgO,MAAOA,EAAOtK,aAAcxK,KAAKuI,wB,GAhDjD+B,IAAMzI,WCwEpB8a,GAzEG,SAAClX,GA4BjB,OACE,kBAAC,IAAD,CAAMmX,cAAenX,EAAMoX,YAAYnd,U,IACrC,kBAAC,IAAD,CAAQ+B,MAAOlC,EAAK0B,SAAUuI,SAAUjK,EAAKqH,MAC3C,kBAAC,IAAD,CAAMwJ,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,WAGb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKvO,UAAU,SAASiE,GAAG,SAnCjC,WACE,IAAIgW,EAAS,GAwBb,OAtBIlV,EAAMqX,OAENrX,EAAMqX,MAAM/Y,KAAI,SAACgZ,GACfpC,EAAOpY,KACL,yBAAKqK,MAAM,oBAAoB5I,IAAK,aAAe+Y,EAAKpY,IACtD,2BACEqY,UAAU,EACVhZ,IAAK+Y,EAAKpY,GACVA,GAAI,SAAWoY,EAAKpY,GACpBiJ,IAAI,GACJG,MAAM,MACNiC,OAAO,MACPiN,UAAQ,EACRC,aAAW,EACXC,MAAO1X,EAAM0X,UAInB1X,EAAM2X,eAAeL,MAIpBpC,EAWA0C,KAIL,kBAAC,IAAD,CACE/T,SAAS,gBACTC,KAAK,QACL1B,MAAM,SACNnH,UAAU,iBAEV,uBAAGkM,MAAM,aAAa0Q,cAAY,SAClC,uBAAG1Q,MAAM,YAAY0Q,cAAY,SACjC,kBAAC,IAAD,CAAYhU,SAAS,UACnB,kBAAC,IAAD,CACE5I,UAAU,gBACV6c,SAAO,EACPC,QAAM,EACN/c,QAAS,kBAAMgF,EAAMgY,sBAErB,uBAAG7Q,MAAM,mBAAmB0Q,cAAY,UAE1C,kBAAC,IAAD,CACE5c,UAAU,gBACVD,QAAS,kBAAMgF,EAAMiY,kBAErB,uBAAG9Q,MAAM,qBAAqB0Q,cAAY,UAE5C,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAW5c,UAAU,iBACnB,uBAAGkM,MAAM,gBAAgB0Q,cAAY,c,8BC5D3CK,GAAoB9d,OAAO8d,kBACjCC,GAAMC,SAAW,GAEjBD,GAAME,mBAAqB,WAC1B,GAAGC,UAAUC,cAAgBD,UAAUC,aAAaC,gBAEnD,OAAO,EAER,GAAGpe,OAAOke,UAAUG,UAAUC,MAAM,UAAW,CAC9C,IAAIC,EAAYC,SAASxe,OAAOke,UAAUG,UAAUC,MAAM,iBAAiB,GAAI,IAC3EG,EAAS,GAGb,OAFGze,OAAOke,UAAUG,UAAUC,MAAM,WACnCG,EAAS,IACPF,GAAa,IAAMA,GAAaE,GAI5BV,GAAMW,UAAUC,cAGvB,OAAO,GAIT,IAAIC,GAAmB,CAEtBC,YAAa,mCACbF,YAAa,WAAa,OAAgE,OAAzDG,SAASC,cAAc,+BACxDC,UAAW,SAAUC,GACpB,IAAIC,EAAUlf,OAAOmf,YAAW,WAC/B,IAAIva,EAAQ,IAAIwa,MAAM,2BAEtB,OADAxa,EAAM+B,KAAO,2IACNsY,EAASra,KACd,KACHzE,KAAKkf,MAAMH,GAAWD,EACtBjf,OAAOsf,YAAY,CAAEvc,KAAM,iBAAkB+B,GAAIoa,GAAW,MAE7DK,KAAM,WACL,IAAIF,EAAQ,GACZlf,KAAKkf,MAAQA,EAEbrf,OAAO4S,iBAAiB,WAAW,SAAU4M,GAC5C,GAAGA,EAAMC,QAAUzf,OAAOM,SAASmf,OAEnC,GAAsB,kBAAnBD,EAAMhd,KAAKO,MAA4Bsc,EAAMG,EAAMhd,KAAKsC,IAAK,CAC/D,IAAIma,EAAWI,EAAMG,EAAMhd,KAAKsC,IAGhC,UAFOua,EAAMG,EAAMhd,KAAKsC,IAEI,KAAxB0a,EAAMhd,KAAKkJ,SAAiB,CAE/B,IAAI9G,EAAQ,IAAIwa,MAAM,2BACtBxa,EAAM+B,KAAO,yDACbsY,EAASra,QAETqa,EAAS,KAAMO,EAAMhd,KAAKkJ,cAEE,yBAAnB8T,EAAMhd,KAAKO,OACrBH,QAAQC,IAAI,YAAa2c,EAAMhd,KAAKsC,IACpC9E,OAAO0f,aAAaF,EAAMhd,KAAKsC,UAqVnC,SAASiZ,GAAM4B,GAKd,IAJAA,EAAmBA,GAAoB,IACtBC,QAA8C,mBAA5BD,EAAiBC,QAAyBD,EAAiBC,QAAU7B,GAAM8B,KAC9GF,EAAiB/a,MAA0C,mBAA1B+a,EAAiB/a,MAAuB+a,EAAiB/a,MAAQmZ,GAAM8B,KACxGF,EAAiBG,UAAkD,mBAA9BH,EAAiBG,UAA2BH,EAAiBG,UAAY/B,GAAM8B,MAChH9B,GAAMgC,SAET,OADAJ,EAAiB/a,MAAM,2BAChB,GAER,IAAImZ,GAAMiC,oBAET,OADAL,EAAiB/a,MAAM,wCAChB,GAGR,GADAmZ,GAAMlb,IAAI,wBAA0Bkb,GAAMgC,WACtCJ,EAAiBjc,OAEpB,OADAic,EAAiB/a,MAAM,sBAChB,GAER,IAAIqb,GAAa,EACbC,EAAK,KACLC,EAAa,GACbC,EAAuB,KACvBC,EAAU,KACVC,EAAe,EACf5c,EAASic,EAAiBjc,OAC3Bqa,GAAMwC,QAAQ7c,IAChBqa,GAAMlb,IAAI,8BAAgCa,EAAOjB,OAAS,oCAC1DiB,EAAS,KACT2c,EAAUV,EAAiBjc,OAC3Bqa,GAAMyC,MAAMH,IAEgB,IAAzB3c,EAAO+c,QAAQ,OACjBR,GAAa,EACblC,GAAMlb,IAAI,sCAAwCa,KAElDuc,GAAa,EACblC,GAAMlb,IAAI,oCAAsCa,IAGlD,IAAIgd,EAAaf,EAAiBe,YAAc,CAAC,CAACC,KAAM,iCACpDC,EAAqBjB,EAAiBiB,mBACtCC,EAAelB,EAAiBkB,aAEhCC,GAAyC,IAA1BnB,EAAiBoB,KAEhCC,GAAkB,OACkBC,IAArCtB,EAAiBqB,iBAAsE,OAArCrB,EAAiBqB,kBACrEA,GAAuD,IAArCrB,EAAiBqB,iBAEpC,IAAIE,EAAQ,QAC4BD,IAArCtB,EAAiBwB,iBAAsE,OAArCxB,EAAiBwB,kBACrED,EAAQvB,EAAiBwB,iBACvBD,EAAQ,IACVA,EAAQ,GAET,IAAInhB,EAAQ,UACkBkhB,IAA3BtB,EAAiB5f,OAAkD,OAA3B4f,EAAiB5f,QAC3DA,EAAQ4f,EAAiB5f,OAE1B,IAAIqhB,EAAY,UACkBH,IAA/BtB,EAAiByB,WAA0D,OAA/BzB,EAAiByB,YAC/DA,EAAYzB,EAAiByB,WAE9BjhB,KAAKkhB,iBAAkB,OACiBJ,IAArCtB,EAAiB0B,iBAAsE,OAArC1B,EAAiB0B,kBACrElhB,KAAKkhB,iBAAwD,IAArC1B,EAAiB0B,iBAE1C,IAAIC,EAAkB,UACkBL,IAArCtB,EAAiB2B,iBAAsE,OAArC3B,EAAiB2B,kBACrEA,EAAkB3B,EAAiB2B,iBACjCC,MAAMD,KACRA,EAAkB,MACnB,IAAIE,EAAkB,IAOtB,SAASC,EAAeC,GACvB,IAAIC,EAAc,CACjBC,KAAM,IACNC,OAAQ,IACRC,IAAK,KAYN,YAT6Bb,IAAzBS,GAA+D,OAAzBA,IACrCA,EAAqBE,OACxBD,EAAYC,KAAOF,EAAqBE,MACrCF,EAAqBG,SACxBF,EAAYE,OAASH,EAAqBG,QACvCH,EAAqBI,MACxBH,EAAYG,IAAMJ,EAAqBI,MAGlCH,OAtBgCV,IAArCtB,EAAiB6B,iBAAsE,OAArC7B,EAAiB6B,kBACrEA,EAAkB7B,EAAiB6B,iBACjCD,MAAMC,KACRA,EAAkB,KAsBnB,IAAIO,GAAY,EACZC,EAAY,KACZC,EAAgB,GAChBC,EAAO/hB,KACPgiB,EAAU,EACVC,EAAe,GAiBnB,SAASC,IACR,GAAgB,MAAbL,EAGH,GADAjE,GAAMyC,MAAM,gBACRuB,EAAJ,CAIA,IAAIO,EAAW5e,EAAS,IAAMse,EAAY,SAAU,IAAIO,MAAOC,UAC5DtB,IACFoB,EAAWA,EAAW,UAAYpB,GAChCnhB,IACFuiB,EAAWA,EAAW,UAAYG,mBAAmB1iB,IACnDqhB,IACFkB,EAAWA,EAAW,cAAgBG,mBAAmBrB,IAC1DrD,GAAM2E,YAAYJ,EAAU,CAC3BK,KAAM,MACN3B,gBAAiBA,EACjBpB,QAASgD,EACTC,QAASrB,EACT5c,MAAO,SAASke,EAAYC,GAG3B,GAFAhF,GAAMnZ,MAAMke,EAAa,IAAKC,KAC9BZ,EACa,EAIZ,OAFAJ,GAAY,OACZpC,EAAiB/a,MAAM,+CAGxByd,YAxBDtE,GAAMiF,KAAK,yCA8Bb,SAASJ,EAAYK,EAAMC,GAI1B,GAHAf,EAAU,EACNlC,QAA4BgB,IAAde,GAAyC,OAAdA,IAAsC,IAAhBkB,GAClEb,IACGpC,IAAclC,GAAMwC,QAAQ0C,GAOhC,GAAqB,cAAlBA,EAAI,MAIA,GAAqB,QAAlBA,EAAI,MAYP,GAAqB,YAAlBA,EAAI,MAYP,GAAqB,YAAlBA,EAAI,MAAyB,CAGtC,KADIE,EAASF,EAAI,QAGhB,YADAlF,GAAMiF,KAAK,qBAIZ,KADII,EAAenB,EAAckB,IAGhC,YADApF,GAAMyC,MAAM,+CAGb,IAAI6C,EAAYJ,EAAI,UACpBlF,GAAMyC,MAAM,uCAAyCwB,GACrDjE,GAAMyC,MAAM6C,GACZ,IAAIje,EAASge,EAAaE,YACvBle,EAAOme,IAAMne,EAAOoe,WAEtBzF,GAAMyC,MAAM,2BAA4B6C,GACpCA,IAAqC,IAAxBA,EAAUI,UAK1Bre,EAAOme,GAAGG,gBAAgBL,GAH1Bje,EAAOme,GAAGG,gBAAgB3F,GAAM4F,mBAOjC5F,GAAMyC,MAAM,6FACRpb,EAAOwe,aACVxe,EAAOwe,WAAa,IACrBxe,EAAOwe,WAAWlhB,KAAK2gB,GACvBtF,GAAMyC,MAAMpb,EAAOwe,iBAEd,IAAqB,aAAlBX,EAAI,MAKb,OAHAlF,GAAMyC,MAAM,mCAAqCwB,GACjDjE,GAAMyC,MAAMyC,IACRE,EAASF,EAAI,SAKbG,EAAenB,EAAckB,SAKjCC,EAAaS,aAAY,QAHxB9F,GAAMyC,MAAM,oDALZzC,GAAMiF,KAAK,qBAUN,GAAqB,WAAlBC,EAAI,MAAwB,CAKrC,GAHAlF,GAAMyC,MAAM,iCAAmCwB,GAC/CjE,GAAMyC,MAAMyC,KACRE,EAASF,EAAI,QAGhB,YADAlF,GAAMiF,KAAK,qBAIZ,KADII,EAAenB,EAAckB,IAGhC,YADApF,GAAMyC,MAAM,+CAGb4C,EAAaS,aAAY,EAAOZ,EAAI,QACpCG,EAAaU,cACP,GAAqB,aAAlBb,EAAI,MAA0B,CAKvC,GAHAlF,GAAMyC,MAAM,mCAAqCwB,GACjDjE,GAAMyC,MAAMyC,KACRE,EAASF,EAAI,QAGhB,YADAlF,GAAMiF,KAAK,qBAIZ,KADII,EAAenB,EAAckB,IAGhC,OAEDC,EAAaW,UAAW,EACxBX,EAAaY,aACbZ,EAAaa,cACP,GAAqB,UAAlBhB,EAAI,MAAuB,CAKpC,GAHAlF,GAAMyC,MAAM,gCAAkCwB,GAC9CjE,GAAMyC,MAAMyC,KACRE,EAASF,EAAI,QAGhB,YADAlF,GAAMiF,KAAK,qBAIZ,KADII,EAAenB,EAAckB,IAGhC,YADApF,GAAMyC,MAAM,+CAGb4C,EAAac,WAAWjB,EAAI,KAAUA,EAAI,gBACpC,GAAqB,aAAlBA,EAAI,MAA0B,CAKvC,GAJAlF,GAAMyC,MAAM,mCAAqCwB,GACjDjE,GAAMyC,MAAMyC,KAERE,EAASF,EAAI,QAGhB,YADAlF,GAAMiF,KAAK,qBAIZ,KADII,EAAenB,EAAckB,IAGhC,YADApF,GAAMyC,MAAM,+CAGb4C,EAAae,SAASlB,EAAI,OAAYA,EAAI,UACpC,IAAqB,UAAlBA,EAAI,MAAuB,CAIpC,IAAImB,EAECC,EADL,GAHAtG,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,QACjExG,GAAMyC,MAAMyC,GACRmB,EAAcnB,EAAI,aAEjBoB,EAAgBjC,EAAagC,KAEhCC,EAAcpB,UAERb,EAAagC,GAErB,OACM,GAAqB,UAAlBnB,EAAI,MAAuB,CAGpC,IAAIE,EACJ,GAHApF,GAAMyC,MAAM,iCAAmCwB,GAC/CjE,GAAMyC,MAAMyC,KACRE,EAASF,EAAI,QAGhB,YADAlF,GAAMiF,KAAK,qBAGZ,IAAIwB,EAAavB,EAAI,WACrB,IAAIuB,EAEH,YADAzG,GAAMiF,KAAK,yBAGZjF,GAAMyC,MAAM,6BAA+B2C,EAAS,KAAOqB,EAAU,OAAa,KAClF,IAEIpB,EAFA5gB,EAAOgiB,EAAU,KAGrB,GAFAzG,GAAMyC,MAAMhe,KACR4gB,EAAenB,EAAckB,IAGhC,YADApF,GAAMiF,KAAK,+CAGZ,IAAIyB,EAAOxB,EAAI,KACZwB,IACF1G,GAAMyC,MAAM,2BACZzC,GAAMyC,MAAMiE,IAEb,IAAIxF,EAAWmE,EAAasB,UACzBzF,GACFlB,GAAMyC,MAAM,4BAEZvB,EAASzc,EAAMiiB,IAGf1G,GAAMyC,MAAM,yCAEP,IAAqB,YAAlByC,EAAI,MAMb,OALAlF,GAAMnZ,MAAM,sBAAwBod,GACpCjE,GAAMyC,MAAMyC,QACRhD,GACHC,EAAGzT,MAAM,KAAM,oBAIhBsR,GAAMiF,KAAK,2BAA6BC,EAAI,MAAY,gBAAkBjB,GAC1EjE,GAAMyC,MAAMyC,UApLZlF,GAAMyC,MAAM,4BAA8BwB,GAC1CjE,GAAMyC,MAAMyC,IACRmB,EAAcnB,EAAI,gBAEjBoB,EAAgBjC,EAAagC,KAEhCC,EAAcpB,UACRb,EAAagC,SAnBrBrG,GAAMyC,MAAM,yBAA2BwB,GACvCjE,GAAMyC,MAAMyC,IACRmB,EAAcnB,EAAI,gBAEjBoB,EAAgBjC,EAAagC,KAEhCC,EAAcpB,UACRb,EAAagC,SAXrBrG,GAAM4G,OAAO,8BAAgC3C,QAP7C,IAAI,IAAI1f,EAAE,EAAGA,EAAE2gB,EAAKxgB,OAAQH,IAC3BsgB,EAAYK,EAAK3gB,IAAI,GA+MxB,SAASsiB,IACR,GAAIlhB,GAAWuc,GAAe8B,EAA9B,CAEA3B,EAAuBjB,WAAWyF,EAAWtD,GAC7C,IAAIuD,EAAU,CAAE,MAAS,YAAa,WAAc7C,EAAW,YAAejE,GAAM+G,aAAa,KAC9F/kB,IACF8kB,EAAO,MAAY9kB,GACjBqhB,IACFyD,EAAO,UAAgBzD,GACxBlB,EAAGvN,KAAKnK,KAAKC,UAAUoc,KAIxB,SAASE,EAAcC,GACtB,IAAIZ,EAAcrG,GAAM+G,aAAa,IACjCD,EAAU,CAAE,MAAS,SAAU,YAAeT,GAgClD,GA/BGY,EAAS,YAEXjD,GAAY,EACZ8C,EAAO,MAAY,QACnBA,EAAO,WAAiB7C,EAErB9B,IACFA,EAAG+E,OAAS,KACZ/E,EAAGgF,QAAU,KACbhF,EAAGiF,QAAU,KACV/E,IACFV,aAAaU,GACbA,EAAuB,QAIvBrgB,IACF8kB,EAAO,MAAY9kB,GACjBqhB,IACFyD,EAAO,UAAgBzD,IACpB1d,GAAUqa,GAAMwC,QAAQF,KAGC,KAD5B3c,EAAS2c,EAAQC,IACPG,QAAQ,OACjBR,GAAa,EACblC,GAAMlb,IAAI,YAAcyd,EAAa,GAAK,yCAA2C5c,EAAS,OAE9Fuc,GAAa,EACblC,GAAMlb,IAAI,YAAcyd,EAAa,GAAK,uCAAyC5c,EAAS,OAG3Fuc,EA2DF,IAAI,IAAImF,KA1DRlF,EAAKnC,GAAMsH,aAAa3hB,EAAQ,kBAChCyc,EAAa,CACZ,MAAS,WAER,GADApC,GAAMnZ,MAAM,sDAAwDlB,GAChEqa,GAAMwC,QAAQF,KAAa2E,EAAS,UAEvC,QADA1E,IACqBD,EAAQ5d,YAE5BuiB,EAAUpgB,MAAM,+EAIjBlB,EAAS,UACTyb,YAAW,WACV4F,EAAcC,KACZ,MAGJA,EAAUpgB,MAAM,yEAGjB,KAAQ,WAEPwd,EAAagC,GAAe,SAASnB,GAEpC,GADAlF,GAAMyC,MAAMyC,GACU,YAAlBA,EAAI,MAGP,OAFAlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,aACjES,EAAUpgB,MAAMqe,EAAI,MAAUsB,QAG/BnE,EAAuBjB,WAAWyF,EAAWtD,GAC7CS,GAAY,EACZC,EAAYiB,EAAI,WAAiBA,EAAI,WAAiBA,EAAKzgB,KAAL,GACnDwiB,EAAS,UACXjH,GAAMlb,IAAI,oBAAsBmf,GAEhCjE,GAAMlb,IAAI,oBAAsBmf,GAEjCjE,GAAMC,SAASgE,GAAaE,EAC5B8C,EAAUpF,WAEXM,EAAGvN,KAAKnK,KAAKC,UAAUoc,KAGxB,QAAW,SAASrF,GACnBoD,EAAYpa,KAAKqK,MAAM2M,EAAMhd,QAG9B,MAAS,WACHkB,GAAWqe,IAGhBA,GAAY,EAEZpC,EAAiB/a,MAAM,kDAKxBsb,EAAGtN,iBAAiBwS,EAAWjF,EAAWiF,SAK5CrH,GAAM2E,YAAYhf,EAAQ,CACzBif,KAAM,OACN3B,gBAAiBA,EACjB1Z,KAAMud,EACNjF,QAAS,SAASqD,GAEjB,GADAlF,GAAMyC,MAAMyC,GACS,YAAlBA,EAAI,MAGN,OAFAlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,aACjES,EAAUpgB,MAAMqe,EAAI,MAAUsB,QAG/BxC,GAAY,EACZC,EAAYiB,EAAI,WAAiBA,EAAI,WAAiBA,EAAKzgB,KAAL,GACnDwiB,EAAS,UACXjH,GAAMlb,IAAI,oBAAsBmf,GAEhCjE,GAAMlb,IAAI,oBAAsBmf,GAEjCjE,GAAMC,SAASgE,GAAaE,EAC5BG,IACA2C,EAAUpF,WAEXhb,MAAO,SAASke,EAAYC,GAE3B,GADAhF,GAAMnZ,MAAMke,EAAa,IAAKC,GAC3BhF,GAAMwC,QAAQF,KAAa2E,EAAS,UAEtC,QADA1E,IACoBD,EAAQ5d,YAE3BuiB,EAAUpgB,MAAM,+EAIjBlB,EAAS,UACTyb,YAAW,WAAa4F,EAAcC,KAAe,MAGnC,KAAhBjC,EACFiC,EAAUpgB,MAAMke,EAAa,yBAE7BkC,EAAUpgB,MAAMke,EAAa,KAAOC,MA6UxC,SAASuC,EAAYC,EAAUP,GAI9B,IAHAA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,MAC/EkC,EAGH,OAFAhE,GAAMiF,KAAK,8CACXgC,EAAUpgB,MAAM,yCAGjB,IAAIwe,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IAAIsW,EAAU8J,EAAU9J,QACpBuJ,EAAOO,EAAUP,KACjBL,EAAcrG,GAAM+G,aAAa,IACjCD,EAAU,CAAE,MAAS,UAAW,KAAQ3J,EAAS,YAAekJ,GAepE,GAdGhB,EAAarjB,QACf8kB,EAAO,MAAYzB,EAAarjB,OAC9BqhB,IACFyD,EAAO,UAAgBzD,GACrBqD,IACFI,EAAQJ,KAAO,CACd1hB,KAAM0hB,EAAK1hB,KACXyiB,IAAKf,EAAKe,KAERf,EAAKgB,OACPZ,EAAQJ,KAAKgB,MAAO,IAEtB1H,GAAMyC,MAAM,qCAAuC+E,EAAW,MAC9DxH,GAAMyC,MAAMqE,GACT5E,EAkCF,OAjCA4E,EAAO,WAAiB7C,EACxB6C,EAAO,UAAgBU,EACvBnD,EAAagC,GAAe,SAASnB,GAGpC,GAFAlF,GAAMyC,MAAM,iBACZzC,GAAMyC,MAAMyC,GACS,YAAlBA,EAAI,MAAyB,CAE/B,IAAIuB,EAAavB,EAAI,WACrB,IAAIuB,EAGH,OAFAzG,GAAMiF,KAAK,qDACXgC,EAAUpF,UAGX7B,GAAMlb,IAAI,uCAAyC2hB,EAAU,OAAa,KAC1E,IAAIhiB,EAAOgiB,EAAU,KAGrB,OAFAzG,GAAMyC,MAAMhe,QACZwiB,EAAUpF,QAAQpd,GAES,QAAlBygB,EAAI,MAYd+B,EAAUpF,UAVNqD,EAAI,OACNlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,QACjES,EAAUpgB,MAAMqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,UAEzDxG,GAAMnZ,MAAM,iBACZogB,EAAUpgB,MAAM,wBAOnBsb,EAAGvN,KAAKnK,KAAKC,UAAUoc,IAGxB9G,GAAM2E,YAAYhf,EAAS,IAAMse,EAAY,IAAMuD,EAAU,CAC5D5C,KAAM,OACN3B,gBAAiBA,EACjB1Z,KAAMud,EACNjF,QAAS,SAASqD,GAGjB,GAFAlF,GAAMyC,MAAM,iBACZzC,GAAMyC,MAAMyC,GACS,YAAlBA,EAAI,MAAyB,CAE/B,IAAIuB,EAAavB,EAAI,WACrB,IAAIuB,EAGH,OAFAzG,GAAMiF,KAAK,qDACXgC,EAAUpF,UAGX7B,GAAMlb,IAAI,uCAAyC2hB,EAAU,OAAa,KAC1E,IAAIhiB,EAAOgiB,EAAU,KAGrB,OAFAzG,GAAMyC,MAAMhe,QACZwiB,EAAUpF,QAAQpd,GAES,QAAlBygB,EAAI,MAYd+B,EAAUpF,UAVNqD,EAAI,OACNlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,QACjES,EAAUpgB,MAAMqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,UAEzDxG,GAAMnZ,MAAM,iBACZogB,EAAUpgB,MAAM,mBAOnBA,MAAO,SAASke,EAAYC,GAC3BhF,GAAMnZ,MAAMke,EAAa,IAAKC,GAC9BiC,EAAUpgB,MAAMke,EAAa,KAAOC,MAMvC,SAAS2C,EAAqBH,EAAUlC,GACvC,GAAItB,EAAJ,CAIA,IAAIqB,EAAenB,EAAcsD,GACjC,GAAInC,GAAiBA,EAAaE,YAAlC,CAIA,IAAIuB,EAAU,CAAE,MAAS,UAAW,UAAaxB,EAAW,YAAetF,GAAM+G,aAAa,KAO9F,GANG1B,EAAarjB,QACf8kB,EAAO,MAAYzB,EAAarjB,OAC9BqhB,IACFyD,EAAO,UAAgBzD,GACxBrD,GAAM4G,OAAO,qCAAuCY,EAAW,MAC/DxH,GAAM4G,OAAOE,GACV5E,EAIF,OAHA4E,EAAO,WAAiB7C,EACxB6C,EAAO,UAAgBU,OACvBrF,EAAGvN,KAAKnK,KAAKC,UAAUoc,IAGxB9G,GAAM2E,YAAYhf,EAAS,IAAMse,EAAY,IAAMuD,EAAU,CAC5D5C,KAAM,OACN3B,gBAAiBA,EACjB1Z,KAAMud,EACNjF,QAAS,SAASqD,GACjBlF,GAAM4G,OAAO,mBACb5G,GAAM4G,OAAO1B,GACQ,QAAlBA,EAAI,OACNlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,SAInE3f,MAAO,SAASke,EAAYC,GAC3BhF,GAAMnZ,MAAMke,EAAa,IAAKC,WA7B/BhF,GAAMiF,KAAK,uBALXjF,GAAMiF,KAAK,yCAwCb,SAAS2C,EAAkBJ,EAAUK,EAASC,EAAYC,EAAUC,GACnE,IAAI3C,EAAenB,EAAcsD,GACjC,GAAInC,GAAiBA,EAAaE,YAAlC,CAIA,IAAIle,EAASge,EAAaE,YAMtB0C,EAA2B,SAASxG,GACvCzB,GAAMlb,IAAI,yCAA0C2c,GACpD,IAAInZ,EAAQmZ,EAAM9Y,OAAOL,MACrB4f,EAAWzG,EAAM9Y,OAAOuf,SACxBC,EAAU9gB,EAAO+gB,YAAY9f,GAASjB,EAAO+gB,YAAY9f,GAAO+f,WAAa,OAEjF,GADArI,GAAMlb,IAAI,oBAAsBwD,EAAQ,mBAAqB6f,GAC9C,SAAZA,EAAoB,CAEtB,GAAG9gB,EAAO+gB,YAAY9f,GAAO6Y,SAAW9Z,EAAO+gB,YAAY9f,GAAO6Y,QAAQzc,OAAS,EAAG,CACrFsb,GAAMlb,IAAI,gCAAkCwD,EAAQ,KAAMjB,EAAO+gB,YAAY9f,GAAO6Y,QAAQzc,QADP,2BAErF,IAAI,IAAJ,EAAQ,EAAQ2C,EAAO+gB,YAAY9f,GAAO6Y,QAA1C,+CAAmD,CAAC,IAA5C1c,EAA2C,QAClDub,GAAMlb,IAAI,iCAAmCwD,EAAQ,KACrD0X,GAAMyC,MAAMhe,GACZ4C,EAAO+gB,YAAY9f,GAAOsM,KAAKnQ,IALqD,kFAOrF4C,EAAO+gB,YAAY9f,GAAO6Y,QAAU,GAGrCkE,EAAaiD,WAAWhgB,EAAO4f,KAOjC,GAAIH,EAQH1gB,EAAO+gB,YAAYP,GAAWE,MARjB,CAEb,IAAIQ,EAAY,CAAEC,SAAS,GACxBV,IACFS,EAAUL,SAAWJ,GACtBzgB,EAAO+gB,YAAYP,GAAWxgB,EAAOme,GAAGoC,kBAAkBC,EAASU,GAKpElhB,EAAO+gB,YAAYP,GAASlB,UAxCD,SAASlF,GACnCzB,GAAMlb,IAAI,oCAAqC2c,GAC/C,IAAInZ,EAAQmZ,EAAM9Y,OAAOL,MACzB+c,EAAaoD,OAAOhH,EAAMhd,KAAM6D,IAsCjCjB,EAAO+gB,YAAYP,GAASX,OAASe,EACrC5gB,EAAO+gB,YAAYP,GAAST,QAAUa,EACtC5gB,EAAO+gB,YAAYP,GAASV,QAjBH,SAAStgB,GACjCmZ,GAAMnZ,MAAM,6BAA8BA,IAiB3CQ,EAAO+gB,YAAYP,GAAS1G,QAAU,GACnC6G,GACF3gB,EAAO+gB,YAAYP,GAAS1G,QAAQxc,KAAKqjB,QAlDzChI,GAAMiF,KAAK,kBAsDb,SAASyD,EAASlB,EAAUP,IAC3BA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnF,IAAIuD,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IAAIQ,EAASge,EAAaE,YACtB9gB,EAAOwiB,EAAU/a,MAAQ+a,EAAUxiB,KACvC,IAAIA,EAGH,OAFAub,GAAMiF,KAAK,qBACXgC,EAAUpgB,MAAM,gBAGjB,IAAIyB,EAAQ2e,EAAU3e,MAAQ2e,EAAU3e,MAAQ0X,GAAM2I,qBACtD,OAAIthB,EAAO+gB,YAAY9f,GAMqB,SAAzCjB,EAAO+gB,YAAY9f,GAAO+f,YAC5BhhB,EAAO+gB,YAAY9f,GAAO6Y,QAAQxc,KAAKF,QACvCwiB,EAAUpF,YAGX7B,GAAMlb,IAAI,iCAAmCwD,EAAQ,KACrD0X,GAAMyC,MAAMhe,GACZ4C,EAAO+gB,YAAY9f,GAAOsM,KAAKnQ,QAC/BwiB,EAAUpF,YAZT+F,EAAkBJ,EAAUlf,EAAO2e,EAAUiB,UAAU,EAAOzjB,EAAMwiB,EAAUiB,eAC9EjB,EAAUpF,WAeZ,SAAS+G,EAASpB,EAAUP,IAC3BA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnF,IAAIuD,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IAAIQ,EAASge,EAAaE,YAC1B,IAAIle,EAAOwhB,WAAY,CAEtB,GAAGxhB,EAAOme,GAAI,CACb,IACIsD,EADUzhB,EAAOme,GAAGuD,aACEC,MAAK,SAAS5D,GACvC,OAAOA,EAAO6D,OAA+B,UAAtB7D,EAAO6D,MAAMC,QAErC,IAAIJ,EAGH,OAFA9I,GAAMiF,KAAK,oDACXgC,EAAUpgB,MAAM,+CAGjBQ,EAAOwhB,WAAaC,EAAYK,KAC7B9hB,EAAOwhB,aACT7I,GAAMlb,IAAI,uBACVuC,EAAOwhB,WAAWO,aAAe,SAASC,GAAQrJ,GAAMyC,MAAM,mBAAqB4G,EAAKA,QAG1F,IAAIhiB,EAAOwhB,WAGV,OAFA7I,GAAMiF,KAAK,mCACXgC,EAAUpgB,MAAM,8BAIlB,IAAIsiB,EAAOlC,EAAUkC,KACrB,IAAIA,EAGH,OAFAnJ,GAAMiF,KAAK,gCACXgC,EAAUpgB,MAAM,2BAGjB,IAAIyiB,EAAQH,EAAKG,MACjB,IAAIA,EAGH,OAFAtJ,GAAMiF,KAAK,4BACXgC,EAAUpgB,MAAM,uBAGjB,IAAI0iB,EAAqC,kBAAlBJ,EAAKI,SAAyBJ,EAAKI,SAAW,IACjEC,EAA2B,kBAAbL,EAAKK,IAAoBL,EAAKK,IAAM,GACtDxJ,GAAMyC,MAAM,uBAAyB6G,EAAQ,cAAgBC,EAAW,WAAaC,EAAM,OAC3FniB,EAAOwhB,WAAWY,WAAWH,EAAOC,EAAUC,GAC9CvC,EAAUpF,UAIX,SAAS6H,EAAclC,EAAUP,IAChCA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnF,IAAI6H,GAAqC,IAAxB1C,EAAU0C,UAC3B3J,GAAMlb,IAAI,qBAAuB0iB,EAAW,kBAAoBmC,EAAY,KAC5EC,EAAcpC,GACd,IAAInC,EAAenB,EAAcsD,GACjC,IAAInC,GAAgBA,EAAaW,SAIhC,cAFO9B,EAAcsD,QACrBP,EAAUpF,UAGX,GAAG8H,EAIF,cAFOzF,EAAcsD,QACrBP,EAAUpF,UAGX,IAAImC,EAGH,OAFAhE,GAAMiF,KAAK,8CACXgC,EAAUpgB,MAAM,yCAGjB,IAAIigB,EAAU,CAAE,MAAS,SAAU,YAAe9G,GAAM+G,aAAa,KAKrE,GAJG1B,EAAarjB,QACf8kB,EAAO,MAAYzB,EAAarjB,OAC9BqhB,IACFyD,EAAO,UAAgBzD,GACrBnB,EAMF,OALA4E,EAAO,WAAiB7C,EACxB6C,EAAO,UAAgBU,EACvBrF,EAAGvN,KAAKnK,KAAKC,UAAUoc,WAChB5C,EAAcsD,QACrBP,EAAUpF,UAGX7B,GAAM2E,YAAYhf,EAAS,IAAMse,EAAY,IAAMuD,EAAU,CAC5D5C,KAAM,OACN3B,gBAAiBA,EACjB1Z,KAAMud,EACNjF,QAAS,SAASqD,GACjBlF,GAAMlb,IAAI,qBACVkb,GAAMyC,MAAMyC,GACS,YAAlBA,EAAI,OACNlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,eAE3DtC,EAAcsD,GACrBP,EAAUpF,WAEXhb,MAAO,SAASke,EAAYC,GAC3BhF,GAAMnZ,MAAMke,EAAa,IAAKC,UAEvBd,EAAcsD,GACrBP,EAAUpF,aAMb,SAASgI,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW8C,GACtD,IAAI1E,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IAAIQ,EAASge,EAAaE,YAC1BvF,GAAMyC,MAAM,eAAgBsH,GACzBA,IACF/J,GAAMyC,MAAM,qBAAsBsH,EAAOC,kBACzChK,GAAMyC,MAAM,qBAAsBsH,EAAOE,mBAG1C,IAAIC,GAAY,EAChB,GAAI7iB,EAAO8iB,UAAaL,EAAMM,SAAU/iB,EAAOgjB,eAGxC,CAEN,KAAMP,EAAMM,QAAUE,EAAmBR,IAAYA,EAAMM,SAAWN,EAAMS,UAAYT,EAAMU,gBAC5FT,EAAOC,kBAAoBD,EAAOC,iBAAiBtlB,OAEpD,GADA2C,EAAO8iB,SAASM,SAASV,EAAOC,iBAAiB,IAC9ChK,GAAM0K,YAAa,CAErB1K,GAAMlb,KAAKglB,EAAMU,aAAe,YAAc,UAAY,gBAAiBT,EAAOC,iBAAiB,IACnG,IAAIW,EAAmB,KAEvB,IADIC,EAAevjB,EAAOme,GAAGqF,oBACVD,EAAalmB,OAAS,EAAG,CAAC,IAAD,uBAC3C,IAAI,IAAJ,EAAQ,EAAKkmB,EAAb,+CAA2B,CAC1B,IADOE,EAAmB,SACpB1F,QAAU0F,EAAE1F,OAAO6D,OAAiC,UAAxB6B,EAAE1F,OAAO6D,MAAMC,MAC9C4B,EAAEC,UAAYD,EAAEC,SAAS9B,OAAmC,UAA1B6B,EAAEC,SAAS9B,MAAMC,KAAmB,CACxEyB,EAAmBG,EACnB,QALyC,mFASzCH,GAAoBA,EAAiBvF,OACvCuF,EAAiBvF,OAAO4F,aAAajB,EAAOC,iBAAiB,IAE7D3iB,EAAOme,GAAGiF,SAASV,EAAOC,iBAAiB,GAAID,QAGhD/J,GAAMlb,KAAKglB,EAAMU,aAAe,YAAc,UAAY,gBAAiBT,EAAOC,iBAAiB,IACnG3iB,EAAOme,GAAGiF,SAASV,EAAOC,iBAAiB,GAAID,GAGjD,KAAMD,EAAMM,QAAUa,EAAmBnB,IAAYA,EAAMM,SAAWN,EAAMoB,UAAYpB,EAAMqB,gBAC5FpB,EAAOE,kBAAoBF,EAAOE,iBAAiBvlB,OAEpD,GADA2C,EAAO8iB,SAASM,SAASV,EAAOE,iBAAiB,IAC9CjK,GAAM0K,YAAa,CAErB1K,GAAMlb,KAAKglB,EAAMqB,aAAe,YAAc,UAAY,gBAAiBpB,EAAOE,iBAAiB,IACnG,IACIW,EADAQ,EAAmB,KAEvB,IADIR,EAAevjB,EAAOme,GAAGqF,oBACVD,EAAalmB,OAAS,EAAG,CAAC,IAAD,uBAC3C,IAAI,IAAJ,EAAQ,EAAKkmB,EAAb,+CAA2B,CAAC,IAApBE,EACP,IADOA,EAAmB,SACpB1F,QAAU0F,EAAE1F,OAAO6D,OAAiC,UAAxB6B,EAAE1F,OAAO6D,MAAMC,MAC9C4B,EAAEC,UAAYD,EAAEC,SAAS9B,OAAmC,UAA1B6B,EAAEC,SAAS9B,MAAMC,KAAmB,CACxEkC,EAAmBN,EACnB,QALyC,mFASzCM,GAAoBA,EAAiBhG,OACvCgG,EAAiBhG,OAAO4F,aAAajB,EAAOE,iBAAiB,IAE7D5iB,EAAOme,GAAGiF,SAASV,EAAOE,iBAAiB,GAAIF,QAGhD/J,GAAMlb,KAAKglB,EAAMqB,aAAe,YAAc,UAAY,gBAAiBpB,EAAOE,iBAAiB,IACnG5iB,EAAOme,GAAGiF,SAASV,EAAOE,iBAAiB,GAAIF,QAvDjD1iB,EAAO8iB,SAAWJ,EAClBG,GAAY,EA2Db,IAAI7iB,EAAOme,GAAI,CACd,IAAI6F,EAAY,CAAC,WAAc1I,EAAY,mBAAsBE,EAAoB,aAAgBC,GACnD,WAA/C9C,GAAMsL,cAAcC,eAAeC,UAErCH,EAAS,aAAoBrL,GAAMsL,cAAcC,eAAeE,QAAU,GAAM,SAAW,gBAE5F,IAAIC,EAAiB,CACpB,SAAY,CAAC,CAAC,sBAAwB,KAMvC,GAJG3I,GACF2I,EAAeC,SAAShnB,KAAK,CAAC,UAAW,IAGvCsiB,EAAU2E,gBAAsD,kBAA7B3E,EAAU2E,eAE/C,IAAI,IAAIrnB,KADRyb,GAAMyC,MAAM,4CAA6CwE,EAAU2E,gBACtD3E,EAAU2E,eACtBF,EAAeC,SAAShnB,KAAKsiB,EAAU2E,eAAernB,IAGN,SAA/Cyb,GAAMsL,cAAcC,eAAeC,UAErCH,EAAUvI,aAAe,cAGvB+I,aAAaC,UAAUC,2BACxBF,aAAaC,UAAUE,4BACtB/E,EAAUgF,kBAAoBhF,EAAUiF,sBAC1C7kB,EAAO4kB,iBAAmBhF,EAAUgF,iBACpC5kB,EAAO6kB,mBAAqBjF,EAAUiF,mBACtCb,EAAS,oCAAyC,EAClDA,EAAS,oCAAyC,EAClDA,EAAS,0BAA+B,GAEzCrL,GAAMlb,IAAI,2BACVkb,GAAMyC,MAAMiJ,GACZrkB,EAAOme,GAAK,IAAI2G,kBAAkBd,EAAWK,GAC7C1L,GAAMyC,MAAMpb,EAAOme,IAChBne,EAAOme,GAAG4G,WACZ/kB,EAAOglB,OAAS,GAChBhlB,EAAOilB,QAAQvkB,MAAQ,eAExBiY,GAAMlb,IAAI,yDAA2DuC,EAAOklB,QAAU,KACtFllB,EAAOme,GAAGgH,2BAA6B,SAAS/jB,GAC5CpB,EAAOme,IACTH,EAAaoH,SAASplB,EAAOme,GAAGkH,qBAElCrlB,EAAOme,GAAGmH,eAAiB,SAASlL,GACnC,IAAKA,EAAM6D,WACuC,SAA/CtF,GAAMsL,cAAcC,eAAeC,SAAsB/J,EAAM6D,UAAUA,UAAU5C,QAAQ,mBAAqB,EAClH1C,GAAMlb,IAAI,sBACVuC,EAAOulB,SAAU,GACK,IAAnBvlB,EAAOklB,QAET5E,EAAqBH,EAAU,CAAC,WAAa,IAiqClD,SAAiBA,EAAUP,IAC1BA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnF,IAAIuD,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAEjC,YADAvF,GAAMiF,KAAK,wCAGZ,IAAI5d,EAASge,EAAaE,YAE1B,GADAvF,GAAMlb,IAAI,gCACNuC,EAAOwlB,MAEV,YADA7M,GAAMiF,KAAK,0DAGZ5d,EAAOwlB,MAAQ,CACd,KAAQxlB,EAAOme,GAAGsH,iBAAiB9nB,KACnC,IAAOqC,EAAOme,GAAGsH,iBAAiBrF,MAEb,IAAnBpgB,EAAOklB,UACTllB,EAAOwlB,MAAP,SAA0B,GAC3B7M,GAAMyC,MAAMwE,GACZ5f,EAAO0lB,SAAU,EACjB9F,EAAUpF,QAAQxa,EAAOwlB,OArrCrBG,CAAQxF,EAAUP,OAEb,CAGN,IAAI3B,EAAY,CACf,UAAa7D,EAAM6D,UAAUA,UAC7B,OAAU7D,EAAM6D,UAAU2H,OAC1B,cAAiBxL,EAAM6D,UAAU4H,gBAEZ,IAAnB7lB,EAAOklB,SAET5E,EAAqBH,EAAUlC,KAIlCje,EAAOme,GAAG2H,QAAU,SAAS1L,GAG5B,GAFAzB,GAAMlb,IAAI,yBACVkb,GAAMyC,MAAMhB,GACRA,EAAM2L,UAEV/lB,EAAOgmB,aAAe5L,EAAM2L,QAAQ,GACpC/H,EAAaiI,eAAejmB,EAAOgmB,eAChC5L,EAAMwH,MAAMsE,SAAf,CAEA,GAAGlmB,EAAO6kB,mBAAoB,CAC7B,IAAIsB,EAAkB,KACE,UAArB/L,EAAMwH,MAAMC,MAAoB7hB,EAAO6kB,mBAAP,MAClCsB,EAAkB/L,EAAMsJ,SAASgB,4BACH,UAArBtK,EAAMwH,MAAMC,MAAoB7hB,EAAO6kB,mBAAP,QACzCsB,EAAkB/L,EAAMsJ,SAASiB,6BAE/BwB,GACFA,EAAgBC,eACdC,YAAYrmB,EAAO6kB,mBAAmBzK,EAAMwH,MAAMC,OAClDyE,OAAOH,EAAgBI,gBAG3B,IAAIC,EAAsB,KAC1B7N,GAAMlb,IAAI,oCAAqC2c,EAAMwH,OACrDxH,EAAMwH,MAAMsE,QAAU,SAASO,GAC9B9N,GAAMlb,IAAI,wBAAyBgpB,GAChCzmB,EAAOgmB,eACT1L,aAAakM,GACbxmB,EAAOgmB,aAAaU,YAAYD,EAAGnlB,QACnC0c,EAAaiI,eAAejmB,EAAOgmB,gBAGrC5L,EAAMwH,MAAM+E,OAAS,SAASF,GAC7B9N,GAAMlb,IAAI,sBAAuBgpB,GAC9BzmB,EAAOgmB,cAAuC,MAAvBQ,IACzBA,EAAsBzM,YAAW,WAChCpB,GAAMlb,IAAI,yBACVuC,EAAOgmB,aAAaU,YAAYD,EAAGnlB,QACnC0c,EAAaiI,eAAejmB,EAAOgmB,cACnCQ,EAAsB,OAGpB,QAGLpM,EAAMwH,MAAMgF,SAAW,SAASH,GAE/B,GADA9N,GAAMlb,IAAI,8BAA+BgpB,GACf,MAAvBD,EACFlM,aAAakM,GACbA,EAAsB,UAEtB,IACCxmB,EAAOgmB,aAAa5C,SAASqD,EAAGnlB,QAChC0c,EAAaiI,eAAejmB,EAAOgmB,cAClC,MAAM5kB,GACPuX,GAAMnZ,MAAM4B,OAMjB,GAAGyhB,GAAaH,EAAQ,CACvB/J,GAAMlb,IAAI,uBACV,IAAIopB,GAAuC,IAAzBjH,EAAUiH,WAC5BnE,EAAOoE,YAAYC,SAAQ,SAASnF,GAEnC,GADAjJ,GAAMlb,IAAI,sBAAuBmkB,GAC7BiF,EAiBH,GAAkB,UAAfjF,EAAMC,KACR7hB,EAAOme,GAAGiF,SAASxB,EAAOc,OACpB,CACN/J,GAAMlb,IAAI,mCAAoCmkB,GAC9C,IAAIrF,EAAcF,EAAeuD,EAAUtD,sBAC3Ctc,EAAOme,GAAG6I,eAAepF,EAAO,CAC/Bnc,UAAW,WACXsgB,QAAS,CAACrD,GACVuE,cAAe,CACd,CAAEC,IAAK,IAAK3O,QAAQ,EAAM4O,WAAY5K,EAAYC,MAClD,CAAE0K,IAAK,IAAK3O,QAAQ,EAAM4O,WAAY5K,EAAYE,OAAQ2K,sBAAuB,GACjF,CAAEF,IAAK,IAAK3O,QAAQ,EAAM4O,WAAY5K,EAAYG,IAAK0K,sBAAuB,UA5BlE,CACf,IAAIrJ,EAAS/d,EAAOme,GAAGiF,SAASxB,EAAOc,GAEvC,GAAG3E,GAAU/d,EAAO4kB,iBAAkB,CACrC,IAAIyC,EAAgB,KACK,UAAtBtJ,EAAO6D,MAAMC,MAAoB7hB,EAAO4kB,iBAAP,MACnCyC,EAAgBtJ,EAAO2G,4BACQ,UAAtB3G,EAAO6D,MAAMC,MAAoB7hB,EAAO4kB,iBAAP,QAC1CyC,EAAgBtJ,EAAO4G,6BAErB0C,GACFA,EAAcjB,eACZC,YAAYrmB,EAAO4kB,iBAAiB7G,EAAO6D,MAAMC,OACjDyE,OAAOe,EAAcd,sBA2nD7B,SAAuB9D,GAEtB,GADA9J,GAAMyC,MAAM,iBAAkBqH,GACoB,SAA/C9J,GAAMsL,cAAcC,eAAeC,QAErC,OADAxL,GAAMiF,KAAK,2CACJ,EAER,YAAa/B,IAAV4G,GAAiC,OAAVA,IAEH,IAAfA,EAAMrlB,MA5mDXkqB,CAAc7E,KAAWziB,EAAO+gB,YAAYpI,GAAM2I,wBACpD3I,GAAMlb,IAAI,iCACV8iB,EAAkBJ,EAAUxH,GAAM2I,qBAAsB,MAAM,GAC9DthB,EAAOme,GAAGoJ,cAAgB,SAASnN,GAClCzB,GAAMlb,IAAI,iCAAkC2c,GAC5CmG,EAAkBJ,EAAU/F,EAAM9S,QAAQrG,MAAOmZ,EAAM9S,QAAQuZ,SAAUzG,EAAM9S,WAI9EtH,EAAO8iB,UACT9E,EAAawJ,cAAcxnB,EAAO8iB,UAG/BzD,EAGHrf,EAAOme,GAAGsJ,qBAAqBpI,GAC7BjgB,MAAK,WAIL,GAHAuZ,GAAMlb,IAAI,gCACVuC,EAAOoe,UAAYiB,EAAKe,IAErBpgB,EAAOwe,YAAcxe,EAAOwe,WAAWnhB,OAAS,EAAG,CACrD,IAAI,IAAIH,EAAI,EAAGA,EAAG8C,EAAOwe,WAAWnhB,OAAQH,IAAK,CAChD,IAAI+gB,EAAYje,EAAOwe,WAAWthB,GAClCyb,GAAMyC,MAAM,2BAA4B6C,GACpCA,IAAqC,IAAxBA,EAAUI,UAK1Bre,EAAOme,GAAGG,gBAAgBL,GAH1Bje,EAAOme,GAAGG,gBAAgB3F,GAAM4F,iBAMlCve,EAAOwe,WAAa,IAsxBzB,SAAsB2B,EAAUsC,EAAO7C,IACtCA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnFmF,EAAU8H,aAAiD,mBAA1B9H,EAAU8H,aAA8B9H,EAAU8H,aAAe/O,GAAM8B,KACxG,IAAIuD,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IAAIQ,EAASge,EAAaE,YACtByJ,GAAqC,IAAxB/H,EAAU+H,UACvBA,EAGHhP,GAAMlb,IAAI,4BAA8BuC,EAAOulB,QAAU,eAAiBoC,EAAY,KAFtFhP,GAAMlb,IAAI,4BAA8BuC,EAAOulB,QAAU,KAI1D,IAAIqC,EAAmB,KACvB,GAAGjP,GAAM0K,YAAa,CAErBuE,EAAmB,GACnB,IAAItE,EAAmB,KAAMS,EAAmB,KAC5CR,EAAevjB,EAAOme,GAAGqF,kBAC7B,GAAGD,GAAgBA,EAAalmB,OAAS,EAAG,CAAC,IAAD,uBAC3C,IAAI,IAAJ,EAAQ,EAAKkmB,EAAb,+CAA2B,CAAC,IAApBE,EAAmB,QACtBA,EAAE1F,QAAU0F,EAAE1F,OAAO6D,OAAiC,UAAxB6B,EAAE1F,OAAO6D,MAAMC,MAC9C4B,EAAEC,UAAYD,EAAEC,SAAS9B,OAAmC,UAA1B6B,EAAEC,SAAS9B,MAAMC,KACjDyB,IACHA,EAAmBG,IAGjBA,EAAE1F,QAAU0F,EAAE1F,OAAO6D,OAAiC,UAAxB6B,EAAE1F,OAAO6D,MAAMC,MAC9C4B,EAAEC,UAAYD,EAAEC,SAAS9B,OAAmC,UAA1B6B,EAAEC,SAAS9B,MAAMC,QACjDkC,IACHA,EAAmBN,KAXqB,mFAiB5C,IAAIoE,EAAY5E,EAAmBR,GAC/BqF,EAAYC,EAAmBtF,GACnC,GAAIoF,GAAcC,GAgBjB,GAAGD,GAAaC,GACf,GAAGxE,EACF,IACKA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,GACnD,MAAMliB,GACPuX,GAAMnZ,MAAM4B,SAGR,GAAGymB,IAAcC,EACvB,IACIxE,IACEA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,IAEpD,MAAMliB,GACPuX,GAAMnZ,MAAM4B,QAEP,IAAIymB,GAAaC,EACvB,GAAGxE,EACF,IACKA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,GACnD,MAAMliB,GACPuX,GAAMnZ,MAAM4B,QAIbkiB,EAAmBtjB,EAAOme,GAAG6I,eAAe,QAAS,CAAEvhB,UAAW,aAClEkT,GAAMlb,IAAI,qCAAsC6lB,QAvDlD,GAAGb,EAAMwF,aAAe3E,EACvB,IACKA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,GACnD,MAAMliB,GACPuX,GAAMnZ,MAAM4B,GAmDf,IAAI8mB,EAAYtE,EAAmBnB,GAC/B0F,EAAYC,EAAmB3F,GACnC,GAAIyF,GAAcC,GAgBjB,GAAGD,GAAaC,GACf,GAAGpE,EACF,IACKA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,GACnD,MAAM3iB,GACPuX,GAAMnZ,MAAM4B,SAGR,GAAG8mB,IAAcC,GACvB,GAAGpE,EACF,IACKA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,GACnD,MAAM3iB,GACPuX,GAAMnZ,MAAM4B,SAGR,IAAI8mB,GAAaC,EACvB,GAAGpE,EACF,IACKA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,GACnD,MAAM3iB,GACPuX,GAAMnZ,MAAM4B,QAIb2iB,EAAmB/jB,EAAOme,GAAG6I,eAAe,QAAS,CAAEvhB,UAAW,aAClEkT,GAAMlb,IAAI,qCAAsCsmB,QAvDlD,GAAGtB,EAAM4F,aAAetE,EACvB,IACKA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,GACnD,MAAM3iB,GACPuX,GAAMnZ,MAAM4B,SAoDdwmB,EADiD,YAA/CjP,GAAMsL,cAAcC,eAAeC,SAAwE,SAA/CxL,GAAMsL,cAAcC,eAAeC,QAC9E,CAClBmE,oBAAqBP,EAAmBtF,GACxC8F,oBAAqBH,EAAmB3F,IAGtB,CAClB+F,UAAW,CACVC,oBAAqBV,EAAmBtF,GACxCiG,oBAAqBN,EAAmB3F,KAK5C9J,GAAMyC,MAAMwM,GAEZ,IAAIe,EAAY/E,EAAmBnB,GACnC,GAAGkG,GAAahB,GAA4D,YAA/ChP,GAAMsL,cAAcC,eAAeC,QAAuB,CAEtFxL,GAAMlb,IAAI,2CACV,IAAIsgB,EAAS/d,EAAOme,GAAGuD,aAAa,GACpC/I,GAAMlb,IAAIsgB,GACV,IAAI6K,EAAa7K,EAAO8K,gBACxBlQ,GAAMlb,IAAImrB,GAEV,IAAIrM,EAAcF,EAAeuD,EAAUtD,sBAC3CyB,EAAO+K,cAAc,CAACC,UAAW,CAChC,CAAE7B,IAAK,OAAQ3O,QAAQ,EAAMyQ,SAAU,OAAQ7B,WAAY5K,EAAYC,MACvE,CAAE0K,IAAK,SAAU3O,QAAQ,EAAMyQ,SAAU,SAAU7B,WAAY5K,EAAYE,QAC3E,CAAEyK,IAAK,MAAO3O,QAAQ,EAAMyQ,SAAU,MAAO7B,WAAY5K,EAAYG,QAGvE1c,EAAOme,GAAG8K,aAAarB,GACrBxoB,MAAK,SAAS8pB,GACdvQ,GAAMyC,MAAM8N,GAGZ,IAAI7J,EAAO,CACV,KAAQ6J,EAAOvrB,KACf,IAAOurB,EAAO9I,KAEfR,EAAU8H,aAAarI,GACvB6J,EAAO9I,IAAMf,EAAKe,IAClBzH,GAAMlb,IAAI,6BACPkrB,GAAahB,IAEmC,WAA/ChP,GAAMsL,cAAcC,eAAeC,QAIrCxL,GAAMiF,KAAK,qFAC6C,YAA/CjF,GAAMsL,cAAcC,eAAeC,SAC5CxL,GAAMiF,KAAK,iEAGb5d,EAAOwlB,MAAQ0D,EAAO9I,IACtBpgB,EAAOme,GAAGgL,oBAAoBD,GAC5B3pB,MAAMqgB,EAAUpgB,OAClBQ,EAAO4nB,iBAAmBA,EACtB5nB,EAAOulB,SAAYvlB,EAAOklB,UAM3BllB,EAAO4kB,kBAAoB5kB,EAAO6kB,sBACpCqE,EAAM,MAAW,GAElBtJ,EAAUpF,QAAQ0O,IAPjBvQ,GAAMlb,IAAI,mCAQTmiB,EAAUpgB,OAjgCXypB,CAAa9I,EAAUsC,EAAO7C,KAC5BA,EAAUpgB,OAokBhB,SAAqB2gB,EAAUsC,EAAO7C,IACrCA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnFmF,EAAU8H,aAAiD,mBAA1B9H,EAAU8H,aAA8B9H,EAAU8H,aAAe/O,GAAM8B,KACxG,IAAIuD,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IAAIQ,EAASge,EAAaE,YACtByJ,GAAqC,IAAxB/H,EAAU+H,UACvBA,EAGHhP,GAAMlb,IAAI,2BAA6BuC,EAAOulB,QAAU,eAAiBoC,EAAY,KAFrFhP,GAAMlb,IAAI,2BAA6BuC,EAAOulB,QAAU,KAKzD,IAAIqC,EAAmB,GACvB,GAAGjP,GAAM0K,YAAa,CAErB,IAAIC,EAAmB,KAAMS,EAAmB,KAC5CR,EAAevjB,EAAOme,GAAGqF,kBAC7B,GAAGD,GAAgBA,EAAalmB,OAAS,EAAG,CAAC,IAAD,uBAC3C,IAAI,IAAJ,EAAQ,EAAKkmB,EAAb,+CAA2B,CAAC,IAApBE,EAAmB,QACtBA,EAAE1F,QAAU0F,EAAE1F,OAAO6D,OAAiC,UAAxB6B,EAAE1F,OAAO6D,MAAMC,MAC9C4B,EAAEC,UAAYD,EAAEC,SAAS9B,OAAmC,UAA1B6B,EAAEC,SAAS9B,MAAMC,KACjDyB,IACHA,EAAmBG,IAIjBA,EAAE1F,QAAU0F,EAAE1F,OAAO6D,OAAiC,UAAxB6B,EAAE1F,OAAO6D,MAAMC,MAC9C4B,EAAEC,UAAYD,EAAEC,SAAS9B,OAAmC,UAA1B6B,EAAEC,SAAS9B,MAAMC,QACjDkC,IACHA,EAAmBN,KAZqB,mFAmB5C,IAAIoE,EAAY5E,EAAmBR,GAC/BqF,EAAYC,EAAmBtF,GAC/BoF,GAAcC,EAYdD,GAAaC,EACZxE,IACEA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,IAE5CuE,IAAcC,EACpBxE,IACEA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,KAE3CuE,GAAaC,IACpBxE,GACEA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,KAGpDA,EAAmBtjB,EAAOme,GAAG6I,eAAe,QAAS,CAAEvhB,UAAW,aAClEkT,GAAMlb,IAAI,qCAAsC6lB,KAvC/Cb,EAAMwF,aAAe3E,IACnBA,EAAiB0E,aACpB1E,EAAiB0E,aAAa,YAE9B1E,EAAiB7d,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0C6lB,IAsCtD,IAAI4E,EAAYtE,EAAmBnB,GAC/B0F,EAAYC,EAAmB3F,GAC/ByF,GAAcC,EAYdD,GAAaC,EACZpE,IACEA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,IAE5CmE,IAAcC,EACpBpE,IACEA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,KAE3CmE,GAAaC,IACpBpE,GACEA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,KAGpDA,EAAmB/jB,EAAOme,GAAG6I,eAAe,QAAS,CAAEvhB,UAAW,aAClEkT,GAAMlb,IAAI,qCAAsCsmB,KAvC/CtB,EAAM4F,aAAetE,IACnBA,EAAiBiE,aACpBjE,EAAiBiE,aAAa,YAE9BjE,EAAiBte,UAAY,WAE9BkT,GAAMlb,IAAI,yCAA0CsmB,SAsCtD6D,EAAgB,oBAA0BG,EAAmBtF,GAC7DmF,EAAgB,oBAA0BQ,EAAmB3F,IAEnB,IAAzB7C,EAAUwJ,aAE3BxB,EAAgB,YAAiB,GAElCjP,GAAMyC,MAAMwM,GAEZ,IAAIe,EAAY/E,EAAmBnB,GACnC,GAAGkG,GAAahB,GAA4D,YAA/ChP,GAAMsL,cAAcC,eAAeC,QAAuB,CAEtFxL,GAAMlb,IAAI,2CACV,IAAIsgB,EAAS/d,EAAOme,GAAGuD,aAAaC,MAAK,SAAS0H,GAAI,MAAwB,UAAjBA,EAAEzH,MAAMC,QACrE,GAAG9D,EAAQ,CACV,IAAI6K,EAAa7K,EAAO8K,gBACpBD,IACHA,EAAa,IAEd,IAAIrM,EAAcF,EAAeuD,EAAUtD,sBAC3CsM,EAAWG,UAAY,CACtB,CAAE7B,IAAK,IAAK3O,QAAQ,EAAM4O,WAAY5K,EAAYC,MAClD,CAAE0K,IAAK,IAAK3O,QAAQ,EAAM4O,WAAY5K,EAAYE,OAAQ2K,sBAAuB,GACjF,CAAEF,IAAK,IAAK3O,QAAQ,EAAM4O,WAAY5K,EAAYG,IAAK0K,sBAAuB,IAE/ErJ,EAAO+K,cAAcF,IAGvB5oB,EAAOme,GAAGmL,YAAY1B,GACpBxoB,MAAK,SAASmqB,GACd5Q,GAAMyC,MAAMmO,GAGZ,IAAIlK,EAAO,CACV,KAAQkK,EAAM5rB,KACd,IAAO4rB,EAAMnJ,KAEdR,EAAU8H,aAAarI,GACvBkK,EAAMnJ,IAAMf,EAAKe,IACjBzH,GAAMlb,IAAI,6BACPkrB,GAAahB,IAEmC,WAA/ChP,GAAMsL,cAAcC,eAAeC,SACW,WAA/CxL,GAAMsL,cAAcC,eAAeC,SACpCxL,GAAMlb,IAAI,kDACV8rB,EAAMnJ,IAwiBX,SAAiCA,GAQhC,IALA,IAAIoJ,EAAQpJ,EAAIqJ,MAAM,QAClBC,GAAQ,EACRC,EAAO,EAAG,GAAKC,EAAW,EAAG,GAC7BC,EAAQ,KAAMC,EAAO,KAAMC,EAAU,KAAM9oB,EAAQ,KACnD+oB,GAAY,EACR9sB,EAAE,EAAGA,EAAEssB,EAAMnsB,OAAQH,IAAK,CAEjC,GADI+sB,EAAQT,EAAMtsB,GAAGgc,MAAM,cAG1B,GAAc,UADD+Q,EAAM,GACI,CAEtB,KAAGN,EAAK,GAAK,GAEN,CAENK,EAAW9sB,EACX,MAJAwsB,GAAQ,OAQT,GAAGC,EAAK,IAAM,EAAG,CAEhBK,EAAW9sB,EACX,YAKH,GAAIwsB,EAAJ,CAEA,IAAI9oB,EAAM4oB,EAAMtsB,GAAGgc,MAAM,gCACzB,GAAGtY,EACF+oB,EAAK,GAAK/oB,EAAI,GACdgpB,EAAS,GAAKhpB,EAAI,GAClB4oB,EAAMU,OAAOhtB,EAAG,GAAIA,QAHrB,CAMA,GAAGysB,EAAK,GAAI,CAiBX,IAhBIzQ,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,kBAEhDE,EAAQ3Q,EAAM,KAEfA,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,iBAE5CG,EAAO5Q,EAAM,KAEdA,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,oBAE5CI,EAAU7Q,EAAM,KAEjBA,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,kBAE5C1oB,EAAQiY,EAAM,IAEkC,IAA9CsQ,EAAMtsB,GAAGme,QAAQ,UAAYuO,EAAS,IAAW,CACnDJ,EAAMU,OAAOhtB,EAAG,GAAIA,IACpB,SAED,GAA6C,IAA1CssB,EAAMtsB,GAAGme,QAAQ,UAAYsO,EAAK,IAAW,CAC/CH,EAAMU,OAAOhtB,EAAG,GAAIA,IACpB,UAGoB,GAAnBssB,EAAMtsB,GAAGG,SACXmsB,EAAMU,OAAOhtB,EAAG,GAAIA,OAItB,GAAGysB,EAAK,GAAK,EAAG,CAEfK,GAAY,EACZN,GAAQ,EACR,IAAQxsB,EAAE,EAAGA,EAAEssB,EAAMnsB,OAAQH,IAAK,CACjC,IAAI+sB,EACJ,GADIA,EAAQT,EAAMtsB,GAAGgc,MAAM,cAG1B,GAAc,UADD+Q,EAAM,GACI,CAEtB,KAAGN,EAAK,GAAK,GAEN,CAENK,EAAW9sB,EACX,MAJAwsB,GAAQ,OAQT,GAAGC,EAAK,IAAM,EAAG,CAEhBK,EAAW9sB,EACX,YAKH,GAAIwsB,EAAJ,CAEA,GAAGC,EAAK,GAAK,EAAG,CACf,IAAIjpB,EAAQ8oB,EAAMtsB,GAAGgc,MAAM,gBAC3B,GAAGxY,EAAO,CACTipB,EAAK,GAAKjpB,EAAM,GAChB8oB,EAAMU,OAAOhtB,EAAG,GAAIA,IACpB,cAEK,CACN,IAAIgc,EAgBJ,IAhBIA,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,kBAEhDE,EAAQ3Q,EAAM,KAEfA,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,iBAE5CG,EAAO5Q,EAAM,KAEdA,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,oBAE5CI,EAAU7Q,EAAM,KAEjBA,EAAQsQ,EAAMtsB,GAAGgc,MAAM,UAAYyQ,EAAK,GAAK,kBAE5C1oB,EAAQiY,EAAM,IAEkC,IAA9CsQ,EAAMtsB,GAAGme,QAAQ,UAAYuO,EAAS,IAAW,CACnDJ,EAAMU,OAAOhtB,EAAG,GAAIA,IACpB,SAED,GAA6C,IAA1CssB,EAAMtsB,GAAGme,QAAQ,UAAYsO,EAAK,IAAW,CAC/CH,EAAMU,OAAOhtB,EAAG,GAAIA,IACpB,UAGqB,IAApBssB,EAAMtsB,GAAGG,SACXmsB,EAAMU,OAAOhtB,EAAG,GAAIA,OAKvB,GAAGysB,EAAK,GAAK,EAGZ,OADAhR,GAAMiF,KAAK,0DACJwC,EAEL4J,EAAW,IAEbA,EAAWR,EAAMnsB,QAIlBssB,EAAK,GAAKQ,KAAKC,MAAoB,WAAdD,KAAK3nB,UAC1BmnB,EAAK,GAAKQ,KAAKC,MAAoB,WAAdD,KAAK3nB,UAC1BonB,EAAS,GAAKO,KAAKC,MAAoB,WAAdD,KAAK3nB,UAC9BonB,EAAS,GAAKO,KAAKC,MAAoB,WAAdD,KAAK3nB,UAE9B,IAAQtF,EAAE,EAAGA,EAAEysB,EAAKtsB,OAAQH,IACxB2sB,IACFL,EAAMU,OAAOF,EAAU,EAAG,UAAYL,EAAKzsB,GAAK,UAAY2sB,GAC5DG,KAEEF,IACFN,EAAMU,OAAOF,EAAU,EAAG,UAAYL,EAAKzsB,GAAK,SAAW4sB,GAC3DE,KAEED,IACFP,EAAMU,OAAOF,EAAU,EAAG,UAAYL,EAAKzsB,GAAK,YAAc6sB,GAC9DC,KAEE/oB,IACFuoB,EAAMU,OAAOF,EAAU,EAAG,UAAYL,EAAKzsB,GAAK,UAAY+D,GAC5D+oB,KAGEH,IACFL,EAAMU,OAAOF,EAAU,EAAG,UAAYJ,EAAS1sB,GAAK,UAAY2sB,GAChEG,KAEEF,IACFN,EAAMU,OAAOF,EAAU,EAAG,UAAYJ,EAAS1sB,GAAK,SAAW4sB,GAC/DE,KAEED,IACFP,EAAMU,OAAOF,EAAU,EAAG,UAAYJ,EAAS1sB,GAAK,YAAc6sB,GAClEC,KAEE/oB,IACFuoB,EAAMU,OAAOF,EAAU,EAAG,UAAYJ,EAAS1sB,GAAK,UAAY+D,GAChE+oB,KAGFR,EAAMU,OAAOF,EAAU,EAAG,oBAAsBL,EAAK,GAAK,IAAMC,EAAS,IACzEJ,EAAMU,OAAOF,EAAU,EAAG,oBAAsBL,EAAK,GAAK,IAAMC,EAAS,IACzEJ,EAAMU,OAAOF,EAAU,EAAG,oBAAsBL,EAAK,GAAK,IAAMC,EAAS,IACzEJ,EAAMU,OAAOF,EAAU,EAAG,oBAAsBL,EAAK,GAAK,IAAMA,EAAK,GAAK,IAAMA,EAAK,KACrFvJ,EAAMoJ,EAAMxqB,KAAK,SACTqrB,SAAS,UAChBjK,GAAO,QACR,OAAOA,EA7uBSkK,CAAwBf,EAAMnJ,MACc,YAA/CzH,GAAMsL,cAAcC,eAAeC,SAC5CxL,GAAMiF,KAAK,iEAGb5d,EAAOwlB,MAAQ+D,EAAMnJ,IACrBpgB,EAAOme,GAAGgL,oBAAoBI,GAC5BhqB,MAAMqgB,EAAUpgB,OAClBQ,EAAO4nB,iBAAmBA,EACtB5nB,EAAOulB,SAAYvlB,EAAOklB,UAM3BllB,EAAO4kB,kBAAoB5kB,EAAO6kB,sBACpC0E,EAAK,MAAW,GAEjB3J,EAAUpF,QAAQ+O,IAPjB5Q,GAAMlb,IAAI,mCAQTmiB,EAAUpgB,OAtyBb8pB,CAAYnJ,EAAUsC,EAAO7C,GA2B/B,SAAS2K,EAAcpK,EAAUoJ,EAAO3J,IACvCA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQgrB,EAC7E,IAAInL,EAAOO,EAAUP,KACrB,GAAGkK,GAASlK,EAGX,OAFA1G,GAAMnZ,MAAM,yCACZogB,EAAUpgB,MAAM,oCAEV,IAAI+pB,KAAWlK,IAASA,EAAK1hB,OAAS0hB,EAAKe,KAGjD,OAFAzH,GAAMnZ,MAAM,kDACZogB,EAAUpgB,MAAM,6CAIjBogB,EAAU6C,MAAoC,kBAApB7C,EAAU6C,OAAsB7C,EAAU6C,MAAS7C,EAAU6C,MAAQ,CAAEgI,OAAO,EAAMf,OAAO,GACrH,IAAIjH,EAAQ7C,EAAU6C,MAClBzE,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IA+iDyB0lB,EA/iDrBllB,EAASge,EAAaE,YAG1B,GAFAle,EAAOklB,SA8iDkBA,EA9iDStF,EAAUsF,QA+iD5CvM,GAAMyC,MAAM,oBAAqB8J,IACb,IAAZA,GA9iDJllB,EAAOme,GAKJ,CAKN,GAJAxF,GAAMlb,IAAI,mCACVglB,EAAMM,QAAS,EAGZnD,EAAU8C,OAET9C,EAAU8C,SAAW1iB,EAAO8iB,UAC9BnK,GAAMlb,IAAI,oDAEL,CAEN,GAAGglB,EAAMS,UAKR,GAJAT,EAAMiI,WAAY,EAClBjI,EAAMU,cAAe,EACrBV,EAAMwF,aAAc,EACpBxF,EAAMoF,WAAY,EACf7nB,EAAO8iB,UAAY9iB,EAAO8iB,SAASH,kBAAoB3iB,EAAO8iB,SAASH,iBAAiBtlB,OAG1F,OAFAsb,GAAMnZ,MAAM,qDACZogB,EAAUpgB,MAAM,qDAGRijB,EAAMwF,aACfxF,EAAMiI,WAAY,EAClBjI,EAAMU,cAAe,EACrBV,EAAMS,UAAW,EACjBT,EAAMoF,WAAY,GACTpF,EAAMU,eACfV,EAAMiI,WAAY,EAClBjI,EAAMS,UAAW,EACjBT,EAAMwF,aAAc,EACpBxF,EAAMoF,WAAY,GAoCnB,GAlCI7nB,EAAO8iB,UAaN9iB,EAAO8iB,SAASH,kBAAgE,IAA5C3iB,EAAO8iB,SAASH,iBAAiBtlB,QAcrE4lB,EAAmBR,IACnBA,EAAMwF,aAAgBxF,EAAMU,eAC9BV,EAAMiI,WAAY,IA3BjBjI,EAAMU,eACRV,EAAMiI,WAAY,EAClBjI,EAAMU,cAAe,EACrBV,EAAMS,UAAW,EACjBT,EAAMoF,WAAY,GAEhB5E,EAAmBR,KACrBA,EAAMiI,WAAY,EAClBjI,EAAMS,UAAW,IAwBhBT,EAAMoB,UAKR,GAJApB,EAAMkI,WAAY,EAClBlI,EAAMqB,cAAe,EACrBrB,EAAM4F,aAAc,EACpB5F,EAAMyF,WAAY,EACfloB,EAAO8iB,UAAY9iB,EAAO8iB,SAASF,kBAAoB5iB,EAAO8iB,SAASF,iBAAiBvlB,OAG1F,OAFAsb,GAAMnZ,MAAM,qDACZogB,EAAUpgB,MAAM,qDAGRijB,EAAM4F,aACf5F,EAAMkI,WAAY,EAClBlI,EAAMqB,cAAe,EACrBrB,EAAMoB,UAAW,EACjBpB,EAAMyF,WAAY,GACTzF,EAAMqB,eACfrB,EAAMkI,WAAY,EAClBlI,EAAMoB,UAAW,EACjBpB,EAAM4F,aAAc,EACpB5F,EAAMyF,WAAY,GAEfloB,EAAO8iB,UAaN9iB,EAAO8iB,SAASF,kBAAgE,IAA5C5iB,EAAO8iB,SAASF,iBAAiBvlB,QAcrEumB,EAAmBnB,IAAWA,EAAM4F,aAAgB5F,EAAMqB,eAC5DrB,EAAMkI,WAAY,IA1BjBlI,EAAMqB,eACRrB,EAAMkI,WAAY,EAClBlI,EAAMqB,cAAe,EACrBrB,EAAMoB,UAAW,EACjBpB,EAAMyF,WAAY,GAEhBtE,EAAmBnB,KACrBA,EAAMkI,WAAY,EAClBlI,EAAMoB,UAAW,IAuBhBpB,EAAMmI,UACRnI,EAAMrlB,MAAO,GAIf,GAAI6lB,EAAmBR,IAAUA,EAAMiI,WACpC9G,EAAmBnB,IAAUA,EAAMkI,UAGrC,OAFA3M,EAAa6M,eAAc,QAC3BrI,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW5f,EAAO8iB,eApItDL,EAAMM,QAAS,EACfN,EAAMiI,WAAY,EAClBjI,EAAMkI,WAAY,EAuInB,GAAGlI,EAAMM,SAAW/iB,EAAOgjB,eAAgB,CAC1C,GAAGP,EAAMwF,aAAexF,EAAMU,aAAc,CAC3C,GAAGnjB,EAAO8iB,UAAY9iB,EAAO8iB,SAASH,kBAAoB3iB,EAAO8iB,SAASH,iBAAiBtlB,OAAQ,CAClG,IAAIytB,EAAK9qB,EAAO8iB,SAASH,iBAAiB,GAC1ChK,GAAMlb,IAAI,wBAAyBqtB,GACnC9qB,EAAO8iB,SAAS4D,YAAYoE,GAC5B,IACCA,EAAGC,OACF,MAAM3pB,KAET,GAAGpB,EAAOme,GAAGuD,cAAgB1hB,EAAOme,GAAGuD,aAAarkB,OAAQ,CAC3D,IAAI2tB,GAAK,EAKT,GAJGvI,EAAMU,cAAgBxK,GAAM0K,cAE9B2H,GAAK,GAEHA,EAAI,CAAC,IAAD,uBACN,IAAI,IAAJ,EAAQ,EAAQhrB,EAAOme,GAAGuD,aAA1B,+CAAwC,CAAC,IAAjCuJ,EAAgC,QACpCA,GAAQA,EAAKrJ,OAA6B,UAApBqJ,EAAKrJ,MAAMC,OACnClJ,GAAMlb,IAAI,yBAA0BwtB,GACpCjrB,EAAOme,GAAGuI,YAAYuE,KAJlB,qFAUT,GAAGxI,EAAM4F,aAAe5F,EAAMqB,aAAc,CAC3C,GAAG9jB,EAAO8iB,UAAY9iB,EAAO8iB,SAASF,kBAAoB5iB,EAAO8iB,SAASF,iBAAiBvlB,OAAQ,CAClG,IAAI6tB,EAAKlrB,EAAO8iB,SAASF,iBAAiB,GAC1CjK,GAAMlb,IAAI,wBAAyBytB,GACnClrB,EAAO8iB,SAAS4D,YAAYwE,GAC5B,IACCA,EAAGH,OACF,MAAM3pB,KAET,GAAGpB,EAAOme,GAAGuD,cAAgB1hB,EAAOme,GAAGuD,aAAarkB,OAAQ,CAC3D,IAAI8tB,GAAK,EAKT,GAJG1I,EAAMqB,cAAgBnL,GAAM0K,cAE9B8H,GAAK,GAEHA,EAAI,CAAC,IAAD,uBACN,IAAI,IAAJ,EAAQ,EAAQnrB,EAAOme,GAAGuD,aAA1B,+CAAwC,CAAC,IAAjC0J,EAAgC,QACpCA,GAAQA,EAAKxJ,OAA6B,UAApBwJ,EAAKxJ,MAAMC,OACnClJ,GAAMlb,IAAI,yBAA0B2tB,GACpCprB,EAAOme,GAAGuI,YAAY0E,KAJlB,sFAYV,GAAGxL,EAAU8C,OAAQ,CACpB,IAAIA,EAAS9C,EAAU8C,OAIvB,GAHA/J,GAAMlb,IAAI,2CACVkb,GAAMyC,MAAMsH,GAETD,EAAMM,QACL/iB,EAAO8iB,UAAY9iB,EAAO8iB,WAAalD,EAAU8C,SAAW1iB,EAAOgjB,eAAgB,CAErF,IAEC,IAAIqI,EAASrrB,EAAO8iB,SAASgE,YAF1B,uBAGH,IAAI,IAAJ,EAAQ,EAAOuE,EAAf,+CAAuB,CAAC,IAAhBC,EAAe,QACtB3S,GAAMlb,IAAI6tB,GACPA,GACFA,EAAIP,QANH,mFAQF,MAAM3pB,IAGRpB,EAAO8iB,SAAW,KAOpB,OAHA9iB,EAAOgjB,gBAAiB,EACxBhF,EAAa6M,eAAc,QAC3BrI,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW8C,GAG/C,GAAGO,EAAmBR,IAAUmB,EAAmBnB,GAAQ,CAC1D,IAAI9J,GAAM4S,0BAET,YADA3L,EAAUpgB,MAAM,8BAGjB,IAAIgsB,EAAc,CAAEhD,UAAW,GAAIlE,SAAU,IAC7CtG,EAAa6M,eAAc,GAC3B,IAAIY,EAAexI,EAAmBR,GACnCgJ,GAAgBhJ,GAAgC,kBAAhBA,EAAMgI,QACxCgB,EAAehJ,EAAMgI,OACtB,IAAIiB,EAAe9H,EAAmBnB,GACtC,GAAGiJ,GAAgBjJ,EAAO,CACzB,IAAIkF,GAAqC,IAAxB/H,EAAU+H,UACvBd,GAAuC,IAAzBjH,EAAUiH,WAG5B,IAFIc,IAAad,GAAgBxH,GAASoD,EAAMiH,QAC/CjH,EAAMiH,MAAQ,SACZjH,EAAMiH,OAAwB,UAAfjH,EAAMiH,OAAoC,UAAfjH,EAAMiH,MAClD,GAA0B,kBAAhBjH,EAAMiH,MACfgC,EAAejJ,EAAMiH,UACf,CACN,IAAI5gB,EAAQ,EACRiC,EAAS,EACM,WAAhB0X,EAAMiH,OAER3e,EAAS,IACG,IACZjC,EAAQ,KACiB,gBAAhB2Z,EAAMiH,OAEf3e,EAAS,IACG,IACZjC,EAAQ,KACiB,UAAhB2Z,EAAMiH,OAAqC,eAAhBjH,EAAMiH,OAA0C,UAAhBjH,EAAMiH,OAE1E3e,EAAS,IACG,IACZjC,EAAQ,MACiB,WAAhB2Z,EAAMiH,OAEf3e,EAAS,KACG,KACZjC,EAAQ,MACiB,UAAhB2Z,EAAMiH,OAEf3e,EAAS,KACG,KACZjC,EAAQ,MACiB,WAAhB2Z,EAAMiH,OAEf3e,EAAS,IACG,IACZjC,EAAQ,KACiB,gBAAhB2Z,EAAMiH,OAEf3e,EAAS,IACG,IACZjC,EAAQ,MAER6P,GAAMlb,IAAI,uCACVsN,EAAS,IACG,IACZjC,EAAQ,KAET6P,GAAMlb,IAAI,2BAA4BglB,EAAMiH,OAC5CgC,EAAe,CACd,OAAU,CAAC,MAAS3gB,GACpB,MAAS,CAAC,MAASjC,IAEpB6P,GAAMlb,IAAI,2BAA4BiuB,QAEjC,GAAmB,WAAhBjJ,EAAMiH,OAAsC,WAAhBjH,EAAMiH,MAAoB,KAoCtDiC,EAAT,SAA4BnsB,EAAOkjB,GAClC1E,EAAa6M,eAAc,GACxBrrB,EACFogB,EAAUpgB,MAAMA,GAEhBgjB,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW8C,IAGvCkJ,EAAT,SAAwBJ,EAAaK,EAAaC,GACjDnT,GAAMlb,IAAI,4CACVkb,GAAMyC,MAAMoQ,GACZ1S,UAAUC,aAAagT,aAAaP,GAClCpsB,MAAK,SAASsjB,GACXoJ,EACFhT,UAAUC,aAAagT,aAAa,CAAEtB,OAAO,EAAMf,OAAO,IACzDtqB,MAAK,SAAU4sB,GACftJ,EAAOU,SAAS4I,EAAYrJ,iBAAiB,IAC7CkJ,EAAY,KAAMnJ,MAGnBmJ,EAAY,KAAMnJ,MAGnBnjB,OAAM,SAASC,GAASwe,EAAa6M,eAAc,GAAQgB,EAAYrsB,OA1D1E,GAAGsZ,UAAUC,cAAgBD,UAAUC,aAAaC,gBA+BnD,OA3BAwS,EAAY9B,MAAQ,GACjBjH,EAAMwJ,uBACRT,EAAY9B,MAAMwC,UAAYzJ,EAAMwJ,sBAElCxJ,EAAM0J,oBACRX,EAAY9B,MAAM3e,OAAS0X,EAAM0J,mBAE/B1J,EAAM2J,mBACRZ,EAAY9B,MAAM5gB,MAAQ2Z,EAAM2J,kBAEjCZ,EAAYf,MAAQhI,EAAM4J,yBAC1BvT,UAAUC,aAAaC,gBAAgBwS,GACrCpsB,MAAK,SAASsjB,GACd1E,EAAa6M,eAAc,GACxB5H,EAAmBR,KAAWA,EAAMiI,UACtC5R,UAAUC,aAAagT,aAAa,CAAEtB,OAAO,EAAMf,OAAO,IACzDtqB,MAAK,SAAU4sB,GACftJ,EAAOU,SAAS4I,EAAYrJ,iBAAiB,IAC7CH,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW8C,MAG/CF,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW8C,MAE7C,SAAUljB,GACZwe,EAAa6M,eAAc,GAC3BjL,EAAUpgB,MAAMA,MA+BnB,GAAkD,WAA/CmZ,GAAMsL,cAAcC,eAAeC,QAAsB,CAC3D,IAAIhL,EAAYR,GAAMsL,cAAcC,eAAeE,QAC/C/K,EAAS,GACVze,OAAOke,UAAUG,UAAUC,MAAM,WACnCG,EAAS,IACPF,GAAa,IAAMA,GAAaE,GAElCmS,EAAc,CACb9B,MAAO,CACNlB,UAAW,CACV8D,iBAAiB,EACjBC,SAAU3xB,OAAO4xB,OAAO1jB,MACxB2jB,UAAW7xB,OAAO4xB,OAAOzhB,OACzB2hB,aAAcjK,EAAMwJ,qBACpBU,aAAclK,EAAMwJ,qBACpBW,kBAAmB,WAGrBnC,MAAOxH,EAAmBR,KAAWA,EAAMiI,WAE5CkB,EAAeJ,EAAaG,IAG5BhT,GAAMW,UAAUM,WAAU,SAAUpa,EAAO8G,GAC1C,GAAI9G,EAEH,OADAwe,EAAa6M,eAAc,GACpBjL,EAAUpgB,MAAMA,IAExBgsB,EAAc,CACbf,OAAO,EACPf,MAAO,CACNlB,UAAW,CACVoE,kBAAmB,UACnBL,SAAU3xB,OAAO4xB,OAAO1jB,MACxB2jB,UAAW7xB,OAAO4xB,OAAOzhB,OACzB2hB,aAAcjK,EAAMwJ,qBACpBU,aAAclK,EAAMwJ,sBAErB3H,SAAU,CACT,CAACgI,iBAAiB,GAClB,CAACO,+BAA+B,OAIvBnD,MAAMlB,UAAUsE,oBAAsBxmB,EAClDslB,EAAeJ,EAAaG,EAC3B1I,EAAmBR,KAAWA,EAAMiI,mBAGjC,GAAkD,YAA/C/R,GAAMsL,cAAcC,eAAeC,QAAuB,CACnE,KAAGxL,GAAMsL,cAAcC,eAAeE,SAAW,IA2B1C,CACN,IAAI5kB,EAAQ,IAAIwa,MAAM,2BAItB,OAHAxa,EAAM+B,KAAO,+GACbyc,EAAa6M,eAAc,QAC3BjL,EAAUpgB,MAAMA,GA7BhBgsB,EAAc,CACb9B,MAAO,CACNqD,eAAgBtK,EAAMiH,MACtBsD,YAAavK,EAAMiH,OAEpBe,MAAOxH,EAAmBR,KAAWA,EAAMiI,WAE5CkB,EAAeJ,GAAa,SAAUyB,EAAKvK,GAG1C,GAFAiJ,EAAkBsB,EAAKvK,IAElBuK,EACJ,IAAIC,EAAWxK,EAAOyK,YAClBC,EAAQxyB,OAAOyyB,aAAY,WAC1B3K,GACH9nB,OAAO0yB,cAAcF,GACnB1K,EAAOyK,aAAeD,IACxBtyB,OAAO0yB,cAAcF,GAClB1K,EAAOwD,SACTxD,EAAOwD,WAGTgH,EAAWxK,EAAOyK,cAChB,QAWP,QAIE1K,GAAyB,WAAhBA,EAAMiH,OAElB5Q,UAAUC,aAAawU,mBAAmBnuB,MAAK,SAASouB,GACvD,IAAIC,EAAaD,EAAQE,MAAK,SAASC,GACtC,MAAuB,eAAhBA,EAAO9L,QAEf+L,EAmlCJ,SAA6BnL,GAE5B,GADA9J,GAAMyC,MAAM,uBAAwBqH,IAC/BA,EACJ,OAAO,EACR,GAA2B,kBAAhBA,EAAMiH,OAAuD,kBAA1BjH,EAAMiH,MAAMlB,UACzD,OAAO,EACR,IAAIgD,EAAc/I,EAAMiH,MAAMlB,UAC9B,GAAIgD,EAAYoB,kBACf,MAAyC,YAAlCpB,EAAYoB,mBAAqE,WAAlCpB,EAAYoB,kBAC9D,GAAIpB,EAAYuB,eACpB,MAAsC,WAA/BvB,EAAYuB,gBAA8D,WAA/BvB,EAAYuB,eAC1D,GAAIvB,EAAYwB,YACpB,MAAmC,WAA5BxB,EAAYwB,aAAwD,WAA5BxB,EAAYwB,YAC5D,OAAO,EAhmCSa,CAAoBpL,IAAU+K,EAAQE,MAAK,SAASC,GAChE,MAAuB,eAAhBA,EAAO9L,QAIXgG,EAAY5E,EAAmBR,GAC/ByF,EAAYtE,EAAmBnB,GAC/BqL,EAqhCR,SAA6BrL,GAE5B,OADA9J,GAAMyC,MAAM,uBAAwBqH,KAChCA,KAEe,IAAhBA,EAAMgI,QAAuC,IAApBhI,EAAMoF,iBAEPhM,IAAxB4G,EAAMsL,eAAuD,OAAxBtL,EAAMsL,gBAEd,IAAxBtL,EAAMsL,gBA7hCWC,CAAoBvL,GACtCwL,EAqjCR,SAA6BxL,GAE5B,OADA9J,GAAMyC,MAAM,uBAAwBqH,KAChCA,KAEe,IAAhBA,EAAMiH,QAAuC,IAApBjH,EAAMyF,iBAEPrM,IAAxB4G,EAAMyL,eAAuD,OAAxBzL,EAAMyL,gBAEd,IAAxBzL,EAAMyL,gBA7jCWC,CAAoB1L,GAC1C,GAAGoF,GAAaK,GAAa4F,GAAmBG,EAAiB,CAEhE,IAAIG,IAAkBvG,GAAY4F,EAC9BY,IAAkBnG,GAAY0F,EAClC,IAAIQ,IAAoBC,EAIvB,OAFArQ,EAAa6M,eAAc,GAC3BjL,EAAUpgB,MAAM,4BACT,EACD,IAAI4uB,GAAmBN,EAG7B,OAFA9P,EAAa6M,eAAc,GAC3BjL,EAAUpgB,MAAM,2DACT,EACD,IAAI6uB,GAAmBJ,EAG7B,OAFAjQ,EAAa6M,eAAc,GAC3BjL,EAAUpgB,MAAM,2DACT,EAIT,IAAI8uB,EAAiB,CACpB7D,SAAQgD,GAAehL,EAAMiI,YAAae,EAC1C/B,SAAQkE,GAAenL,EAAMkI,YAAae,GAE3C/S,GAAMyC,MAAM,2BAA4BkT,GACnCA,EAAe7D,OAAU6D,EAAe5E,MAI5C5Q,UAAUC,aAAagT,aAAauC,GAClClvB,MAAK,SAASsjB,GACd1E,EAAa6M,eAAc,GAC3BrI,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW8C,MAC5CnjB,OAAM,SAASC,GACjBwe,EAAa6M,eAAc,GAC3BjL,EAAUpgB,MAAM,CAAC0f,KAAM1f,EAAM0f,KAAM3d,KAAM/B,EAAM+B,KAAMuU,QAAStW,EAAMsW,cATtEkI,EAAa6M,eAAc,GAC3BrI,EAAYrC,EAAUd,EAAMoD,EAAO7C,EAAW8C,OAY/CnjB,OAAM,SAASC,GACfwe,EAAa6M,eAAc,GAC3BjL,EAAUpgB,MAAM,yBAA0BA,WAK5CgjB,EAAYrC,EAAUd,EAAMoD,EAAO7C,GAIrC,SAAS2O,EAAkBpO,EAAUP,IACpCA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQgrB,EAC7E,IAAInL,EAAOO,EAAUP,KACjBrB,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAGjC,OAFAvF,GAAMiF,KAAK,uBACXgC,EAAUpgB,MAAM,kBAGjB,IAAIQ,EAASge,EAAaE,YAC1B,GAAGmB,EAAM,CACR,IAAIrf,EAAOme,GAGV,OAFAxF,GAAMiF,KAAK,kGACXgC,EAAUpgB,MAAM,sFAGjBQ,EAAOme,GAAGsJ,qBAAqBpI,GAC7BjgB,MAAK,WAIL,GAHAuZ,GAAMlb,IAAI,gCACVuC,EAAOoe,UAAYiB,EAAKe,IAErBpgB,EAAOwe,YAAcxe,EAAOwe,WAAWnhB,OAAS,EAAG,CACrD,IAAI,IAAIH,EAAI,EAAGA,EAAG8C,EAAOwe,WAAWnhB,OAAQH,IAAK,CAChD,IAAI+gB,EAAYje,EAAOwe,WAAWthB,GAClCyb,GAAMyC,MAAM,2BAA4B6C,GACpCA,IAAqC,IAAxBA,EAAUI,UAK1Bre,EAAOme,GAAGG,gBAAgBL,GAH1Bje,EAAOme,GAAGG,gBAAgB3F,GAAM4F,iBAMlCve,EAAOwe,WAAa,GAGrBoB,EAAUpF,YACRoF,EAAUpgB,YAEdogB,EAAUpgB,MAAM,gBA6dlB,SAASgvB,EAAUrO,EAAUsO,GAC5B,IAAIzQ,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAEjC,OADAvF,GAAMiF,KAAK,kBACJ,EAER,IAAI8E,EAAS+L,EAAS,SAAW,QAC7BzuB,EAASge,EAAaE,YAK1B,OAJIle,EAAOglB,OAAOtC,KACjB1iB,EAAOglB,OAAOtC,GAAU,CAAEhiB,MAAO,KAG/BV,EAAOme,GAAG4G,UAA4D,WAA/CpM,GAAMsL,cAAcC,eAAeC,SACZ,WAA/CxL,GAAMsL,cAAcC,eAAeC,SA4BpCxL,GAAMiF,KAAK,eAAiB8E,EAAS,kCAC9B,GA5BJ+L,IAAWzuB,EAAOgmB,cACpBrN,GAAMiF,KAAK,6BACJ,GACG6Q,GAAWzuB,EAAO8iB,SAIzB9iB,EAAOglB,OAAOtC,GAAQgM,MAgBnB1uB,EAAOglB,OAAOtC,GAAQhiB,OAf5BiY,GAAMlb,IAAI,YAAcilB,EAAS,mBACjC1iB,EAAOglB,OAAOtC,GAAQgM,MAAQrB,aAAY,WACzCrtB,EAAOme,GAAG4G,WACR3lB,MAAK,SAASuvB,GACdA,EAAM5H,SAAQ,SAAU6H,GACnBA,GAAoB,UAAbA,EAAI/M,OAEX4M,IAAWG,EAAIC,eAAmBJ,GAAuB,iBAAbG,EAAIjxB,OAEpDqC,EAAOglB,OAAOtC,GAAQhiB,MAASkuB,EAAIE,WAAaF,EAAIE,WAAa,YAGlE,KACI,IAjBPnW,GAAMiF,KAAK,4BACJ,GA2BV,SAASmR,EAAQ5O,EAAUuJ,GAC1B,IAAI1L,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAEjC,OADAvF,GAAMiF,KAAK,mBACJ,EAER,IAAI5d,EAASge,EAAaE,YAC1B,OAAIle,EAAOme,GAIPne,EAAO8iB,SAIR4G,EAEE1pB,EAAO8iB,SAASF,kBAAgE,IAA5C5iB,EAAO8iB,SAASF,iBAAiBvlB,QAIjE2C,EAAO8iB,SAASF,iBAAiB,GAAGoM,SAH3CrW,GAAMiF,KAAK,mBACJ,GAKJ5d,EAAO8iB,SAASH,kBAAgE,IAA5C3iB,EAAO8iB,SAASH,iBAAiBtlB,QAIjE2C,EAAO8iB,SAASH,iBAAiB,GAAGqM,SAH3CrW,GAAMiF,KAAK,mBACJ,IAdRjF,GAAMiF,KAAK,8BACJ,IALPjF,GAAMiF,KAAK,2BACJ,GAuBT,SAASqR,EAAK9O,EAAUuJ,EAAOuF,GAC9B,IAAIjR,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAEjC,OADAvF,GAAMiF,KAAK,mBACJ,EAER,IAAI5d,EAASge,EAAaE,YAC1B,OAAIle,EAAOme,GAIPne,EAAO8iB,SAIR4G,EAEE1pB,EAAO8iB,SAASF,kBAAgE,IAA5C5iB,EAAO8iB,SAASF,iBAAiBvlB,QAIzE2C,EAAO8iB,SAASF,iBAAiB,GAAGoM,SAAWC,GACxC,IAJNtW,GAAMiF,KAAK,mBACJ,GAMJ5d,EAAO8iB,SAASH,kBAAgE,IAA5C3iB,EAAO8iB,SAASH,iBAAiBtlB,QAIzE2C,EAAO8iB,SAASH,iBAAiB,GAAGqM,SAAWC,GACxC,IAJNtW,GAAMiF,KAAK,mBACJ,IAfRjF,GAAMiF,KAAK,8BACJ,IALPjF,GAAMiF,KAAK,2BACJ,GAyBT,SAASsR,EAAW/O,GACnB,IAAInC,EAAenB,EAAcsD,GACjC,IAAInC,IAAiBA,EAAaE,YAEjC,OADAvF,GAAMiF,KAAK,kBACJ,iBAER,IAAI5d,EAASge,EAAaE,YAC1B,OAAIle,EAAOme,GAGRne,EAAOme,GAAG4G,SACR/kB,EAAOilB,QAAQyJ,MA8CZ1uB,EAAOilB,QAAQvkB,OA7CrBiY,GAAMlb,IAAI,yCACVuC,EAAOilB,QAAQyJ,MAAQrB,aAAY,WAClCrtB,EAAOme,GAAG4G,WACR3lB,MAAK,SAASuvB,GACdA,EAAM5H,SAAQ,SAAU6H,GACvB,GAAIA,EAAJ,CAEA,IAAIO,GAAU,EAYd,IAVsB,UAAlBP,EAAIQ,WAAyBR,EAAIlvB,GAAG2vB,cAAchU,QAAQ,UAAY,IAC3D,gBAAbuT,EAAIjxB,MAA0BixB,EAAIlvB,GAAG2b,QAAQ,QAAU,EAExD8T,GAAU,EACW,QAAZP,EAAIjxB,OAAkBixB,EAAIU,eACX,QAAtBV,EAAIW,eAAiD,KAAtBX,EAAIW,gBAErCJ,GAAU,GAGRA,EAGF,GAFAnvB,EAAOilB,QAAQuK,MAAQZ,EAAIU,cAC3BtvB,EAAOilB,QAAQwK,MAAQb,EAAIc,UACI,OAA5B1vB,EAAOilB,QAAQ0K,UAAiD,OAA5B3vB,EAAOilB,QAAQ2K,SAErD5vB,EAAOilB,QAAQ0K,SAAW3vB,EAAOilB,QAAQuK,MACzCxvB,EAAOilB,QAAQ2K,SAAW5vB,EAAOilB,QAAQwK,UACnC,CAEN,IAAII,EAAa7vB,EAAOilB,QAAQwK,MAAQzvB,EAAOilB,QAAQ2K,SACL,WAA/CjX,GAAMsL,cAAcC,eAAeC,UACrC0L,GAAwB,KACzB,IAAIC,EAAU3F,KAAK4F,MAAyD,GAAlD/vB,EAAOilB,QAAQuK,MAAQxvB,EAAOilB,QAAQ0K,UAAgBE,GAC9B,WAA/ClX,GAAMsL,cAAcC,eAAeC,UACrC2L,EAAU1W,SAAS0W,EAAQ,MAC5B9vB,EAAOilB,QAAQvkB,MAAQovB,EAAU,aAEjC9vB,EAAOilB,QAAQ0K,SAAW3vB,EAAOilB,QAAQuK,MACzCxvB,EAAOilB,QAAQ2K,SAAW5vB,EAAOilB,QAAQwK,gBAK5C,KACI,gBAIR9W,GAAMiF,KAAK,oDACJ,kCApDA,yBAwDT,SAAS4M,EAAYhrB,GACpBmZ,GAAMnZ,MAAM,gBAAiBA,GAG9B,SAAS+iB,EAAcpC,EAAU6P,GAChCrX,GAAMlb,IAAI,yBACV,IAAIugB,EAAenB,EAAcsD,GACjC,GAAInC,EAAJ,CAIA,IAAIhe,EAASge,EAAaE,YAC1B,GAAGle,EAAQ,CACV,IAAqB,IAAlBgwB,EAAwB,CAE1B,IAAIvQ,EAAU,CAAE,MAAS,SAAU,YAAe9G,GAAM+G,aAAa,KAClE1B,EAAarjB,QACf8kB,EAAO,MAAYzB,EAAarjB,OAC9BqhB,IACFyD,EAAO,UAAgBzD,GACxBrD,GAAMyC,MAAM,kCAAoC+E,EAAW,MAC3DxH,GAAMyC,MAAMqE,GACT5E,GACF4E,EAAO,WAAiB7C,EACxB6C,EAAO,UAAgBU,EACvBrF,EAAGvN,KAAKnK,KAAKC,UAAUoc,KAEvB9G,GAAM2E,YAAYhf,EAAS,IAAMse,EAAY,IAAMuD,EAAU,CAC5D5C,KAAM,OACN3B,gBAAiBA,EACjB1Z,KAAMud,IAKTzf,EAAOgmB,aAAe,KACnBhmB,EAAOglB,SACNhlB,EAAOglB,OAAP,OAA0BhlB,EAAOglB,OAAP,MAAuB0J,OACnDpB,cAActtB,EAAOglB,OAAP,MAAuB0J,OACnC1uB,EAAOglB,OAAP,QAA2BhlB,EAAOglB,OAAP,OAAwB0J,OACrDpB,cAActtB,EAAOglB,OAAP,OAAwB0J,QAExC1uB,EAAOglB,OAAS,GACbhlB,EAAOilB,QAAQyJ,OACjBpB,cAActtB,EAAOilB,QAAQyJ,OAC9B1uB,EAAOilB,QAAQyJ,MAAQ,KACvB1uB,EAAOilB,QAAQuK,MAAQ,KACvBxvB,EAAOilB,QAAQ0K,SAAW,KAC1B3vB,EAAOilB,QAAQwK,MAAQ,KACvBzvB,EAAOilB,QAAQ2K,SAAW,KAC1B5vB,EAAOilB,QAAQvkB,MAAQ,KACvB,IAEC,IAAIV,EAAOgjB,gBAAkBhjB,EAAO8iB,SAAU,CAC7CnK,GAAMlb,IAAI,gCACV,IAAI4tB,EAASrrB,EAAO8iB,SAASgE,YAFgB,uBAG7C,IAAI,IAAJ,EAAQ,EAAOuE,EAAf,+CAAuB,CAAC,IAAhBC,EAAe,QACtB3S,GAAMlb,IAAI6tB,GACPA,GACFA,EAAIP,QANuC,oFAS7C,MAAM3pB,IAGRpB,EAAOgjB,gBAAiB,EACxBhjB,EAAO8iB,SAAW,KAElB,IACC9iB,EAAOme,GAAG9W,QACT,MAAMjG,IAGRpB,EAAOme,GAAK,KACZne,EAAOwe,WAAa,KACpBxe,EAAOwlB,MAAQ,KACfxlB,EAAOoe,UAAY,KACnBpe,EAAOulB,SAAU,EACjBvlB,EAAO+gB,YAAc,GACrB/gB,EAAOwhB,WAAa,KACpBxhB,EAAO4kB,iBAAmB,KAC1B5kB,EAAO6kB,mBAAqB,KAE7B7G,EAAaiS,aA6Md,SAAShN,EAAmBR,GAE3B,OADA9J,GAAMyC,MAAM,sBAAuBqH,IAC/BA,IAEe,IAAhBA,EAAMgI,aAEc5O,IAApB4G,EAAMoF,WAA+C,OAApBpF,EAAMoF,YAEd,IAApBpF,EAAMoF,WAcf,SAASE,EAAmBtF,GAE3B,OADA9J,GAAMyC,MAAM,sBAAuBqH,IAC/BA,IAEe,IAAhBA,EAAMgI,aAEc5O,IAApB4G,EAAMqF,WAA+C,OAApBrF,EAAMqF,YAEd,IAApBrF,EAAMqF,WAGf,SAASlE,EAAmBnB,GAE3B,OADA9J,GAAMyC,MAAM,sBAAuBqH,IAC/BA,IAEe,IAAhBA,EAAMiH,aAEc7N,IAApB4G,EAAMyF,WAA+C,OAApBzF,EAAMyF,YAEd,IAApBzF,EAAMyF,WAcf,SAASE,EAAmB3F,GAE3B,OADA9J,GAAMyC,MAAM,sBAAuBqH,IAC/BA,IAEe,IAAhBA,EAAMiH,aAEc7N,IAApB4G,EAAM0F,WAA+C,OAApB1F,EAAM0F,YAEd,IAApB1F,EAAM0F,WAl6FfxI,EAAcpF,GAGdxf,KAAKm1B,UAAY,WAAa,OAAO5xB,GACrCvD,KAAKo1B,YAAc,WAAa,OAAOxT,GACvC5hB,KAAKq1B,UAAY,SAASxQ,IACzBA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnFmF,EAAS,WAAgB,EACzBD,EAAcC,IAEf7kB,KAAKs1B,aAAe,WAAa,OAAOzT,GACxC7hB,KAAKu1B,QAAU,SAAS1Q,IAyZxB,SAAwBA,IACvBA,EAAYA,GAAa,IAEfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnF,IAAI8V,GAA+B,IAArB3Q,EAAU2Q,OACpBC,GAAkB,OACW3U,IAA9B+D,EAAU4Q,iBAA+D,OAA9B5Q,EAAU4Q,kBACvDA,GAAiD,IAA9B5Q,EAAU4Q,iBAC9B,IAAIC,GAA+C,IAA7B7Q,EAAU6Q,eAEhC,GADA9X,GAAMlb,IAAI,sBAAwBmf,EAAY,YAAc2T,EAAS,MACjE3T,EAKH,OAJAjE,GAAMiF,KAAK,yBACXgC,EAAUpF,eACPgW,GACFjW,EAAiBG,aAGnB,GAAG+V,EACF,IAAI,IAAItQ,KAAYtD,EACnBwF,EAAclC,EAAU,CAAEmC,WAAW,IAEvC,IAAI3F,EAIH,OAHAhE,GAAMiF,KAAK,yCACXhB,EAAY,UACZgD,EAAUpF,UAIX,IAAIiF,EAAU,CAAE,MAAS,UAAW,YAAe9G,GAAM+G,aAAa,KACnE/kB,IACF8kB,EAAO,MAAY9kB,GACjBqhB,IACFyD,EAAO,UAAgBzD,GACxB,GAAGuU,EAgBF,OAbG1V,GACFC,EAAGiF,QAAU,KACbjF,EAAGzT,QACHyT,EAAK,MAELhC,UAAU4X,WAAWpyB,EAAS,IAAMse,EAAWxZ,KAAKC,UAAUoc,IAE/D9G,GAAMlb,IAAI,sBACVmf,EAAY,KACZD,GAAY,EACZiD,EAAUpF,eACPgW,GACFjW,EAAiBG,aAGnB,GAAGG,EAAY,CACd4E,EAAO,WAAiB7C,EAExB,IAAI+T,EAAkB,WACrB,IAAI,IAAI3Q,KAAajF,EACpBD,EAAG8V,oBAAoB5Q,EAAWjF,EAAWiF,IAE9ClF,EAAG8V,oBAAoB,UAAWC,GAClC/V,EAAG8V,oBAAoB,QAASE,GAC7B9V,GACFV,aAAaU,GAEdF,EAAGzT,SAGAwpB,EAAkB,SAASzW,GAC9B,IAAIhd,EAAOgG,KAAKqK,MAAM2M,EAAMhd,MACzBA,EAAK2zB,YAActR,EAAQsR,YAAc3zB,EAAK4hB,aAAeS,EAAQT,cACvE2R,IACA/Q,EAAUpF,UACPgW,GACFjW,EAAiBG,cAGhBoW,EAAgB,SAAS1W,GAC5BuW,IACA/Q,EAAUpgB,MAAM,qDACbgxB,GACFjW,EAAiBG,aAOnB,OAJAI,EAAGtN,iBAAiB,UAAWqjB,GAC/B/V,EAAGtN,iBAAiB,QAASsjB,QAE7BhW,EAAGvN,KAAKnK,KAAKC,UAAUoc,IAGxB9G,GAAM2E,YAAYhf,EAAS,IAAMse,EAAW,CAC3CW,KAAM,OACN3B,gBAAiBA,EACjB1Z,KAAMud,EACNjF,QAAS,SAASqD,GACjBlF,GAAMlb,IAAI,sBACVkb,GAAMyC,MAAMyC,GACZjB,EAAY,KACZD,GAAY,EACS,YAAlBkB,EAAI,OACNlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,QAElES,EAAUpF,UACPgW,GACFjW,EAAiBG,aAEnBlb,MAAO,SAASke,EAAYC,GAC3BhF,GAAMnZ,MAAMke,EAAa,IAAKC,GAE9Bf,EAAY,KACZD,GAAY,EACZiD,EAAUpF,UACPgW,GACFjW,EAAiBG,eAzgBgBsW,CAAepR,IACpD7kB,KAAKk2B,OAAS,SAASrR,IA8gBvB,SAAsBA,GAgBrB,IAfAA,EAAYA,GAAa,IACfpF,QAAuC,mBAArBoF,EAAUpF,QAAyBoF,EAAUpF,QAAU7B,GAAM8B,KACzFmF,EAAUpgB,MAAmC,mBAAnBogB,EAAUpgB,MAAuBogB,EAAUpgB,MAAQmZ,GAAM8B,KACnFmF,EAAUiL,cAAmD,mBAA3BjL,EAAUiL,cAA+BjL,EAAUiL,cAAgBlS,GAAM8B,KAC3GmF,EAAUwF,SAAyC,mBAAtBxF,EAAUwF,SAA0BxF,EAAUwF,SAAWzM,GAAM8B,KAC5FmF,EAAUd,WAA6C,mBAAxBc,EAAUd,WAA4Bc,EAAUd,WAAanG,GAAM8B,KAClGmF,EAAUnB,YAA+C,mBAAzBmB,EAAUnB,YAA6BmB,EAAUnB,YAAc9F,GAAM8B,KACrGmF,EAAUb,SAAyC,mBAAtBa,EAAUb,SAA0Ba,EAAUb,SAAWpG,GAAM8B,KAC5FmF,EAAUN,UAA2C,mBAAvBM,EAAUN,UAA2BM,EAAUN,UAAY3G,GAAM8B,KAC/FmF,EAAU4H,cAAmD,mBAA3B5H,EAAU4H,cAA+B5H,EAAU4H,cAAgB7O,GAAM8B,KAC3GmF,EAAUqG,eAAqD,mBAA5BrG,EAAUqG,eAAgCrG,EAAUqG,eAAiBtN,GAAM8B,KAC9GmF,EAAUwB,OAAqC,mBAApBxB,EAAUwB,OAAwBxB,EAAUwB,OAASzI,GAAM8B,KACtFmF,EAAUqB,WAA6C,mBAAxBrB,EAAUqB,WAA4BrB,EAAUqB,WAAatI,GAAM8B,KAClGmF,EAAUqQ,UAA2C,mBAAvBrQ,EAAUqQ,UAA2BrQ,EAAUqQ,UAAYtX,GAAM8B,KAC/FmF,EAAUhB,WAA6C,mBAAxBgB,EAAUhB,WAA4BgB,EAAUhB,WAAajG,GAAM8B,MAC9FkC,EAGH,OAFAhE,GAAMiF,KAAK,8CACXgC,EAAUpgB,MAAM,yCAGjB,IAAI0xB,EAAStR,EAAUsR,OACvB,IAAIA,EAGH,OAFAvY,GAAMnZ,MAAM,uBACZogB,EAAUpgB,MAAM,kBAGjB,IAAI2xB,EAAWvR,EAAUuR,SACrBC,EAAcxR,EAAUjlB,MAAQilB,EAAUjlB,MAAQA,EAClDqkB,EAAcrG,GAAM+G,aAAa,IACjCD,EAAU,CAAE,MAAS,SAAU,OAAUyR,EAAQ,UAAaC,EAAU,YAAenS,GACxFoS,IACF3R,EAAO,MAAY2R,GACjBpV,IACFyD,EAAO,UAAgBzD,GACxB,GAAGnB,EAgFF,OA/EAmC,EAAagC,GAAe,SAASnB,GAEpC,GADAlF,GAAMyC,MAAMyC,GACS,YAAlBA,EAAI,MAGN,OAFAlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,aACjES,EAAUpgB,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,QAGtE,IAAIgB,EAAWtC,EAAKzgB,KAAL,GACfub,GAAMlb,IAAI,mBAAqB0iB,GAC/B,IAAInC,EACH,CACCqT,QAAUvU,EACVoU,OAASA,EACTxxB,GAAKygB,EACLxlB,MAAQy2B,EACRzS,UAAW,EACXT,YAAc,CACboT,SAAU,EACVxO,SAAW,KACXE,gBAAiB,EACjBgD,aAAe,KACfR,MAAQ,KACRoC,iBAAmB,KACnBzJ,GAAK,KACL4C,YAAc,GACdS,WAAa,KACb0D,SAAU,EACVK,SAAU,EACVP,OAAS,CACRtkB,MAAQ,KACRguB,MAAQ,MAETzJ,QAAU,CACTvkB,MAAQ,KACR8uB,MAAQ,KACRG,SAAW,KACXF,MAAQ,KACRG,SAAW,KACXlB,MAAQ,OAGV6C,MAAQ,WAAa,OAAOpR,GAC5BqR,UAAY,WAAa,OAAON,GAChC1C,UAAY,WAAa,OAAOA,EAAUrO,GAAU,IACpDsR,gBAAkB,WAAa,OAAOjD,EAAUrO,GAAU,IAC1DuR,eAAiB,WAAa,OAAOlD,EAAUrO,GAAU,IACzDwR,aAAe,WAAa,OAAO5C,EAAQ5O,GAAU,IACrDyR,UAAY,WAAa,OAAO3C,EAAK9O,GAAU,GAAO,IACtD0R,YAAc,WAAa,OAAO5C,EAAK9O,GAAU,GAAO,IACxD2R,aAAe,WAAa,OAAO/C,EAAQ5O,GAAU,IACrD4R,UAAY,WAAa,OAAO9C,EAAK9O,GAAU,GAAM,IACrD6R,YAAc,WAAa,OAAO/C,EAAK9O,GAAU,GAAM,IACvD+O,WAAa,WAAa,OAAOA,EAAW/O,IAC5C5S,KAAO,SAASqS,GAAaM,EAAYC,EAAUP,IACnDxiB,KAAO,SAASwiB,GAAayB,EAASlB,EAAUP,IAChDkC,KAAO,SAASlC,GAAa2B,EAASpB,EAAUP,IAChDiL,cAAgBjL,EAAUiL,cAC1BzF,SAAWxF,EAAUwF,SACrBtG,WAAac,EAAUd,WACvBL,YAAcmB,EAAUnB,YACxBM,SAAWa,EAAUb,SACrBO,UAAYM,EAAUN,UACtBgK,YAAc,SAAS1J,GAAa2K,EAAcpK,GAAU,EAAMP,IAClEqJ,aAAe,SAASrJ,GAAa2K,EAAcpK,GAAU,EAAOP,IACpEqS,iBAAmB,SAASrS,GAAa2O,EAAkBpO,EAAUP,IACrE4H,cAAgB5H,EAAU4H,cAC1BvB,eAAiBrG,EAAUqG,eAC3B7E,OAASxB,EAAUwB,OACnBH,WAAarB,EAAUqB,WACvBgP,UAAYrQ,EAAUqQ,UACtBrR,WAAagB,EAAUhB,WACvBF,OAAS,SAASwT,GAAe3P,EAAcpC,GAA0B,IAAhB+R,IACzDrT,OAAS,SAASe,GAAayC,EAAclC,EAAUP,KAEzD/C,EAAcsD,GAAYnC,EAC1B4B,EAAUpF,QAAQwD,IAEnByB,EAAO,WAAiB7C,OACxB9B,EAAGvN,KAAKnK,KAAKC,UAAUoc,IAGxB9G,GAAM2E,YAAYhf,EAAS,IAAMse,EAAW,CAC3CW,KAAM,OACN3B,gBAAiBA,EACjB1Z,KAAMud,EACNjF,QAAS,SAASqD,GAEjB,GADAlF,GAAMyC,MAAMyC,GACS,YAAlBA,EAAI,MAGN,OAFAlF,GAAMnZ,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,aACjES,EAAUpgB,MAAM,UAAYqe,EAAI,MAAUqB,KAAO,IAAMrB,EAAI,MAAUsB,QAGtE,IAAIgB,EAAWtC,EAAKzgB,KAAL,GACfub,GAAMlb,IAAI,mBAAqB0iB,GAC/B,IAAInC,EACH,CACCqT,QAAUvU,EACVoU,OAASA,EACTxxB,GAAKygB,EACLxlB,MAAQy2B,EACRzS,UAAW,EACXT,YAAc,CACboT,SAAU,EACVxO,SAAW,KACXE,gBAAiB,EACjBgD,aAAe,KACfR,MAAQ,KACRoC,iBAAmB,KACnBzJ,GAAK,KACL4C,YAAc,GACdS,WAAa,KACb0D,SAAU,EACVK,SAAU,EACVP,OAAS,CACRtkB,MAAQ,KACRguB,MAAQ,MAETzJ,QAAU,CACTvkB,MAAQ,KACR8uB,MAAQ,KACRG,SAAW,KACXF,MAAQ,KACRG,SAAW,KACXlB,MAAQ,OAGV6C,MAAQ,WAAa,OAAOpR,GAC5BqR,UAAY,WAAa,OAAON,GAChC1C,UAAY,WAAa,OAAOA,EAAUrO,GAAU,IACpDsR,gBAAkB,WAAa,OAAOjD,EAAUrO,GAAU,IAC1DuR,eAAiB,WAAa,OAAOlD,EAAUrO,GAAU,IACzDwR,aAAe,WAAa,OAAO5C,EAAQ5O,GAAU,IACrDyR,UAAY,WAAa,OAAO3C,EAAK9O,GAAU,GAAO,IACtD0R,YAAc,WAAa,OAAO5C,EAAK9O,GAAU,GAAO,IACxD2R,aAAe,WAAa,OAAO/C,EAAQ5O,GAAU,IACrD4R,UAAY,WAAa,OAAO9C,EAAK9O,GAAU,GAAM,IACrD6R,YAAc,WAAa,OAAO/C,EAAK9O,GAAU,GAAM,IACvD+O,WAAa,WAAa,OAAOA,EAAW/O,IAC5C5S,KAAO,SAASqS,GAAaM,EAAYC,EAAUP,IACnDxiB,KAAO,SAASwiB,GAAayB,EAASlB,EAAUP,IAChDkC,KAAO,SAASlC,GAAa2B,EAASpB,EAAUP,IAChDiL,cAAgBjL,EAAUiL,cAC1BzF,SAAWxF,EAAUwF,SACrBtG,WAAac,EAAUd,WACvBL,YAAcmB,EAAUnB,YACxBM,SAAWa,EAAUb,SACrBO,UAAYM,EAAUN,UACtBgK,YAAc,SAAS1J,GAAa2K,EAAcpK,GAAU,EAAMP,IAClEqJ,aAAe,SAASrJ,GAAa2K,EAAcpK,GAAU,EAAOP,IACpEqS,iBAAmB,SAASrS,GAAa2O,EAAkBpO,EAAUP,IACrE4H,cAAgB5H,EAAU4H,cAC1BvB,eAAiBrG,EAAUqG,eAC3B7E,OAASxB,EAAUwB,OACnBH,WAAarB,EAAUqB,WACvBgP,UAAYrQ,EAAUqQ,UACtBrR,WAAagB,EAAUhB,WACvBF,OAAS,SAASwT,GAAe3P,EAAcpC,GAA0B,IAAhB+R,IACzDrT,OAAS,SAASe,GAAayC,EAAclC,EAAUP,KAEzD/C,EAAcsD,GAAYnC,EAC1B4B,EAAUpF,QAAQwD,IAEnBxe,MAAO,SAASke,EAAYC,GAC3BhF,GAAMnZ,MAAMke,EAAa,IAAKC,GACX,KAAhBA,EACFiC,EAAUpgB,MAAMke,EAAa,yBAE7BkC,EAAUpgB,MAAMke,EAAa,KAAOC,MAztBJwU,CAAavS,IArclDjH,GAAMyZ,uBAAyB,SAAUC,GACxC,IAAIC,EAAKD,GAAQA,EAAKE,OAAUA,MAC5BC,EAAKH,GAAQA,EAAKrlB,SAAYA,QAC9BylB,EAAaJ,GAAQA,EAAKK,WAAcA,UAE5C,MAAO,CACNzS,aAAc,SAAS3hB,EAAQq0B,GAAS,OAAO,IAAIF,EAAUn0B,EAAQq0B,IACrErZ,UAAY+Y,GAAQA,EAAK/Y,WAAcE,GACvC2B,QAAS,SAASyX,GAAO,OAAOC,MAAM1X,QAAQyX,IAC9C3O,cAAgBoO,GAAQA,EAAKS,SAAYA,KACzCxV,YAAa,SAAS1d,EAAKa,GAC1B,IAAIsyB,EAAe,CAClBC,OAAQvyB,EAAQ8c,KAChBpe,QAAS,CACR,OAAU,qCAEX8a,MAAO,YAEY,SAAjBxZ,EAAQ8c,OACVwV,EAAa5zB,QAAQ,gBAAkB,yBAET0c,IAA5Bpb,EAAQmb,kBACVmX,EAAaE,aAA0C,IAA5BxyB,EAAQmb,gBAA2B,UAAanb,EAAQmb,gBAAkBnb,EAAQmb,gBAAkB,QAE7Hnb,EAAQyB,OACV6wB,EAAa7wB,KAAOkB,KAAKC,UAAU5C,EAAQyB,OAG5C,IAAIgxB,EAAWZ,EAAE1yB,EAAKmzB,GAAcxzB,OAAM,SAASC,GAClD,OAAOgzB,EAAEtlB,OAAO,CAAC4I,QAAS,gDAAiDtW,MAAOA,OAQnF,GAAGiB,EAAQgd,QAAS,CACnB,IAAIA,EAAU,IAAI+U,GAAE,SAASvlB,EAASC,GACrC,IAAIimB,EAAUpZ,YAAW,WAExB,OADAO,aAAa6Y,GACNjmB,EAAO,CAAC4I,QAAS,oBAAqB2H,QAAShd,EAAQgd,YAC5Dhd,EAAQgd,YAEZyV,EAAWV,EAAEY,KAAK,CAACF,EAAUzV,IAsB9B,OAnBAyV,EAAS9zB,MAAK,SAASC,GACtB,OAAGA,EAASg0B,UACD5yB,EAAQ+Z,iBAAoB7B,GAAM8B,KACpCpb,EAASwe,OAAOze,MAAK,SAASk0B,GACpC7yB,EAAQ+Z,QAAQ8Y,MACd/zB,OAAM,SAASC,GACjB,OAAOgzB,EAAEtlB,OAAO,CAAC4I,QAAS,gCAAiCtW,MAAOA,EAAOH,SAAUA,YAJrF,EASOmzB,EAAEtlB,OAAO,CAAC4I,QAAS,kBAAmBzW,SAAUA,OAEtDE,OAAM,SAASC,UACPiB,EAAQjB,eAAkBmZ,GAAM8B,MACzCha,EAAQjB,MAAMA,EAAMsW,SAAW,uBAAwBtW,MAIlD0zB,KAKVva,GAAM4a,mBAAqB,SAAUlB,GACpC,IAAImB,EAAMnB,GAAQA,EAAKoB,QAAWA,KAC9BhB,EAAaJ,GAAQA,EAAKK,WAAcA,UAC5C,MAAO,CACNzS,aAAc,SAAS3hB,EAAQq0B,GAAS,OAAO,IAAIF,EAAUn0B,EAAQq0B,IACrExX,QAAS,SAASyX,GAAO,OAAOY,EAAGrY,QAAQyX,IAC3CtZ,UAAY+Y,GAAQA,EAAK/Y,WAAcE,GACvCyK,cAAgBoO,GAAQA,EAAKS,SAAYA,KACzCxV,YAAa,SAAS1d,EAAKa,GAC1B,IAAIizB,OAA2B7X,IAAjBpb,EAAQyB,KAAqB,CAC1CyxB,YAAa,mBACbv2B,KAAMgG,KAAKC,UAAU5C,EAAQyB,OAC1B,GACA+wB,OAA0CpX,IAA5Bpb,EAAQmb,gBAAgC,CAACgY,UAAW,CAAChY,gBAAiBnb,EAAQmb,kBAAoB,GAEpH,OAAO4X,EAAGK,KAAKL,EAAGM,OAAOJ,EAAST,EAAa,CAC9CrzB,IAAKA,EACLjC,KAAM8C,EAAQ8c,KACdtD,OAAO,EACP8Z,SAAU,OACVC,MAAOvzB,EAAQuzB,MACfvW,QAAShd,EAAQgd,QACjBjD,QAAS,SAAS9E,UACPjV,EAAQ+Z,iBAAoB7B,GAAM8B,MAC3Cha,EAAQ+Z,QAAQ9E,IAGlBlW,MAAO,SAAS2N,EAAK8mB,EAAQhH,UAClBxsB,EAAQjB,eAAkBmZ,GAAM8B,MACzCha,EAAQjB,MAAMy0B,EAAQhH,UAQ5BtU,GAAM8B,KAAO,aAEb9B,GAAM2I,qBAAuB,mBAI7B3I,GAAM4F,gBAAkB,KAGxB5F,GAAMwB,KAAO,SAAS1Z,GAGrB,IAFAA,EAAUA,GAAW,IACboZ,SAAuC,mBAApBpZ,EAAQoZ,SAA0BpZ,EAAQoZ,SAAWlB,GAAM8B,KACnF9B,GAAMgC,SAERla,EAAQoZ,eACF,CAWN,GAVqB,oBAAXrc,SAAgD,oBAAfA,QAAQC,MAClDD,QAAU,CAAEC,IAAK,eAGlBkb,GAAMub,MAAQvb,GAAM8B,KACpB9B,GAAMyC,MAAQzC,GAAM8B,KACpB9B,GAAM4G,OAAS5G,GAAM8B,KACrB9B,GAAMlb,IAAMkb,GAAM8B,KAClB9B,GAAMiF,KAAOjF,GAAM8B,KACnB9B,GAAMnZ,MAAQmZ,GAAM8B,MACC,IAAlBha,EAAQ2a,OAAoC,QAAlB3a,EAAQ2a,MAEpCzC,GAAMub,MAAQ12B,QAAQ02B,MAAMz5B,KAAK+C,SACjCmb,GAAMyC,MAAQ5d,QAAQ4d,MAAM3gB,KAAK+C,SACjCmb,GAAM4G,OAAS/hB,QAAQ4d,MAAM3gB,KAAK+C,SAClCmb,GAAMlb,IAAMD,QAAQC,IAAIhD,KAAK+C,SAC7Bmb,GAAMiF,KAAOpgB,QAAQogB,KAAKnjB,KAAK+C,SAC/Bmb,GAAMnZ,MAAQhC,QAAQgC,MAAM/E,KAAK+C,cAC3B,GAAGq1B,MAAM1X,QAAQ1a,EAAQ2a,OAAQ,CAAC,IAAD,uBACvC,IAAI,IAAJ,EAAQ,EAAK3a,EAAQ2a,MAArB,+CAA4B,CAAC,IAArB+Y,EAAoB,QAC3B,OAAOA,GACN,IAAK,QACJxb,GAAMub,MAAQ12B,QAAQ02B,MAAMz5B,KAAK+C,SACjC,MACD,IAAK,QACJmb,GAAMyC,MAAQ5d,QAAQ4d,MAAM3gB,KAAK+C,SACjC,MACD,IAAK,SACJmb,GAAM4G,OAAS/hB,QAAQ4d,MAAM3gB,KAAK+C,SAClC,MACD,IAAK,MACJmb,GAAMlb,IAAMD,QAAQC,IAAIhD,KAAK+C,SAC7B,MACD,IAAK,OACJmb,GAAMiF,KAAOpgB,QAAQogB,KAAKnjB,KAAK+C,SAC/B,MACD,IAAK,QACJmb,GAAMnZ,MAAQhC,QAAQgC,MAAM/E,KAAK+C,SACjC,MACD,QACCA,QAAQgC,MAAM,6BAA+B20B,EAAI,sEAtBb,mFA2BxCxb,GAAMlb,IAAI,wBAEV,IAAI22B,EAAmB3zB,EAAQ4zB,cAAgB1b,GAAMyZ,yBACrDzZ,GAAMwC,QAAUiZ,EAAiBjZ,QACjCxC,GAAMsL,cAAgBmQ,EAAiBnQ,cACvCtL,GAAM2E,YAAc8W,EAAiB9W,YACrC3E,GAAMsH,aAAemU,EAAiBnU,aACtCtH,GAAMW,UAAY8a,EAAiB9a,UACnCX,GAAMW,UAAUa,OAGhBxB,GAAM2b,YAAc,SAASza,EAAU7Z,GACtC6Z,EAA+B,mBAAZA,EAA0BA,EAAWlB,GAAM8B,KAChD,MAAVza,IAAgBA,EAAS,CAAEyqB,OAAO,EAAMf,OAAO,IAChD/Q,GAAM4S,0BACRzS,UAAUC,aAAagT,aAAa/rB,GACnCZ,MAAK,SAASsjB,GACd5J,UAAUC,aAAawU,mBAAmBnuB,MAAK,SAASouB,GACvD7U,GAAMyC,MAAMoS,GACZ3T,EAAS2T,GAET,IACC,IAAInC,EAAS3I,EAAOoE,YADjB,uBAEH,IAAI,IAAJ,EAAQ,EAAOuE,EAAf,+CAAuB,CAAC,IAAhBC,EAAe,QACnBA,GACFA,EAAIP,QAJH,mFAMF,MAAM3pB,WAGT7B,OAAM,SAAS0tB,GACftU,GAAMnZ,MAAMytB,GACZpT,EAAS,QAGVlB,GAAMiF,KAAK,sCACX/D,EAAS,MAIXlB,GAAM4b,kBAAoB,SAASC,EAAS9R,GAC3C,IACC8R,EAAQC,UAAY/R,EACnB,MAAOthB,GACR,IACCozB,EAAQ7rB,IAAM+rB,IAAIC,gBAAgBjS,GACjC,MAAOthB,GACRuX,GAAMnZ,MAAM,qCACZhC,QAAQC,IAAI,wCAIfkb,GAAMic,oBAAsB,SAASC,EAAIC,GACxC,IACCD,EAAGJ,UAAYK,EAAKL,UACnB,MAAOrzB,GACR,IACCyzB,EAAGlsB,IAAMmsB,EAAKnsB,IACb,MAAOvH,GACRuX,GAAMnZ,MAAM,0CAOf,IACIwgB,EADM,CAAC,OAAQ,SAAU,QAAQ3E,QAAQvC,UAAUic,WAAa,EAC9C,WAAa,eAC/BC,EAASp6B,OAAO,KAAOolB,GAe3B,GAdAplB,OAAO4S,iBAAiBwS,GAAW,SAAS5F,GAE3C,IAAI,IAAIiP,KADR1Q,GAAMlb,IAAI,kBACGkb,GAAMC,SACfD,GAAMC,SAASyQ,IAAM1Q,GAAMC,SAASyQ,GAAGpN,kBACzCtD,GAAMlb,IAAI,sBAAwB4rB,GAClC1Q,GAAMC,SAASyQ,GAAGiH,QAAQ,CAACC,QAAQ,EAAMC,iBAAiB,KAGzDwE,GAA2B,mBAAVA,GACnBA,OAIFrc,GAAMsc,WAAY,EACgC,WAA/Ctc,GAAMsL,cAAcC,eAAeC,SACpCxL,GAAMsL,cAAcC,eAAeE,SAAW,IAE/C,GAAGI,cAAgBA,aAAa0Q,iBAAmB1Q,aAAa0Q,gBAAgB,UAC9E1Q,aAAa0Q,gBAAgB,SAASC,QAAU3Q,aAAa0Q,gBAAgB,SAASC,OAAO93B,OAAQ,CAAC,IAAD,uBACtG,IAAI,IAAJ,EAAQ,EAASmnB,aAAa0Q,gBAAgB,SAASC,OAAvD,+CAA+D,CAAC,IAAxDC,EAAuD,QAC9D,GAAGA,GAASA,EAAMC,UAA6C,cAAjCD,EAAMC,SAAShG,cAA+B,CAC3E1W,GAAMsc,WAAY,EAClB,QAJoG,kFAOnGtc,GAAMsc,UACRtc,GAAMlb,IAAI,uCAEVkb,GAAMiF,KAAK,kLAGN,CAGN,IAAI0X,EAAS,IAAIxQ,kBAAkB,IACnCwQ,EAAOhM,YAAY,CAACf,qBAAqB,IAAOnpB,MAAK,SAASmqB,GAC7D5Q,GAAMsc,WAA0C,IAA9B1L,EAAMnJ,IAAI/E,QAAQ,OACjC1C,GAAMsc,UACRtc,GAAMlb,IAAI,uCAEVkb,GAAMiF,KAAK,8KAGZ0X,EAAOjuB,QACPiuB,EAAS,QAOZ,GADA3c,GAAM0K,aAAc,EAC8B,YAA/C1K,GAAMsL,cAAcC,eAAeC,SACpCxL,GAAMsL,cAAcC,eAAeE,SAAW,GAE/CzL,GAAM0K,aAAc,OACd,GAAkD,WAA/C1K,GAAMsL,cAAcC,eAAeC,SAC3CxL,GAAMsL,cAAcC,eAAeE,QAAU,GAE9CzL,GAAM0K,aAAc,OACd,GAAIzoB,OAAO8d,mBAAuB,qBAAsBA,GAAkB+L,UAI1E,CAEN,IAAI8Q,EAAS,IAAIzQ,kBACjB,IACCyQ,EAAOvO,eAAe,SACtBrO,GAAM0K,aAAc,EACnB,MAAOjiB,IACTm0B,EAAOluB,aARPsR,GAAM0K,aAAc,EAUrB1K,GAAMgC,UAAW,EACjBla,EAAQoZ,aAKVlB,GAAMiC,kBAAoB,WACzB,QAAShgB,OAAOkqB,mBAGjBnM,GAAM4S,wBAA0B,WAC/B,OAAOzS,UAAUC,cAAgBD,UAAUC,aAAagT,cAIzDpT,GAAM+G,aAAe,SAASviB,GAG7B,IAFA,IAAIq4B,EAAU,iEACV9V,EAAe,GACVxiB,EAAI,EAAGA,EAAIC,EAAKD,IAAK,CAC7B,IAAIu4B,EAAYtL,KAAKC,MAAMD,KAAK3nB,SAAWgzB,EAAQn4B,QACnDqiB,GAAgB8V,EAAQxqB,UAAUyqB,EAAUA,EAAU,GAEvD,OAAO/V,GAgjGO/G,UCp6GA,IACb,CACE+c,KAAM,IACNC,UCpCW,kBACb,kBAAC,IAAD,CAAMl6B,UAAU,kBACd,kBAAC,IAAD,KAEE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAM0P,UAAU,SACd,kBAAC,IAAD,CAAMnB,GAAG,YAIf,kBAAC,IAAD,CAASyB,QAAM,GACb,kBAAC,IAAD,kBACA,kBAAC,IAAD,oBAEF,kBAAC,IAAD,CAAOjE,QAAM,GACX,6BAEF,kBAAC,IAAD,MACA,kBAAC,IAAD,MAGA,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAOA,QAAM,IAGb,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAOA,QAAM,IAGb,kBAAC,IAAD,MAEA,kBAAC,IAAD,CAAKpD,KAAK,kBAAkB9C,OAAO,aAAa+C,SAAS,cAAcC,KAAK,QAAQ1B,MAAM,UACxF,kBAAC,IAAD,CAAMG,IAAI,SAASC,OAAO,SAASC,GAAG,iBACtC,kBAAC,IAAD,CAAMF,IAAI,WAAWC,OAAO,WAAWC,GAAG,uBDK9C,CACEyyB,KAAM,UACNC,UAAWlf,IAEb,CACEif,KAAM,YACNC,UAAWve,IAEb,CACEse,KAAM,uBACNC,UAAWle,IAEb,CACEie,KAAM,oBACNC,UAAWC,IAEb,CACEF,KAAM,gBACNC,UAAWp7B,GAIb,CACEm7B,KAAM,UACNC,U,YErEF,aAAe,IAAD,8BACZ,+CACKp3B,QAAU,EAAKA,QAAQ9D,KAAb,gBACf,EAAKo7B,cAAgB,EAAKA,cAAcp7B,KAAnB,gBACrB,EAAKq7B,iBAAmB,EAAKA,iBAAiBr7B,KAAtB,gBACxB,EAAKs7B,cAAgB,EAAKA,cAAct7B,KAAnB,gBACrB,EAAKge,cAAgB,EAAKA,cAAche,KAAnB,gBACrB,EAAK+d,kBAAoB,EAAKA,kBAAkB/d,KAAvB,gBACzB,EAAKu7B,IAAM,EAAKA,IAAIv7B,KAAT,gBACX,EAAKiJ,GAAK,EAAKA,GAAGjJ,KAAR,gBACV,EAAKmd,YAAc,EAAKA,YAAYnd,KAAjB,gBACnB,EAAK0d,eAAiB,EAAKA,eAAe1d,KAApB,gBACtB,EAAKw7B,OAAS,EAAKA,OAAOx7B,KAAZ,gBAEd,EAAKC,MAAQ,CACXC,MAAOC,OAAOC,aAAaC,QAAQ,SACnCo7B,UAAW,KACX53B,OAAQD,EAAK83B,YACbC,MAAO,KACPC,QAAS,KACTlF,SAAU,iBAAmBxY,GAAM+G,aAAa,IAChD4W,OAAQ,KACRC,WAAY,KACZC,KAAM,KACNC,SAAU,KACVC,QAAS,KACT7e,MAAO,GACP8e,aAAc,GACdpb,KAAM,GACNqb,gBAAgB,EAChBC,qBAAqB,EACrB3e,OAAO,GA/BG,E,kFAmCZzU,EAAWC,GAAG,WAAY3I,KAAKwD,W,6CAI/BkF,EAAWE,eAAe,WAAY5I,KAAKwD,W,sCAI3C,IAAIu4B,EAAO/7B,KACX4d,GAAMwB,KAAK,CACTiB,MAAO,OACPvB,SAAU,WACR,IAAIuc,EAAQ,IAAIzd,GAAM,CACpBra,OAAQw4B,EAAKp8B,MAAM4D,OACnBkc,QAAS,WACP4b,EAAMnF,OAAO,CACXC,OAAQ,yBACRC,SAAU2F,EAAKp8B,MAAMy2B,SACrB3W,QAAS,SAAUwD,GACjB8Y,EAAK97B,SAAS,CAAEo7B,MAAOA,IACvBU,EAAK97B,SAAS,CAAEq7B,QAASrY,IACzBrF,GAAMlb,IACJ,qBACEq5B,EAAKp8B,MAAM27B,QAAQ7E,YACnB,QACAsF,EAAKp8B,MAAM27B,QAAQ9E,QACnB,KAEJ5Y,GAAMlb,IAAI,oCACVq5B,EAAKhB,oBAEPt2B,MAAO,SAAUA,GACfmZ,GAAMnZ,MAAM,iCAAkCA,GAC9C5E,OAAOsP,MAAM,6BAA+B1K,IAE9CqrB,cAAe,SAAUnnB,GACvBiV,GAAMyC,MACJ,6BAA+B1X,EAAK,KAAO,OAAS,SAGxD0hB,SAAU,SAAU1qB,GAClBie,GAAMlb,IAAI,wBAA0B/C,IAEtCokB,WAAY,SAAUrC,EAAQ/Y,GAC5BiV,GAAMlb,IACJ,UACGiG,EAAK,UAAY,WAClB,kBACA+Y,IAGNgC,YAAa,SAAU/a,GACrBiV,GAAMlb,IACJ,4CACGiG,EAAK,KAAO,QACb,SAGN4b,UAAW,SAAUyX,EAAK1X,GACxB1G,GAAMlb,IAAI,qCAAsCs5B,GAChD,IAAI3c,EAAQ2c,EAAG,UAEf,GADApe,GAAMyC,MAAM,UAAYhB,GACpBA,EACF,GAAc,WAAVA,GAOF,GANA5c,QAAQC,IAAI,UACZq5B,EAAK97B,SAAS,CACZw7B,KAAMO,EAAG,GACTL,QAASK,EAAG,aAGVA,EAAG,WAAgB,CACrB,IAAIh6B,EAAOg6B,EAAG,WAKd,IAAK,IAAIzE,KAJT90B,QAAQC,IACN,4CACAV,GAEYA,EAAM,CAClB,IAAI2C,EAAK3C,EAAKu1B,GAAL,GACL0E,EAAUj6B,EAAKu1B,GAAL,QACV7H,EAAQ1tB,EAAKu1B,GAAL,YACR5I,EAAQ3sB,EAAKu1B,GAAL,YACZ3Z,GAAMyC,MACJ,SACE1b,EACA,KACAs3B,EACA,YACAvM,EACA,YACAf,EACA,KAEJoN,EAAKf,cAAcr2B,EAAIs3B,EAASvM,EAAOf,UAGtC,GAAc,cAAVtP,EAETzB,GAAMiF,KAAK,qCACN,GAAc,UAAVxD,EAET,GAAI2c,EAAG,WAAgB,CACjBh6B,EAAOg6B,EAAG,WAKd,IAAK,IAAIzE,KAJT3Z,GAAMlb,IACJ,4CACAV,GAEYA,EAAM,CACd2C,EAAK3C,EAAKu1B,GAAL,GACL0E,EAAUj6B,EAAKu1B,GAAL,QACV7H,EAAQ1tB,EAAKu1B,GAAL,YACR5I,EAAQ3sB,EAAKu1B,GAAL,YACZ3Z,GAAMlb,IACJ,SACEiC,EACA,KACAs3B,EACA,YACAvM,EACA,YACAf,EACA,KAEJoN,EAAKf,cAAcr2B,EAAIs3B,EAASvM,EAAOf,SAEpC,GAAIqN,EAAG,QAAa,CACzB,IAAIE,EAAUF,EAAG,QACjBv5B,QAAQC,IAAI,sBAAwBw5B,GACpCH,EAAK97B,SACH,CACE6c,MAAOif,EAAKp8B,MAAMmd,MAAMqf,QACtB,SAAC7mB,GAAD,OAAUA,EAAK8mB,MAAQF,OAG3B,kBAAMz5B,QAAQC,IAAI,cAAeq5B,EAAKp8B,MAAMmd,UAM5B,OADduf,EAHkBN,EAAKp8B,MAAMmd,MAAMqf,QACrC,SAAC7mB,GAAD,OAAUA,EAAK8mB,OAASF,KAEOI,UAE/BD,EAAWvY,cAER,GAAIkY,EAAG,YAAiB,CAC7B,IAgBIK,EAhBAE,EAAcP,EAAG,YAErB,GADAv5B,QAAQC,IAAI,mBAAqB65B,GACb,OAAhBA,EAEF,YADAR,EAAKp8B,MAAM27B,QAAQ3X,SAGrBoY,EAAK97B,SACH,CACE6c,MAAOif,EAAKp8B,MAAMmd,MAAMqf,QACtB,SAAC7mB,GAAD,OAAUA,EAAK8mB,MAAQG,OAQX,OADdF,EAHkBN,EAAKp8B,MAAMmd,MAAMqf,QACrC,SAAC7mB,GAAD,OAAUA,EAAK8mB,OAASG,KAEOD,UAE/BD,EAAWvY,cAEJkY,EAAG,MAId1X,IACF1G,GAAMlb,IAAI,0BAA2B4hB,GACrCyX,EAAKp8B,MAAM27B,QAAQpE,iBAAiB,CAAE5S,KAAMA,MAGhDmI,cAAe,SAAU9E,GACvBllB,QAAQC,IAAI,8BAA+BilB,GAC3CllB,QAAQC,IAAIq5B,EAAKp8B,MAAM27B,QAAQ32B,IAC/B,IAAI63B,EAAYT,EAAKp8B,MAAMmd,MAAMqf,QAC/B,SAAC7mB,GAAD,OAAUA,EAAK3Q,KAAOo3B,EAAKp8B,MAAM27B,QAAQ32B,MAE3ClC,QAAQC,IAAI,YAAa85B,GACD,IAArBA,EAAUl6B,QACXy5B,EAAK97B,SAAS,CACZ6c,MAAOif,EAAKp8B,MAAMmd,MAAM3T,OAAO4yB,EAAKp8B,MAAM27B,WAI9C1d,GAAM4b,kBACJ7a,SAAS8d,eAAe,SAAWV,EAAKp8B,MAAM27B,QAAQ32B,IACtDgjB,GAGFhJ,SAAS8d,eAAe,SAAWV,EAAKp8B,MAAM27B,QAAQ32B,IAAIwY,OAAQ,GAEpE+N,eAAgB,SAAUvD,GACxB/J,GAAMlb,IAAI,+BAAgCilB,IAG5CuN,UAAW,WACTtX,GAAMlb,IACJ,mEAKR+B,MAAO,SAAUA,GACfmZ,GAAMnZ,MAAMA,GACZ5E,OAAOsP,MAAM1K,GAAO,WAClB5E,OAAOM,SAASC,aAGpBuf,UAAW,WACT9f,OAAOM,SAASC,iB,yCAOxB,IACIgD,EAAW,CACbshB,QAAS,OACTgY,KAHS18B,KAGEL,MAAM47B,OACjBoB,MAAO,YACPV,QAAS,SALAj8B,KAONL,MAAM27B,QAAQ9oB,KAAK,CAAEuI,QAAS3X,M,oCAGvBuB,EAAImY,EAAOmf,EAASvM,EAAOf,GACvC,IAAIoN,EAAO/7B,KAEPq8B,EAAa,KACjBN,EAAKp8B,MAAM07B,MAAMnF,OAAO,CACtBC,OAAQ,yBACRC,SAAUp2B,KAAKL,MAAMy2B,SACrB3W,QAAS,SAAUwD,IACjBoZ,EAAapZ,GACF2Z,kBAAmB,EAC9Bhf,GAAMlb,IACJ,qBACE25B,EAAW5F,YACX,QACA4F,EAAW7F,QACX,KAEJ5Y,GAAMlb,IAAI,6BAEV,IAAIm6B,EAAY,CACdnY,QAAS,OACTgY,KAAMX,EAAKp8B,MAAM47B,OACjBoB,MAAO,aACP5f,KAAMpY,EACNm4B,WAAYf,EAAKp8B,MAAMg8B,SAQwB,WAA/C/d,GAAMsL,cAAcC,eAAeC,SACxB,QAAVuF,IAA8B,QAAVA,GAAoB/Q,GAAMsc,aAE3CvL,IAAOA,EAAQA,EAAMoO,eACzBt6B,QAAQC,IACN,sBACEisB,EACA,oDAEJkO,EAAS,aAAkB,GAE7BR,EAAWW,WAAarO,EACxB0N,EAAW7pB,KAAK,CAAEuI,QAAS8hB,KAI7Bp4B,MAAO,SAAUA,GACfmZ,GAAMnZ,MAAM,iCAAkCA,GAC9C5E,OAAOsP,MAAM,6BAA+B1K,IAE9C8f,UAAW,SAAUyX,EAAK1X,GACxB1G,GAAMyC,MAAM,sCAAuC2b,GACnD,IAAI3c,EAAQ2c,EAAG,UACfpe,GAAMlb,IAAI,UAAY2c,GAClB2c,EAAG,MACLn8B,OAAOsP,MAAM6sB,EAAG,OACP3c,GACK,aAAVA,IACF0c,EAAK97B,SAAS,CAAE6c,MAAOif,EAAKp8B,MAAMmd,MAAM3T,OAAOkzB,KAM/CA,EAAWD,KAAOJ,EAAG,GACrBK,EAAWY,UAAYjB,EAAG,QAC1Bpe,GAAMlb,IACJ,iCACE25B,EAAWD,KACX,KACAC,EAAWY,UACX,aACAjB,EAAG,OAQP1X,IACF1G,GAAMlb,IAAI,0BAA2B4hB,GACrC+X,EAAWnO,aAAa,CACtB5J,KAAMA,EAGNoD,MAAO,CAAEoF,WAAW,EAAOK,WAAW,GACtC1N,QAAS,SAAU6E,GACjB1G,GAAMlb,IAAI,WAAY4hB,GACtB,IAAInd,EAAO,CAAEud,QAAS,QAASgY,KAAMX,EAAKp8B,MAAM47B,QAChDc,EAAW7pB,KAAK,CAAEuI,QAAS5T,EAAMmd,KAAMA,KAEzC7f,MAAO,SAAUA,GACfmZ,GAAMlb,IAAI,gBAAiB+B,GAC3B5E,OAAOsP,MAAM,mBAAqB1K,EAAMsW,cAKhDsP,SAAU,SAAU1qB,GAClBie,GAAMlb,IACJ,kDACE25B,EAAWa,QACX,gBACAv9B,IAGN+jB,YAAa,SAAU/a,GAErBiV,GAAMlb,IACJ,gDACE25B,EAAWa,QACX,SACCv0B,EAAK,KAAO,QACb,SAGN8jB,cAAe,SAAU9E,KAIzBuD,eAAgB,SAAUvD,GAIxB/J,GAAM4b,kBACJ7a,SAAS8d,eAAe,SAAWJ,EAAW13B,IAC9CgjB,IAOJuN,UAAW,WACTtX,GAAMlb,IACJ,gDAAkDiC,EAAK,c,qCAMhDoY,GACTA,EAAKpY,IAAMoY,EAAKoG,aAAepG,EAAKoG,YAAY8H,cAClDrN,GAAM4b,kBACJ7a,SAAS8d,eAAe,SAAW1f,EAAKpY,IACxCoY,EAAKoG,YAAY8H,gB,sCAMrB,IAAI8Q,EAAO/7B,KACXyC,QAAQC,IAAI,UAAWq5B,EAAKp8B,MAAMk8B,gBAClCE,EAAKp8B,MAAM27B,QAAQ/M,YAAY,CAC7B7G,MAAO,CACLqF,WAAW,EACXK,WAAW,EACXD,WAAY4O,EAAKp8B,MAAMk8B,eACvBvO,YAAayO,EAAKp8B,MAAMk8B,eACxB/O,UAAWiP,EAAKp8B,MAAMm8B,oBACtBnN,MAAO,UAGTlP,QAAS,SAAU6E,GAEjB,GADA1G,GAAMyC,MAAM,+BAAgCiE,GACxCA,EAAM,CAORyX,EAAKp8B,MAAM27B,QAAQ9oB,KAAK,CAAEuI,QANZ,CACZ2J,QAAS,YACTgL,OAAO,EACPf,OAAO,EACPzE,QAAS,OAEiC5F,KAAMA,IAEpDyX,EAAK97B,SAAS,CAAE47B,gBAAiBE,EAAKp8B,MAAMk8B,kBAE9Cp3B,MAAO,SAAUA,GACfmZ,GAAMnZ,MAAM,sBAAuBA,Q,0CAMvC,IAAIs3B,EAAO/7B,KACXyC,QAAQC,IAAI,cAAeq5B,EAAKp8B,MAAMm8B,qBACtCC,EAAKp8B,MAAM27B,QAAQ/M,YAAY,CAC7B7G,MAAO,CACLqF,WAAW,EACXK,WAAW,EACXN,WAAYiP,EAAKp8B,MAAMm8B,oBACvB5O,YAAa6O,EAAKp8B,MAAMm8B,oBACxB3O,UAAW4O,EAAKp8B,MAAMk8B,gBAGxBpc,QAAS,SAAU6E,GAEjB,GADA1G,GAAMyC,MAAM,+BAAgCiE,GACxCA,EAAM,CAERyX,EAAKp8B,MAAM27B,QAAQ9oB,KAAK,CAAEuI,QADZ,CAAE2J,QAAS,YAAagL,OAAO,EAAMf,OAAO,GACdrK,KAAMA,IAClDyX,EAAK97B,SAAS,CACZ67B,qBAAsBC,EAAKp8B,MAAMm8B,wBAIvCr3B,MAAO,SAAUA,GACfmZ,GAAMnZ,MAAM,sBAAuBA,Q,4BAMvChC,QAAQC,IAAI1C,KAAKL,MAAMmd,OACvB,IAAI3V,EAAO,CACTud,QAAS,SACT3H,KAAM/c,KAAKL,MAAMmd,MAAM,GAAGsf,KAC1BzN,OAAO,GAET3uB,KAAKL,MAAMmd,MAAM,GAAGtK,KAAK,CAAEuI,QAAS5T,M,2BAIpC1E,QAAQC,IAAI1C,KAAKL,MAAMmd,OACvB,IAAI3V,EAAO,CACTud,QAAS,SACT3H,KAAM/c,KAAKL,MAAMmd,MAAM,GAAGsf,KAC1BzN,OAAO,GAET3uB,KAAKL,MAAMmd,MAAM,GAAGtK,KAAK,CAAEuI,QAAS5T,M,iFAMpCnH,KAAK86B,gBACL96B,KAAKk7B,W,iCAIkBjxB,IAAWhI,SAC/BiI,MAAMC,KAAK,CACZL,KAAMvK,EAAK6K,UACXC,aAAc,IACdf,SAAU,QAEZT,EAAkB,YAAa7I,KAAKL,MAAM+D,KAAM,GAAI1D,KAAKL,MAAMC,S,gCAI/D,IAAIu7B,EAAYzyB,EAAWlF,UACvBtB,EAAQwG,EAAWM,WACnBmyB,GAAuB,aAAVj5B,GACflC,KAAKC,SAAS,CACZk7B,UAAWA,M,+BAMfn7B,KAAKC,SAAS,CAAEkd,OAAO,M,+BAGf,IAAD,EAQHnd,KAAKL,MANPw7B,EAFK,EAELA,UACA3a,EAHK,EAGLA,KACAsb,EAJK,EAILA,oBACAD,EALK,EAKLA,eACA/e,EANK,EAMLA,MACAK,EAPK,EAOLA,MAEF,OACE,kBAAC,GAAD,CACEN,YAAa7c,KAAK6c,YAClBse,UAAWA,EACX/d,eAAgBpd,KAAKod,eACrBoD,KAAMA,EACNya,IAAKj7B,KAAKi7B,IACVtyB,GAAI3I,KAAK2I,GACTmU,MAAOA,EACPK,MAAOA,EACP+d,OAAQl7B,KAAKk7B,OACbW,eAAgBA,EAChBC,oBAAqBA,EACrBpe,cAAe1d,KAAK0d,cACpBD,kBAAmBzd,KAAKyd,wB,GAtiBInT,IAAMzI,YFyExC,CACE84B,KAAM,UACNC,UAAW7wB,GAEb,CACE4wB,KAAM,sBACNC,UAAWuC,GAEb,CACExC,KAAM,aACNC,UAAWhwB,GAEb,CACE+vB,KAAM,iBACNC,UAAWzyB,GAGb,CACEwyB,KAAM,kBACNC,UAAW7mB,IAGb,CACE4mB,KAAM,UACNC,UAAW1qB,IAEb,CACEyqB,KAAM,sBACNC,UAAWrnB,IAEb,CACEonB,KAAM,aACNC,UAAWhoB,IAEb,CACE+nB,KAAM,iBACNC,UAAWxsB,IAGb,CACEusB,KAAM,aACNC,UAAWvmB,IAEb,CACEsmB,KAAM,4BACNC,UAAWjmB,IAEb,CACEgmB,KAAM,gBACNC,UAAWnmB,IAEb,CACEkmB,KAAM,uBACNC,UAAW3mB,IAGb,CACE0mB,KAAM,UACNC,UAAWrkB,IAEb,CACEokB,KAAM,sBACNC,UAAWwC,IAEb,CACEzC,KAAM,aACNC,UAAW5jB,IAEb,CACE2jB,KAAM,iBACNC,UAAW5kB,IAGb,CACE2kB,KAAM,aACNC,UAAW9hB,IAEb,CACE6hB,KAAM,4BACNC,UAAWyC,IAEb,CACE1C,KAAM,gBACNC,UAAW9gB,IAEb,CACE6gB,KAAM,uBACNC,UAAWtiB,IAEb,CACEqiB,KAAM,yBACNC,UAAW1gB,IAEb,CACEygB,KAAM,qBACNC,UAAWvgB,IAGb,CACEsgB,KAAM,aACNC,UAAWpjB,IAEb,CACEmjB,KAAM,4BACNC,UAAW0C,IAEb,CACE3C,KAAM,gBACNC,UAAWljB,IAEb,CACEijB,KAAM,uBACNC,UAAWzjB,IAGb,CACEwjB,KAAM,OACNC,UGtMW,kBACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQn5B,MAAM,YAAY+H,SAAS,SACnC,kBAAC,IAAD,CAAOiD,QAAM,GACX,oCACA,gE,0CCIc8wB,QACW,cAA7B19B,OAAOM,SAASq9B,UAEe,UAA7B39B,OAAOM,SAASq9B,UAEhB39B,OAAOM,SAASq9B,SAASrf,MACvB,2DCUNlU,IAAWwzB,IAAIC,KAGfC,IAASC,OAAOtzB,IAAMuzB,eCTP,SAAUp4B,GAGvB,IAAMq4B,EAAW,CACfn5B,GAAI,wBACJ6B,KAAM,aACNu3B,MAAO,SACPC,MAAO,CACLC,gBAAiB,KAEnBC,MAAO,CACLC,SAAS,GAEX59B,KAAM,GAKN69B,WAGF,OACE,kBAAC,IAAD,CAAKz6B,OAAQm6B,GAEX,kBAAC,IAAD,MAGA,kBAAC,IAAD,CAAOO,MAAI,EAACC,OAAK,EAAEC,WAAS,GAC1B,kBAAC,IAAD,CAAM15B,IAAI,kBAIZ,kBAAC,IAAD,CAAO25B,OAAK,EAACC,QAAM,EAACF,WAAS,GAC3B,kBAAC,IAAD,CAAM15B,IAAI,mBAIZ,kBAAC,IAAD,CAAMF,GAAG,YAAYE,IAAI,IAAI65B,WAAW,EAAOC,MAAI,EAACj+B,UAAU,mBD3BlEie,SAAS8d,eAAe,SDiGpB,kBAAmB1e,WACrBA,UAAU6gB,cAAcC,MAAMx6B,MAAK,SAAAy6B,GACjCA,EAAaC,iB,iBGnInBC,EAAOC,QAAU,CAGf,cAAe,uCACf,iBAAkB,qBAGlB,mCAAoC,KACpC,mCAAoC,KACpC,mCAAoC,KACpC,mCAAoC,KACpC,mCAAoC,KACpC,mCAAoC,KACpC,2CAA4C,aAC5C,qCAAsC,OACtC,0CAA2C,aAC3C,uCAAwC,SAGxC,8CAA+C,eAC/C,uCAAwC,OACxC,6CAA8C,YAG9C,wCAAyC,WACzC,4CAA6C,gBAC7C,yCAA0C,aAG1C,kCAAmC,QAGnC,4CAA6C,OAG7C,wCAAyC,YAGzC,sCAAuC,UACvC,mCAAoC,OACpC,mCAAoC,OAGpC,kCAAmC,qBACnC,uCAAwC,mDACxC,kCAAmC,iCACnC,yCAA0C,iGAG1C,kCAAmC,OACnC,oCAAqC,SACrC,uCAAwC,YACxC,2CAA4C,gBAC5C,uCAAwC,YACxC,yCAA0C,cAC1C,uCAAwC,YAGxC,qCAAsC,gEACtC,sCAAuC,2BACvC,4CAA6C,uGAC7C,gCAAiC,iCACjC,kCAAmC,oDAGnC,gCAAiC,OACjC,qCAAsC,YACtC,mCAAoC,UACpC,kCAAmC,SACnC,mCAAoC,UAGpC,oCAAqC,SAGrC,0CAA2C,aAC3C,qCAAsC,OACtC,uCAAwC,SACxC,sCAAuC,QACvC,wCAAyC,a","file":"static/js/main.73abf6b2.chunk.js","sourcesContent":["export const dict = {\n  'home' : '',\n  'name' : '    ',\n  'login' : '',\n  'username' :  '  ',\n  'password' : '  ',\n  'password_confirmation': '  ',\n  'mobile' : '  ',\n  'error': '',\n  'sign_in' : ' ',\n  'sign_up' : ' ',\n  'back' : '',\n  'signed_up_already': '     ',\n  'new_advert': '  ',\n  'title': '',\n  'abstract': '',\n  'content': '',\n  'submit': ' ',\n  'upload_from_gallery': '  ',\n  'welcome': ' ',\n  'sign_out': '',\n  'phone_number': ' ',\n  'telegram_channel': ' ',\n  'instagram_page': ' ',\n  'address': ' ',\n  'email': ' ',\n  'contact_information':'  ',\n  'search': ' ',\n  'cancel' : '',\n  'view': '',\n  'edit': '',\n  'delete': '',\n  'adverts_nes': '      ',\n  'my_pins': '   ',\n  'pin' : ' ',\n  'pinned': ' ',\n  'message_to_seller': ' ',\n  'messages': '  ',\n  'send_message': '   ',\n  'province': '',\n  'city': '',\n  'website': '',\n  'call': ' ',\n  'ago': ' ',\n  'all_above': '   ',\n  'no_result': '   ',\n  'category': '  ',\n  'leg':'',\n  'date':'',\n  'time': '',\n  'numberOfPassngers': '  ',\n  'surename': ' ',\n  'fathername':' ',\n  'ssn':'',\n  'birthplace':' ',\n  'pass_no': ' ',\n  'birthdate': ' ',\n  'place_of_birth': ' ',\n  'required_fields': ' ',\n  'en_father_name': '  ',\n  'en_name': ' ',\n  'en_surename': '   ',\n  'passport_no': ' ',\n  'final_confirm' : '  ',\n  'document_form': '  ',\n  'save': '',\n  'documents':' ',\n  'type' : '',\n  'string': ' ',\n  'text': ' ',\n  'select': '',\n  'multiSelect': ' ',\n  'table': '',\n  'date':'',\n  'refundable': ' ',\n  'yes':'',\n  'no':'',\n  'commentable':' ',\n  'end_point':' ',\n  'start_point':' ',\n  'votable':' ',\n  'publishable':' ',\n  'field_name': ' ',\n  'add': ' ',\n  'remove': '',\n  'auxiliary_tables': ' ',\n  'create_by':'  ',\n  'list': '',\n  'workflows': ' ',\n  'auxiliary_records': ' ',\n  'basic_table': ' ',\n  'relation_table': ' ',\n  'auxiliary_table_form': '   ' ,\n  'Basic': '',\n  'Relation': ' ',\n  'Divan': '',\n  'workflow_form':'  ',\n  'submitting':'   ... ',\n  'settings':'',\n  'receiving':'   ...',\n  'workflow_tables': '    ',\n  'auxiliary_table': ' ',\n  'workflow':' ',\n  'actions' : '',\n  'roles': ' ',\n  'divan': '',\n  'enter_your_email': '    ',\n  'enter_your_password': '     ',\n  'enter_your_password_confirmation': '     ',\n  'profiles': ' ',\n  'firstname': '',\n  'if_registered': '     ',\n  'you_can_login':'  ',\n  'if_not_registered': '    ',\n  'you_can_sign_up':'  ',\n  'new_assignment': '  ',\n  'posts': ' ',\n  'bookmark': '',\n  'like':'',\n  'follow':'',\n  'share':'',\n  'social_acts':'  ',\n  'channels': ' ',\n  'close': '',\n  'channel':' ',\n  'details': '',\n  'Shoa': ' ',\n  'role': '',\n  'Default': ' ',\n  'NonDefault':'   ',\n  'value': ' ',\n  'true': '',\n  'false': '',\n  'access_control_list':'  ',\n  'access_control_form':'  ',\n  'assignment_form':'  ',\n  'comment_form': ' ',\n  'post_form': ' ',\n  'metas':' ',\n  'shoa': '',\n  'form' : ' ',\n  'choose_image': ' ',\n  'logout': '',\n  'more': ' ...',\n  'social': '',\n  'others': '',\n  'related' : '',\n  'mine': '',\n  'info':'',\n  'admins': '',\n  'recent_posts': '  ',\n  'profile_info':'  ',\n  'experties': '    ',\n  'new_experties': ' ',\n  'notifications' : ' ',\n  'enter_your_name':'    ',\n  'enter_your_surename':'     ',\n  'incomplete_data':' ',\n  'alert':'',\n  'followers': ' ',\n  'followees':' ',\n  'verification': ' ',\n  'verification_code':  ' ',\n  'enter_verification_code':  '    ',\n  'faculty': '',\n  'enter_your_faculty': '     ',\n  'new_post' : ' ',\n  'full_list': ' ',\n  'privacy_settings': ' ',\n  'global_settings' : ' ',\n  'message': '',\n  'completed_successfully': '   ',\n  'cas': '  '\n};\n","import React, { Component } from 'react';\nimport { Menu, MenuItem, MenuDropdown, MenuDropdownItem, Page, Navbar, Block, BlockTitle, List, ListItem, FabButton, FabButtons, Fab, Icon } from 'framework7-react';\nimport { dict } from '../../Dict';\nexport default class PanelRightPage extends Component {\n  constructor() {\n    super();\n    this.logout = this.logout.bind(this);\n    this.state = {\n      token: window.localStorage.getItem('token'),\n    }\n  }\n\n  logout(){\n    this.setState({token: null});\n    window.localStorage.removeItem('token');\n    window.location.reload()\n  }\n\n  logged_in(token) {\n    if (token) {\n      return (\n        <React.Fragment>\n          <BlockTitle>{dict.user_settings}</BlockTitle>\n          <List>\n            <ListItem view=\"#main-view\" panelClose onClick={this.logout}>\n            <i className=\"va ml-5 fa fa-power-off\"></i>\n              <span>{dict.logout}</span>\n            </ListItem>\n          </List>\n          <BlockTitle> <i className=\"va ml-5 fa fa-users\"></i>{dict.social}</BlockTitle>\n          <List>\n            <ListItem link=\"/posts/\" ignoreCache={false} reloadCurrent={false} view=\"#main-view\" panelClose>\n              <i className=\"va ml-5 fa fa-pencil\"></i>\n              <span>{dict.posts}</span>\n            </ListItem>\n            \n            <ListItem link=\"/channels/\" ignoreCache={false} reloadCurrent={false} view=\"#main-view\" panelClose>\n            <i className=\"va ml-5 fa fa-bullhorn\"></i>\n              <span>{dict.channels}</span>\n            </ListItem>\n            \n            <ListItem link=\"/profiles/\" ignoreCache={false} reloadCurrent={false} view=\"#main-view\" panelClose>\n              <i className=\"va ml-5 fa fa-user-circle-o\"></i>\n              <span>{dict.profiles}</span>\n            </ListItem>\n\n            <ListItem link=\"/notifications/\" ignoreCache={false} reloadCurrent={false} view=\"#main-view\" panelClose>\n              <i className=\"va ml-5 fa fa-circle-o-notch\"></i>\n              <span>{dict.notifications}</span>\n            </ListItem>\n\n            <ListItem link=\"/rooms/\" ignoreCache={false} reloadCurrent={false} view=\"#main-view\" panelClose>\n              <i className=\"va ml-5 fa fa-address-card-o\"></i>\n              <span>{dict.rooms}</span>\n            </ListItem>\n\n            </List>\n            <BlockTitle> <i className=\"va ml-5 fa fa-cogs\"></i>{dict.settings}</BlockTitle>\n            <List>\n            <ListItem link=\"/settings/\" ignoreCache={true} view=\"#main-view\" panelClose>\n            <i className=\"va ml-5 fa fa-cog\"></i>\n              <span>{dict.global_settings}</span>\n            </ListItem>\n            <ListItem link=\"/roles/\" ignoreCache={true} view=\"#main-view\" panelClose>\n            <i className=\"va ml-5 fa fa-shield\"></i>\n              <span>{dict.roles}</span>\n            </ListItem>\n            <ListItem link=\"/metas/\" ignoreCache={true} view=\"#main-view\" panelClose>\n            <i className=\"va ml-5 fa fa-th\"></i>\n              <span>{dict.metas}</span>\n            </ListItem>\n            <ListItem link=\"/privacy_settings/\" ignoreCache={true} view=\"#main-view\" panelClose>\n            <i className=\"va ml-5 fa fa-vcard\"></i>\n              <span>{dict.privacy_settings}</span>\n            </ListItem>\n          </List>\n        </React.Fragment>\n      )\n    } else {\n      return (\n        <React.Fragment> \n          <BlockTitle>{dict.user_settings}</BlockTitle>\n          <List>\n            <ListItem link=\"/login/\" title={dict.login} view=\"#main-view\" panelClose></ListItem>\n          </List>\n        </React.Fragment>\n      )\n    }\n  }\n\n  render() {\n    const { token } = this.state;\n    return (\n      <Page >\n        <Navbar ><span className='jc-center white'><i className=\"va ml-5 fa fa-umbrella\"></i>{dict.Shoa}</span></Navbar>\n        {this.logged_in(token)}\n      </Page>\n    );\n  }\n}","import { Dispatcher } from \"flux\";\n\nexport default new Dispatcher;\n","import { EventEmitter } from \"events\";\n\nimport dispatcher from \"../dispatcher\";\n\nclass ModelStore extends EventEmitter {\n  constructor() {\n    super()\n    this.list = [];\n    this.instance = null;\n    this.klass= null;\n  }\n\n  listModel(list){\n    this.list = [];\n    this.klass = list.klass\n    for (var i = 0, len = list.data.length; i < len; ++i) {\n      this.list.push(list.data[i]);\n      if (i === len - 1 ) {\n        this.emit(\"got_list\");\n      }\n    }\n    if(list.data.length == 0){\n      this.emit(\"got_list\");\n    }\n\n  }\n\n  showIntance(instance){\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"got_instance\");\n  }\n\n  setIntance(instance){\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"set_instance\");\n  }\n\n\n  deleteIntance(instance){\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"deleted_instance\");\n  }\n\n  postFile(instance){\n    console.log(instance)\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"file_posted\");\n  }\n\n  getIntance() {\n    return this.instance\n  }\n\n  getList(){\n    return this.list\n  }\n\n  getListnKlass(){\n    return [this.list, this.klass]\n  }\n\n  getKlass(){\n    return this.klass\n  }\n\n  handleActions(action) {\n    switch(action.type) {\n      case \"LIST_MODEL_SUCCESS\": {\n        this.listModel(action.list);\n        break;\n      }\n      case \"GET_INSTANCE_SUCCESS\": {\n        this.showIntance(action.instance);\n        break;\n      }\n      case \"DELETE_INSTANCE_SUCCESS\": {\n        this.deleteIntance(action.instance);\n        break;\n      }\n      case \"SET_INSTANCE_SUCCESS\": {\n        this.setIntance(action.instance);\n        break;\n      }\n      case \"POST_FILE_SUCCESS\": {\n        this.postFile(action.instance);\n        break;\n      }\n\n      \n    }\n  }\n}\n\n\nconst modelStore = new ModelStore;\ndispatcher.register(modelStore.handleActions.bind(modelStore));\n\nexport default modelStore;\n","export const conf = { \n'server' : '/v1',\n'janusServer' : 'https://kaarafarinan.ir:8089/janus'\n};","import dispatcher from \"../dispatcher\";\nimport axios, {put} from 'axios';\nimport { conf } from '../conf';\nconst server= conf.server;\n//const server='/v1';\n//const server='http://95.156.255.115/api';\n\n\nexport function getList(model, page=1, params={}, token) {\n  var queryString = Object.keys(params).map(key => key + '=' + params[key]).join('&');\n  axios.get(server + '/'+ model +'?page='+page+'&'+queryString, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"LIST_MODEL_SUCCESS\",\n      list: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function fileUpload(model, id , file, token){\n  const url = server + '/'+ model +'/'+id;\n  const formData = new FormData();\n  formData.append('profile[avatar]',file)\n  formData.append('profile[id]',id)\n  const config = {\n      headers: {\n          'content-type': 'multipart/form-data',\n          'Authorization': \"bearer \" + token \n      }\n  }\n  put(url, formData,config).then(function (response) {\n    dispatcher.dispatch({\n      type: \"POST_FILE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function getInstance(model, id, token, page=1) {\n  axios.get(server + '/'+ model +'/'+id+'?page='+page, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"GET_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function removeInstance(model, params={}, token ) {\n  var queryString = Object.keys(params).map(key => key + '=' + params[key]).join('&');\n  axios.get(server + '/'+ model +'/delete?'+queryString, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"DELETE_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function setInstance(model, data, token) {\n  axios.post(server + '/'+ model +'/', data, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"SET_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function updateInstance(model, data, token) {\n  axios.put(server + '/'+ model +'/'+data.id, data, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"SET_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n","import React from \"react\";\n\nconst ActualOptions = (props) => {\n  var options = [<option value=''></option>]\n  if(props.content){\n    for (let i = 0; i < props.content.length; i++) {\n      options.push(\n        <option value={props.content[i].content[0].fid}>\n          {props.content[i].content[0].value}\n        </option>\n      )\n    }\n\n  }\n  return options\n\n}\nexport default ActualOptions;","import React from \"react\";\nimport { List, ListInput, BlockTitle, Block, Link, Button, Card, CardHeader, CardFooter, ListItem, Row} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ActualOptions from \"../actuals/options\";\n\nconst ActualForm = (props) => {\n    if (props.meta && props.meta.meta_schema) {\n\n        var meta_schema = props.meta.meta_schema\n        var items = []\n        for (let i = 0; i < meta_schema.length; i++) {\n          switch (meta_schema[i].type) {\n            case 'String':\n            items.push(\n              <ListInput\n                label={meta_schema[i].label}\n                type=\"text\"\n                placeholder=\"...\"\n                onInput={(e) => props.onChangeValue(meta_schema[i].fid, e.target.value, props.meta.id)}\n                />)\n            break;\n            case 'Text':\n                items.push(\n                  <ListInput\n                    label={meta_schema[i].name}\n                    type=\"textarea\"\n                    placeholder=\"...\"\n                    onInput={(e) => props.onChangeValue(meta_schema[i].fid, e.target.value, props.meta.id)}\n                    />\n                )\n            break;\n            case 'Table':\n                if (meta_schema[i].content) {\n                  items.push(\n                    <ListItem\n                      title={meta_schema[i].content.title}\n                      smartSelect\n                      smartSelectParams={{pageBackLinkText: dict.back}}\n                      >\n                      <select name=\"content\"\n                        onChange={(e) => props.onChangeValue(meta_schema[i].fid, e.target.value, props.meta.id)}\n                        >\n                        <ActualOptions content={meta_schema[i].content}/>\n                      </select>\n                    </ListItem>\n                  )}\n              break;\n            }\n            }\n              var submit = null\n              if (props.submit) {\n                submit = <CardFooter><Link></Link><Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button></CardFooter>\n              }\n              return(\n                <Card>\n                  <CardHeader>{dict.form} {props.meta.label}</CardHeader>\n                  <List form>\n                    {items}\n                    {submit}\n                  </List>\n                </Card>\n              )\n            }\n            else {\n              return(<div></div>)\n            }\n          }\n  export default ActualForm;\n","import React from \"react\";\nimport { Button, Icon, Card, ListInput, List, BlockTitle} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport crypto from 'crypto-js';\nconst ActualList = (props) => {\n  var meta_schema =props.meta.meta_schema\n  if(props.meta && props.actuals){\n  var body = [<BlockTitle>{props.meta.label}</BlockTitle>]\n    var td = []\n    var actuals =  props.actuals\n    for (let i = 0; i < actuals.length; i++) {\n     var content = actuals[i].content\n     var td = []\n      for (let j= 0; j < content.length; j++) {\n        //console.log(content[j])\n          td.push(<ListInput key={crypto.lib.WordArray.random(32)} label={content[j].label} type=\"text\" defaultValue={content[j].value}/>)\n        \n        if( props.editable && content[j] && j == meta_schema.length - 1 && props.meta.id == content[j].metaId){\n          td.push(<Button color='gray' onClick={() => props.removeActual(actuals[i].uuid)}>\n          <Icon ios=\"f7:trash\" aurora=\"f7:trash\" md=\"material:trash\"></Icon>\n        </Button>)\n        }\n      }\n      body.push(<Card><List key={crypto.lib.WordArray.random(32)}>{td}</List></Card>)\n    }\n\n    \n\n\n  return(\n    <React.Fragment>\n      {body}\n    </React.Fragment>\n  )\n}\nelse {\n  return(<div></div>)\n}\n}\nexport default ActualList;","import React from \"react\";\nimport { Card, CardHeader, List, BlockTitle, ListItem, Fab, Icon,Preloader, Block} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ActualForm from \"../actuals/form\";\nimport ActualList from \"../actuals/list\";\nimport JSONPretty from 'react-json-pretty';\n\nconst MetaShow = (props) => {\n  if (props.meta){\n    return(\n      <React.Fragment>\n        <Card>\n        <CardHeader>{dict.title}: {props.meta.title}</CardHeader>\n        <List simple-list>\n          <ListItem className=''>\n          <JSONPretty id=\"json-pretty\" data={JSON.stringify(props.meta.meta_schema)}></JSONPretty></ListItem>\n        </List>\n        </Card>\n        <ActualList meta={props.meta} editable={true} actuals={props.meta.actuals} removeActual={props.removeActual} />\n        <ActualForm meta={props.meta} submit={props.submit} onChangeValue={props.handleChangeValue} />\n      </React.Fragment>\n    )\n  } else {\n    return(null)\n  }\n}\nexport default MetaShow;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon, Fab\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport MetaShow from \"../../containers/metas/show\"\n\nexport default class Layout extends Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.submit = this.submit.bind(this);\n    this.removeActual = this.removeActual.bind(this);\n\n    \n    this.state = {\n      meta: null,\n      metaId: null,\n      token: window.localStorage.getItem('token'),\n      fields: [],\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.getInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    MyActions.getInstance('metas', this.$f7route.params['metaId']);\n  }\n\n  getInstance() {\n    var meta = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (meta && klass === 'Meta') {\n      this.setState({\n        meta: meta,\n        metaId: meta.id \n      });\n    }\n  }\n\n  handleChangeValue(key, value) {\n    var fields = this.state.fields\n    if (fields.length > 0) {\n      for (let i = 0; i < fields.length; i++) {\n        if (fields[i].fid && fields[i].fid === key) {\n          let newState = Object.assign({}, this.state);\n          newState.fields[i] = { fid: key, value: value }\n          this.setState(newState);\n        } else {\n          this.setState({ fields: this.state.fields.concat({ fid: key, value: value }) });\n        }\n      }\n    } else {\n      this.setState({ fields: this.state.fields.concat({ fid: key, value: value }) });\n    }\n  }\n\n  removeActual(uuid){\n    MyActions.removeInstance('actuals', {uuid: uuid});\n  }\n\n  submit(){\n    var data = {meta_id: this.state.metaId, content: this.state.fields}\n    MyActions.setInstance('actuals', data, this.state.token);\n  }\n\n  fab() {\n    if (this.state.meta) {\n      return (\n        <Fab href={\"/metas/\" + this.state.meta.id + \"/edit\"} target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"lime\">\n          <Icon ios=\"f7:edit\" aurora=\"f7:edit\" md=\"material:edit\"></Icon>\n          <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n        </Fab>\n      )\n    }\n  }\n\n  render() {\n    const { meta } = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.metas} backLink={dict.back} />\n        <BlockTitle></BlockTitle>\n        {this.fab()}\n        <MetaShow meta={meta} removeActual={this.removeActual} handleChangeValue={this.handleChangeValue} submit={this.submit}/>\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { List, ListItem} from 'framework7-react';\nimport crypto from 'crypto-js';\n\nconst MetaList = (props) => {\n\n  if (props.metas) {\n    return (\n      <List mediaList>\n        {props.metas.map((meta) =>\n          <ListItem\n            key={crypto.lib.WordArray.random(32)}\n            link={\"/metas/\" + meta.id}\n            ignoreCache={true}\n            title={meta.title}\n            after=\"\"\n            subtitle=\"\"\n            text=\"\"\n            ></ListItem>\n        )}\n      </List>\n    )} else {\n      return (<ul></ul>)\n    }\n  }\n  export default MetaList;\n","import React from \"react\";\nimport { Page, Navbar, List, BlockTitle, ListItem, Fab, Icon,Preloader, Block} from 'framework7-react';\nimport MetaList from \"./list\"\nimport { dict} from '../../Dict';\n\nconst MetaIndex = (props) => {\n  return(\n    <Page>\n      <Navbar title={dict.metas} backLink={dict.back} >\n      </Navbar>\n      <BlockTitle>{dict.list}</BlockTitle>\n      <Fab href=\"/metas/new\" target=\"#main-view\"  position=\"left-bottom\" slot=\"fixed\" color=\"deeporange\">\n        <Icon ios=\"f7:add\" aurora=\"f7:add\" md=\"material:add\"></Icon>\n        <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n      </Fab>\n      <MetaList metas={props.metas}/>\n    </Page>\n  )\n}\nexport default MetaIndex;\n","import React from \"react\"\nimport { Page,Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport MetaIndex from \"../../containers/metas/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict} from '../../Dict';\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n\nexport default class Layout extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.state = {\n      metas: null,\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    MyActions.getList('metas', this.state.page);\n  }\n\n  getList() {\n    var metas = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (metas  && klass === 'Meta'){\n      this.setState({\n        metas: metas,\n      });\n    }\n  }\n\n  render() {\n    const {metas} = this.state;\n    return(<MetaIndex metas={metas}/>)\n  }\n}\n","import React from \"react\";\nimport { List, ListItem, ListInput, Card, CardFooter, Button, Link } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\n\n\n\nconst MetaForm = (props) => {\n  return (\n    <Card>\n      <List form>\n        <ListInput\n          label={dict.title}\n          type=\"text\"\n          placeholder='...'\n          defaultValue={props.meta.title}\n          onInput={(e) => {\n            props.handleChange({ title: e.target.value })\n          }}\n        />\n        <ListInput\n          label={dict.label}\n          type=\"text\"\n          placeholder='...'\n          defaultValue={props.meta.label}\n          onInput={(e) => {\n            props.handleChange({ label: e.target.value })\n          }}\n        />\n        <ListInput\n          label=\"Schema\"\n          type=\"text\"\n          inputStyle={{direction: 'ltr'}}\n          defaultValue={JSON.stringify(props.meta.meta_schema)}\n          placeholder=\"JSON\"\n          onInput={(e) => {\n            props.handleChange({ metaSchema: e.target.value })\n          }}\n        ></ListInput>\n\n\n      </List>\n      <CardFooter>\n        <Link></Link>\n        <Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button>\n      </CardFooter>\n    </Card>\n  )\n}\nexport default MetaForm;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport MetaForm from \"../../containers/metas/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class MetaCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      meta: {},\n      metaSchema: null,\n      title: null,\n      label: null,\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  submit(){\n    var data = {title: this.state.title, label: this.state.label,  meta_schema: this.state.metaSchema}\n    MyActions.setInstance('metas', data, this.state.token);\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/metas/');\n  }\n\n\n\n  render() {\n    const {meta} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.meta_form} backLink={dict.back} />\n        <BlockTitle>{dict.meta_form}</BlockTitle>\n        <MetaForm meta={meta} submit={this.submit} editing={true} handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport MetaForm from \"../../containers/metas/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n\nexport default class DocumentUpdate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n\n\n    this.state = {\n      meta : {},\n      title: null,\n      metaSchema: null,\n      id: null,\n      label: null,\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n\n  }\n\n\n  submit(){\n    var data = {id:this.state.id, title: this.state.title, label: this.state.label, meta_schema: this.state.metaSchema}\n    MyActions.updateInstance('metas', data);\n  }\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    if (this.$f7route.params['metaId']) {\n      MyActions.getInstance('metas', this.$f7route.params['metaId']);\n    }\n  }\n\n\n  getInstance(){\n    var meta = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    console.log(meta);\n    if (meta && klass === 'Meta'){\n      this.setState({\n        title: meta.title,\n        id: meta.id,\n        meta: meta,\n        metaSchema: meta.metaSchema,\n        label: meta.label\n      });\n    }\n  }\n\n  handleChangeValue(obj) {\n    console.log(obj);\n    this.setState(obj);\n  }\n\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/metas/');\n  }\n\n\n  render() {\n        const {meta} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.meta_form} backLink={dict.back} />\n        <BlockTitle>{dict.meta_form}</BlockTitle>\n        <MetaForm meta={meta} submit={this.submit} editing={true} handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { Actions, ActionsLabel, ActionsGroup, ActionsButton, Icon, Button, Sheet, Toolbar, Link, PageContent, Block} from 'framework7-react';\nimport { dict} from '../../Dict';\n\n\nconst InteractionMenu = (props) => {\n  if (props.model){\n    return(\n      <React.Fragment>\n\n      <Actions id={\"actions-two-groups-\"+props.model.id}>\n        <ActionsGroup>\n          <ActionsLabel>{dict.social_acts}</ActionsLabel>\n          <ActionsButton onClick={() => props.interaction('Bookmark', props.model.id, props.klass, props.sourceType, props.sourceId)}><i className=\"va ml-5 fa fa-bookmark\"></i>{dict.bookmark} ({props.model.bookmarks})</ActionsButton>\n          <ActionsButton onClick={() => props.interaction('Like', props.model.id, props.klass, props.sourceType, props.sourceId)}><i className=\"va ml-5 fa fa-heart\"></i>{dict.like} ({props.model.likes})</ActionsButton>\n          <ActionsButton onClick={props.model.followed ? '':() => props.interaction('Follow', props.model.id, props.klass, props.sourceType, props.sourceId)}><i className=\"va ml-5 fa fa-link\"></i>{dict.follow} ({props.model.follows})</ActionsButton>\n        </ActionsGroup>\n        <ActionsGroup>\n          <ActionsButton color=\"red\">{dict.cancel}</ActionsButton>\n        </ActionsGroup>\n      </Actions>\n      \n      <Button className=\"col\"  href={false} actionsOpen={\"#actions-two-groups-\"+props.model.id}><i className=\"va fa fa-users\"></i></Button>\n      </React.Fragment>\n    )\n  } else {\n    return(null)\n  }\n}\nexport default InteractionMenu;\n","import React from \"react\";\nimport { Actions, ActionsLabel, ActionsGroup, ActionsButton, Icon, Button, Sheet, Toolbar, Link, PageContent, Block, ListInput, List, Row } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\n\nconst ShareMenu = (props) => {\n  if (props.model) {\n    if (props.channels) {\n      var options = []\n      for (let i = 0; i < props.channels.length; i++) {\n        options.push(\n          <option value={props.channels[i].id}>\n            {props.channels[i].title}\n          </option>\n        )\n      }\n    }\n    return (\n      <React.Fragment>\n        <Sheet className=\"demo-sheet\" opened={props.sheetOpened} onSheetClosed={() => { props.handleChange({ sheetOpened: false }) }}>\n          <Toolbar>\n            <div className=\"left\"></div>\n            <div className=\"right\">\n              <Link sheetClose>{dict.close}</Link>\n            </div>\n          </Toolbar>\n          {/*  Scrollable sheet content */}\n          <PageContent>\n\n            <List>\n              <ListInput\n                label={dict.channel}\n                type=\"select\"\n                onChange={(e) => {\n                  props.handleChange({ selectedChannel: e.target.value })\n                }\n                }\n              >\n                {options}\n              </ListInput>\n            </List>\n            <Block strong>\n              <Row tag=\"p\">\n                <Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button>\n              </Row>\n            </Block>\n          </PageContent>\n        </Sheet>\n\n        <Button className=\"col\" href={false} sheetOpen=\".demo-sheet\"><i class=\"va fa fa-retweet\"></i></Button>\n      </React.Fragment>\n    )\n  } else {\n    return (null)\n  }\n}\nexport default ShareMenu;\n","import React from \"react\";\nimport { List, ListInput, BlockTitle, Block, Link, Button, Card, CardHeader, CardFooter} from 'framework7-react';\nimport { dict} from '../../Dict';\n\nconst CommentForm = (props) => {\n    return (\n      <Card>\n        <CardHeader>{dict.comment_form}</CardHeader>\n        <List form>\n        <ListInput\n            label={dict.comment}\n            type=\"textarea\"\n            placeholder='...'\n            maxlength='300'\n            resizable\n            clearButton={true}\n            onInput={(e) => {\n              props.handleChange({ commentContent: e.target.value})\n            }}\n            />\n        </List>\n        <CardFooter>\n          <Link></Link>\n          <Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button>\n        </CardFooter>\n      </Card>\n    )\n  }\n  export default CommentForm;\n","import React from \"react\";\nimport { List, ListItem, BlockTitle, Row, Link, Col } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport 'moment/locale/fa';\n\nconst CommentList = (props) => {\n    var items = []\n    if (props.comments) {\n\n        for (let i = 0; i < props.comments.length; i++) {\n            var time = <React.Fragment><Link onClick={() => props.removeComment(props.comments[i].id)}><i className=\"va ml-5 fa fa-trash\"></i></Link><Moment locale=\"fa\" fromNow ago>{props.comments[i].created_at}</Moment>{dict.ago}</React.Fragment>\n            items.push(\n                <ListItem\n                    className='some-link'\n                    text={time}\n                    subtitle={props.comments[i].content}\n                >\n                    <img slot=\"media\" src={props.comments[i].profile.avatar} width=\"44\" />\n                </ListItem>\n\n            )\n        }\n\n        return (\n            <React.Fragment>\n                <BlockTitle>{dict.comments}</BlockTitle>\n                <List mediaList inset>\n                    {items}\n                </List>\n                <Row noGap>\n                    <Col></Col>\n                    <Col className='center'>\n                        <a className=\"gray-color\" onClick={() => props.loadMore()}>\n                            {dict.more}\n                        </a>\n                    </Col>\n                    <Col></Col>\n                </Row>\n            </React.Fragment>\n        )\n    }\n    else {\n        return (null)\n    }\n}\nexport default CommentList;","import React from \"react\";\nimport {List, BlockTitle, ListItem, Block, Row, Col, Button } from 'framework7-react';\nimport { stateToHTML } from \"draft-js-export-html\";\nimport { EditorState, convertFromRaw } from \"draft-js\";\nimport { Editor } from 'react-draft-wysiwyg';\nimport { dict } from '../../Dict';\nimport InteractionMenu from \"../interactions/menu\"\nimport ShareMenu from \"../shares/menu\"\nimport CommentForm from \"../comments/form\"\nimport CommentList from \"../comments/list\"\n\n\nconst PostShow = (props) => {\n  if (props.post && props.post.draft) {\n    const contentState = convertFromRaw(props.post.draft);\n    const editorState = EditorState.createWithContent(contentState);\n    return (\n      <React.Fragment>\n        <Block>\n          <Row>\n            <Col width='50' tabletWidth='70'></Col>\n            <Col width=\"25\" tabletWidth='15' className='ml-5'>\n              <Button fill><ShareMenu model={props.post} submit={props.submit} channels={props.channels} klass='Post' sheetOpened={props.sheetOpened} handleChange={props.handleChange} klass='Channel' interaction={props.interaction} /></Button>\n            </Col>\n            <Col width=\"25\" tabletWidth='15'>\n              <Button fill><InteractionMenu model={props.post} klass='Post' interaction={props.interaction} /></Button>\n            </Col>\n          </Row>\n        </Block>\n        <BlockTitle>{dict.title}</BlockTitle>\n        <List simple-list>\n          <ListItem>{props.post.title}</ListItem>\n        </List>\n\n        <BlockTitle>{dict.content}</BlockTitle>\n        <Editor editorState={editorState}\n          toolbar={{ options: [] }}\n          readOnly={true} \n          />\n\n        <CommentForm post={props.post} submit={props.submitComment} handleChange={props.handleChange} />\n        <CommentList comments={props.comments} removeComment={props.removeComment} loadMore={props.loadMore}/>\n      </React.Fragment>\n    )\n  } else {\n    return (null)\n  }\n}\nexport default PostShow;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon, Fab\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport PostShow from \"../../containers/posts/show\";\n\n\nexport default class Layout extends Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.interaction = this.interaction.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.getList = this.getList.bind(this);\n    this.submit = this.submit.bind(this);\n    this.submitComment = this.submitComment.bind(this);\n    this.removeComment = this.removeComment.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n\n\n\n\n    this.state = {\n      post: null,\n      id: null,\n      page: 1,\n      channels: null,\n      selectedChannel: null,\n      channelId: null,\n      sheetOpened: false,\n      commentContent: '',\n      comments: null,\n      token: window.localStorage.getItem('token'),\n\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    this.$$('.some-link').on('taphold', function (f7) {\n      f7.dialog.alert('Tap hold fired!');\n    });\n    MyActions.getInstance('posts', this.$f7route.params['postId'], this.state.token);\n    MyActions.getList('channels/my', this.state.page, {}, this.state.token);\n  }\n\n  getInstance() {\n    var post = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (post && klass === 'Post') {\n      this.setState({\n        post: post,\n        id: post.id,\n        comments: post.comments\n      });\n    }\n  }\n\n  getList() {\n    var channels = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (channels && klass === 'Channel') {\n      this.setState({\n        channels: channels,\n        channelId: channels[0].id\n      });\n    }\n    console.log(channels)\n  }\n\n  setInstance() {\n    var post = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (post && klass === 'Post') {\n      this.setState({\n        post: post,\n        comments: post.comments,\n        page: 1\n      });\n    }\n  }\n\n  loadMore() {\n    this.setState({ page: this.state.page + 1 }, () => {\n      MyActions.getInstance('posts', this.$f7route.params['postId'], this.state.token, this.state.page);\n    });\n  }\n\n  fab() {\n    if (this.state.post) {\n      return (\n        <Fab href={\"/posts/\" + this.state.post.id + \"/edit\"} target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"lime\">\n          <Icon ios=\"f7:edit\" aurora=\"f7:edit\" md=\"material:edit\"></Icon>\n          <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n        </Fab>\n      )\n    }\n  }\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n\n  interaction(interaction_type, interactionable_id, interactionable_type, source_type = null, source_id = null) {\n    var data = { interaction_type: interaction_type, interactionable_id: interactionable_id, interactionable_type: interactionable_type, source_type: source_type, source_id: source_id }\n    MyActions.setInstance('interactions', data, this.state.token);\n  }\n\n  submit() {\n    var data = { post_id: this.state.id, channel_id: this.state.selectedChannel }\n    MyActions.setInstance('shares', data, this.state.token);\n    const self = this;\n    self.$f7.sheet.close('.demo-sheet')\n  }\n\n  submitComment() {\n    var data = { post_id: this.state.id, content: this.state.commentContent }\n    MyActions.setInstance('comments', data, this.state.token);\n  }\n\n  removeComment(id) {\n    var data = { id: id }\n    MyActions.removeInstance('comments', data, this.state.token, this.state.page);\n  }\n\n  render() {\n    const { post, sheetOpened, channels, comments } = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.posts} backLink={dict.back} />\n        <BlockTitle></BlockTitle>\n        {this.fab()}\n        <PostShow post={post} comments={comments} channels={channels} submitComment={this.submitComment} removeComment={this.removeComment} submit={this.submit} interaction={this.interaction} handleChange={this.handleChangeValue} loadMore={this.loadMore} />\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { Card, CardHeader, Link, CardContent, Row, Col} from 'framework7-react';\nimport crypto from 'crypto-js';\nimport InteractionMenu from \"../interactions/menu\"\nimport { dict } from \"../../Dict\";\n\nconst PostList = (props) => {\n  if (props.posts && props.posts.length > 0) {\n    return (\n      <React.Fragment>\n        <Row noGap>\n          {props.posts.map((post) =>\n            <Col width=\"100\" tabletWidth=\"33\" key={crypto.lib.WordArray.random(128/8)}> \n              <Card className=\"demo-facebook-card\">\n                <CardHeader className=\"no-border\">\n                <div className=\"demo-facebook-avatar\"><Link tooltip={post.profile.fullname} href={'/profiles/' + post.profile.id}><img src={post.profile.avatar} height=\"34\" /></Link></div>\n                  <div className=\"demo-facebook-name \">\n                    <div className=\"demo-facebook-profile \">\n                      <Link className=\"gray-color\" href={'/profiles/' + post.profile.id}>{post.profile.fullname.substring(0, 40)}</Link>\n                    </div>\n                    <Link tooltip={dict.view} className=\"gray-color\" href={'/posts/' + post.id}>{post.title.substring(0, 15) + '..'}</Link></div>\n                  <div className=\"demo-facebook-date\">\n                    <InteractionMenu model={post} klass='Post' interaction={props.interaction} sourceType={props.sourceType} sourceId={props.sourceId} />\n                  </div>\n                </CardHeader>\n                <CardContent className='lightgray-color fs-12'>\n                  {post.content.substring(0, 150) + '...'}\n                  <div className=\"demo-facebook-more\">\n                    <Link className=\"gray-color\" href={'/posts/' + post.id}>\n                      {dict.view}\n                      <i className=\"va fa fa-arrow-left mr-2\"></i>\n                    </Link>\n                  </div>\n                </CardContent>\n              </Card>\n            </Col>\n          )}\n        </Row>\n        <Row noGap>\n          <Col></Col>\n          <Col className='center mb-20'>\n          <a className=\"gray-color\" onClick={() => props.loadMore()}>\n            {dict.more}\n          </a>\n          </Col>\n          <Col></Col>\n        </Row>\n      </React.Fragment>\n    )\n  } else {\n    return (<ul></ul>)\n  }\n}\nexport default PostList;\n","import React from \"react\";\nimport { Page, Navbar, Subnavbar, Searchbar, BlockTitle, Link, Fab, Icon, Toolbar, Tabs, Tab, Block } from 'framework7-react';\nimport PostList from \"./list\"\nimport { dict } from '../../Dict';\n\nconst PostIndex = (props) => {\n  return (\n    <Page pageContent={false}>\n      <Navbar title={dict.posts} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n        <Subnavbar inner={false}>\n          <Searchbar\n            disableButtonText={dict.cancel}\n            placeholder={dict.search}\n            onChange={(e) => {\n              props.search({ query: e.target.value })\n            }}\n          ></Searchbar>\n        </Subnavbar>\n      </Navbar>\n      <Toolbar tabbar bottom>\n          <Link tabLink=\"#tab-1\" tabLinkActive><i className=\"va ml-5 fa fa-link\"></i></Link>\n          <Link tabLink=\"#tab-2\"><i className=\"va ml-5 fa fa-plug\"></i></Link>\n          <Link tabLink=\"#tab-3\"><i className=\"va ml-5 fa fa-user-o\"></i></Link>\n        </Toolbar>\n      <BlockTitle></BlockTitle>\n      <Fab href=\"/posts/new\" target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"deeporange\">\n        <Icon ios=\"f7:add\" aurora=\"f7:add\" md=\"material:add\"></Icon>\n        <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n      </Fab>\n      <Tabs swipeable>\n        <Tab id=\"tab-1\" className=\"page-content\" tabActive>\n          <Block>\n            <PostList posts={props.posts} interaction={props.interaction} loadMore={props.loadMore} />\n          </Block>\n        </Tab>\n\n        <Tab id=\"tab-2\" className=\"page-content\" >\n          <Block>\n            <PostList posts={props.posts} interaction={props.interaction} loadMore={props.loadMore} />\n          </Block>\n        </Tab>\n\n        <Tab id=\"tab-3\" className=\"page-content\" >\n          <Block>\n            <PostList posts={props.posts} interaction={props.interaction} loadMore={props.loadMore} />\n          </Block>\n        </Tab>\n      </Tabs>\n    </Page>\n  )\n}\nexport default PostIndex;\n","\nexport function loggedIn() {\n  console.log('>>>>>>>>>>>>>>>>>>>>>');\n    var token = window.localStorage.getItem('token');\n    if (token) {\n      return true\n    } else {\n      this.$f7router.navigate('/login/');\n    }\n\n}\n","import React from \"react\"\nimport { Page, Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport PostIndex from \"../../containers/posts/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { loggedIn } from \"../../components/users/loggedIn.js\"\n\n\nexport default class Post extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.loggedIn = loggedIn.bind(this);\n    this.interaction = this.interaction.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.search = this.search.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      posts: [],\n      query: null,\n      page: 1\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  componentDidMount() {\n    this.loggedIn();\n    this.loadData();\n  }\n\n  loadData() {\n    MyActions.getList('posts', this.state.page, {}, this.state.token);\n  }\n\n  search(obj) {\n    this.setState({ posts: [], page: 1 });\n    this.setState(obj, () => {\n      MyActions.getList('posts/search', this.state.page, { q: this.state.query });\n    });\n\n  }\n\n  setInstance() {\n    var post = ModelStore.getIntance()\n    if (post) {\n      this.setState({ posts: this.state.posts.map(el => (el.id === post.id ? Object.assign({}, el, post) : el)) });\n    }\n  }\n\n\n  loadMore() {\n    if (this.state.query && this.state.query.length > 0) {\n      this.setState({ page: this.state.page + 1 }, () => {\n        MyActions.getList('posts/search', this.state.page, {q: this.state.query }, this.state.token);\n      });\n    } else {\n      this.setState({ page: this.state.page + 1 }, () => {\n        MyActions.getList('posts', this.state.page, {}, this.state.token);\n      });\n    }\n  }\n\n  getList() {\n    var posts = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (posts.length > 0 && klass === 'Post') {\n      this.setState({\n        posts: this.state.posts.concat(posts),\n      });\n    }\n  }\n\n  interaction(interaction_type, interactionable_id, interactionable_type, source_type = null, source_id = null) {\n    var data = { interaction_type: interaction_type, interactionable_id: interactionable_id, interactionable_type: interactionable_type, source_type: source_type, source_id: source_id }\n    MyActions.setInstance('interactions', data, this.state.token);\n  }\n\n  render() {\n    const { posts } = this.state;\n    return (<PostIndex interaction={this.interaction} loadMore={this.loadMore} posts={posts} search={this.search} />)\n  }\n}\n","import React from \"react\";\n\nconst ChannelOptions = (props) => {\n  var options = [<option value=''></option>]\n  if(props.content){\n\n    for (let i = 0; i < props.content.length; i++) {\n      options.push(\n        <option value={props.content[i].id}>\n          {props.content[i].title}\n        </option>\n      )\n    }\n\n  }\n  return options\n\n}\nexport default ChannelOptions;","import React from \"react\";\nimport { List, ListItem, ListInput, Link, CardFooter, Button, Card, CardHeader } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertFromRaw } from \"draft-js\";\nimport ChannelOptions from \"../channels/options\";\n\n\nimport fa from '../../js/fa.js';\nconst PostForm = (props) => {\n  if (props.post) {\n    var channels = null;\n    if (props.channels) {\n      channels =\n        <ListItem\n          title={dict.channel}\n          smartSelect\n          smartSelectParams={{ pageBackLinkText: dict.back, searchbar: true, searchbarPlaceholder: dict.search }}\n        >\n          <select name=\"content\"\n            defaultValue={props.channelId}\n            onChange={(e) => {\n              props.handleChange({ channelId: e.target.value })\n            }}>\n            <ChannelOptions content={props.channels} />\n          </select>\n        </ListItem>\n    }\n    return (\n      <React.Fragment>\n        <Card>\n          <CardHeader>{dict.new_post}</CardHeader>\n          <List form>\n            {channels}\n            <ListInput\n              label={dict.title + '*'}\n              type=\"text\"\n              placeholder='...'\n              maxlength='65'\n              value={props.post.title}\n              onInput={(e) => {\n                props.handleChange({ title: e.target.value })\n              }}\n            />\n            <Editor\n              editorState={props.editorState}\n              placeholder={dict.content}\n              localization={{\n                locale: 'fa',\n                translations: fa\n              }}\n              toolbar={{\n                options: ['inline', 'list', 'link', 'image'],\n                inline: { options: ['bold', 'italic', 'underline'] },\n                image: {\n                  uploadCallback: props.uploadImageCallBack,\n                  previewImage: true,\n                },\n              }}\n              onEditorStateChange={props.onEditorStateChange}\n            />\n          </List>\n          <CardFooter>\n            <Link></Link>\n            <Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button>\n          </CardFooter>\n        </Card>\n\n      </React.Fragment>\n    )\n  } else {\n    return (null)\n  }\n}\nexport default PostForm;\n","export function uploadImageCallBack(file) {\n  return new Promise(\n    (resolve, reject) => {\n      const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\n      xhr.open('POST', 'http://localhost:3001/v1/uploads');\n      xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\n      const data = new FormData(); // eslint-disable-line no-undef\n      data.append('upload[image]', file);\n      xhr.send(data);\n      xhr.addEventListener('load', () => {\n        const response = JSON.parse(xhr.responseText);\n        resolve(response);\n      });\n      xhr.addEventListener('error', () => {\n        const error = JSON.parse(xhr.responseText);\n        reject(error);\n      });\n    },\n  );\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport PostForm from \"../../containers/posts/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { uploadImageCallBack } from \"./uploader.js\"\n\nexport default class PostCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.onEditorStateChange = this.onEditorStateChange.bind(this)\n    this.getList = this.getList.bind(this)\n    this.uploadImageCallBack = uploadImageCallBack.bind(this);\n\n\n    this.state = {\n      post: {},\n      channels: null,\n      editorState: EditorState.createEmpty(),\n      token: window.localStorage.getItem('token'),\n      title: null,\n      channelId: null,\n      interaction: null,\n      page: 0\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n\n\n  submit() {\n    const blocks = convertToRaw(this.state.editorState.getCurrentContent()).blocks;\n    const value = blocks.map(block => (!block.text.trim() && '\\n') || block.text).join('\\n');\n    var data = { title: this.state.title, content: value, channel_id: this.state.channelId, draft: convertToRaw(this.state.editorState.getCurrentContent()) }\n    if (this.state.title) {\n      MyActions.setInstance('posts', data, this.state.token);\n    } else {\n      const self = this;\n      self.$f7.dialog.alert(dict.incomplete_data, dict.alert);\n    }\n  }\n\n  onEditorStateChange(editorState) {\n    this.setState({\n      editorState,\n    });\n  };\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  loadData() {\n    MyActions.getList('channels/my', this.state.page, {}, this.state.token);\n  }\n\n  componentDidUpdate(prev, prevstate) {\n  }\n\n  getList() {\n    var channels = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (channels && klass === 'Channel') {\n      this.setState({\n        channels: channels,\n      });\n    }\n  }\n\n  setInstance() {\n    const self = this;\n    this.$f7router.navigate('/posts/');\n  }\n\n\n\n\n\n  render() {\n    const { post, editorState, channels } = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.post_form} />\n        <PostForm post={post} channels={channels} editorState={editorState} onEditorStateChange={this.onEditorStateChange} submit={this.submit} handleChange={this.handleChangeValue} uploadImageCallBack={this.uploadImageCallBack} />\n      </Page>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport PostForm from \"../../containers/posts/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport {uploadImageCallBack} from \"./uploader.js\"\n\nexport default class PostUpdate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.onEditorStateChange = this.onEditorStateChange.bind(this)\n    this.getList = this.getList.bind(this)\n    this.uploadImageCallBack = uploadImageCallBack.bind(this);\n\n\n    this.state = {\n      post: {title: '', draft: ''},\n      editorState: EditorState.createEmpty(),\n      token: window.localStorage.getItem('token'),\n      id: null,\n      title: null,\n      draft: null,\n      page: 0\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  submit(){\n    var data = {id: this.state.id, title: this.state.title, draft:convertToRaw(this.state.editorState.getCurrentContent())}\n    MyActions.updateInstance('posts', data, this.state.token);\n  }\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    if (this.$f7route.params['postId']) {\n      MyActions.getInstance('posts', this.$f7route.params['postId'], this.state.token);\n    }\n  }\n\n  getList() {\n\n  }\n\n  getInstance(){\n    var post = ModelStore.getIntance()\n\n    if (post){\n      const contentState = convertFromRaw(post.draft);\n      const editorState = EditorState.createWithContent(contentState);\n      this.setState({\n        post: post,\n        title: post.title,\n        id: post.id,\n        editorState: editorState\n      });\n    }\n    console.log(post);\n  }\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  onEditorStateChange(editorState){\n      this.setState({\n      editorState,\n    });\n  };\n\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/posts/');\n  }\n\n\n  render() {\n    const { post, editorState} = this.state;\n    return (\n      <Page>\n        <Navbar title=\"Form\" backLink={dict.back} />\n        <BlockTitle>{dict.workflow_form}</BlockTitle>\n        <PostForm post={post}  editorState={editorState} onEditorStateChange={this.onEditorStateChange} submit={this.submit}  handleChange={this.handleChangeValue} uploadImageCallBack={this.uploadImageCallBack}/>\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { List, ListItem, Link } from 'framework7-react';\nimport crypto from 'crypto-js';\nimport InteractionMenu from \"../interactions/menu\"\nimport { dict } from \"../../Dict\";\n\nconst NotificationList = (props) => {\n  if (props.notifications && props.notifications.length > 0) {\n    function profileLink(profile){\n      return(<Link href='/profiles/'>{profile.fullname}</Link>)\n    }\n\n    function colorClass(notification){\n      if (!notification.seen){\n        return 'bg-blonde'\n      }\n    }\n    return (\n      <List mediaList>\n        {props.notifications.map((notification) =>\n          <ListItem\n            className={colorClass(notification)}\n            key={crypto.lib.WordArray.random(32)}\n            link={'/' + notification.target_type+ '/'+ notification.target_id}\n            title={notification.content}\n            subtitle={profileLink(notification.profile)}\n          >\n          <img slot=\"media\" src={notification.profile.avatar} width=\"44\" />\n          </ListItem>\n        )}\n      </List>\n    )\n  } else {\n    return (<ul></ul>)\n  }\n}\nexport default NotificationList;\n","import React from \"react\";\nimport { Page, Navbar, Subnavbar, Searchbar, BlockTitle, Link, Fab, Icon, Toolbar, Tabs, Tab, Block } from 'framework7-react';\nimport NotificationList from \"./list\"\nimport { dict } from '../../Dict';\n\nconst NotificationIndex = (props) => {\n  return (\n    <Page>\n      <Navbar title={dict.notifications} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n      </Navbar>\n\n      <NotificationList notifications={props.notifications} loadMore={props.loadMore} />\n\n    </Page>\n  )\n}\nexport default NotificationIndex;\n","import React from \"react\"\nimport { Page, Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport NotificationIndex from \"../../containers/notifications/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { loggedIn } from \"../../components/users/loggedIn.js\"\n\n\nexport default class Notification extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.loggedIn = loggedIn.bind(this);\n    this.interaction = this.interaction.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.search = this.search.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      notifications: [],\n      query: null,\n      page: 1\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  componentDidMount() {\n\n    this.loggedIn();\n    this.loadData();\n  }\n\n  loadData() {\n    MyActions.getList('notifications', this.state.page, {}, this.state.token);\n  }\n\n  search(obj) {\n    this.setState({ notifications: [], page: 1 });\n    this.setState(obj, () => {\n      MyActions.getList('notifications/search', this.state.page, { q: this.state.query });\n    });\n\n  }\n\n  loadMore() {\n    if (this.state.query && this.state.query.length > 0) {\n      this.setState({ page: this.state.page + 1 }, () => {\n        MyActions.getList('notifications/search', this.state.page, {q: this.state.query }, this.state.token);\n      });\n    } else {\n      this.setState({ page: this.state.page + 1 }, () => {\n        MyActions.getList('notifications', this.state.page, {}, this.state.token);\n      });\n    }\n  }\n\n\n\n  setInstance() {\n    var notification = ModelStore.getIntance()\n    if (notification) {\n      this.setState({ notifications: this.state.notifications.map(el => (el.id === notification.id ? Object.assign({}, el, notification) : el)) });\n    }\n  }\n\n  getList() {\n    var notifications = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (notifications.length > 0 && klass === 'Notification') {\n      this.setState({\n        notifications: this.state.notifications.concat(notifications),\n      });\n    }\n    var data = {}\n    MyActions.setInstance('notifications', data, this.state.token);\n  }\n\n  interaction(interaction_type, interactionable_id, interactionable_type, source_type = null, source_id = null) {\n    var data = { interaction_type: interaction_type, interactionable_id: interactionable_id, interactionable_type: interactionable_type, source_type: source_type, source_id: source_id }\n    MyActions.setInstance('interactions', data, this.state.token);\n  }\n\n  render() {\n    const { notifications } = this.state;\n    return (<NotificationIndex interaction={this.interaction} loadMore={this.loadMore} notifications={notifications} search={this.search} />)\n  }\n}\n","import React from \"react\";\nimport { Page, Navbar, List, BlockTitle, Link, Card, Block, Row, Col, Button, CardHeader, CardContent } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport InteractionMenu from \"../interactions/menu\"\nimport ShareMenu from \"../shares/menu\"\nimport PostList from \"../posts/list\"\n\nconst ChannelShow = (props) => {\n  if (props.channel) {\n    console.log(props.channel.posts)\n    return (\n      <React.Fragment>\n        <Block>\n          <Row noGap>\n            <Col width='80'></Col>\n\n            <Col width=\"20\">\n              <Button><InteractionMenu model={props.channel} klass='Channel' interaction={props.interaction} sourceType='Channel' sourceId={props.channel.id} /></Button>\n            </Col>\n          </Row>\n        </Block>\n        <Row noGap>\n          <Col width='100' tabletWidth='50'>\n            <Card>\n              <CardHeader className='fs-12'>{props.channel.title}</CardHeader>\n              <CardContent className='lightgray-color fs-12'>{props.channel.content}</CardContent>\n            </Card>\n          </Col>\n          <Col width='100' tabletWidth='50'>\n            <Card>\n              <CardHeader className='fs-12'>{dict.admins}</CardHeader>\n              <CardContent>\n                <Link tooltip={props.channel.profile.fullname} href={'/profiles/' + props.channel.profile.id}><div className=\"demo-facebook-avatar\"><img src={props.channel.profile.avatar} width=\"34\" height=\"34\" /></div></Link>\n              </CardContent>\n            </Card>\n          </Col>\n        </Row>\n\n        <BlockTitle>{dict.recent_posts}</BlockTitle>\n        <PostList posts={props.channel.posts} interaction={props.interaction} sourceType='Channel' sourceId={props.channel.id} />\n      </React.Fragment>\n    )\n  } else {\n    return (null)\n  }\n}\nexport default ChannelShow;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  Link,\n  Icon, Fab\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport ChannelShow from \"../../containers/channels/show\"\n\nexport default class Layout extends Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.interaction = this.interaction.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n\n\n    this.state = {\n      channel: null,\n      sheetOpened: false,\n      token: window.localStorage.getItem('token'),\n\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  componentDidMount(){\n    MyActions.getInstance('channels', this.$f7route.params['channelId'], this.state.token);\n  }\n\n  getInstance(){\n    var channel = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (channel && klass === 'Channel'){\n      this.setState({\n        channel: channel,\n      });\n    }\n    console.log('channel', channel);\n  }\n\n  setInstance(){\n    var channel = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if(channel && klass === 'Channel'){\n      this.setState({\n        channel: channel,\n      });\n    }\n    console.log(channel);\n  }\n\n\n  fab(){\n    if (this.state.channel){\n      return(\n        <Fab href={\"/channels/\"+this.state.channel.id+\"/edit\"} target=\"#main-view\"  position=\"left-bottom\" slot=\"fixed\" color=\"lime\">\n          <Icon ios=\"f7:edit\" aurora=\"f7:edit\" md=\"material:edit\"></Icon>\n          <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n        </Fab>\n      )\n    }\n  }\n\n  interaction(interaction_type, interactionable_id, interactionable_type, source_type=null, source_id=null){\n    var data = {interaction_type: interaction_type, interactionable_id: interactionable_id, interactionable_type: interactionable_type, source_type: source_type, source_id: source_id}\n    MyActions.setInstance('interactions', data, this.state.token);\n  }\n\n  render() {\n    const {channel, sheetOpened} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.channels} backLink={dict.back} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n        </Navbar>\n\n        {this.fab()}\n        <ChannelShow channel={channel} sheetOpened={sheetOpened} interaction={this.interaction} />\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { Card, CardHeader, BlockTitle, Link, CardFooter, CardContent, Row, Col, Menu, MenuItem, MenuDropdown, Icon, MenuDropdownItem } from 'framework7-react';\nimport crypto from 'crypto-js';\nimport InteractionMenu from \"../interactions/menu\"\nimport { dict } from '../../Dict';\n\nconst ChannelList = (props) => {\n  if (props.channels && props.channels.length > 0) {\n    return (\n      <React.Fragment>\n      <Row noGap>\n        {props.channels.map((channel) =>\n          <Col width=\"100\" tabletWidth=\"33\" key={crypto.lib.WordArray.random(128/8)}>\n            <Card className=\"demo-facebook-card\">\n              <CardHeader className=\"no-border\">\n                <div className=\"demo-facebook-avatar\"><img src={channel.avatar} width=\"34\" height=\"34\" /></div>\n                <div className=\"demo-facebook-title \"><Link className=\"gray-color\" href={'/channels/' + channel.id}>{channel.title.substring(0, 30)}</Link></div>\n                <div className=\"demo-facebook-date\"><InteractionMenu model={channel} klass='Channel' interaction={props.interaction} sourceType='Channel' sourceId={channel.id} /></div>\n              </CardHeader>\n              <CardContent className='lightgray-color'>\n                  <span className='fs-12'>{channel.content.substring(0, 120) + '...'}</span>\n                  <div className=\"demo-facebook-more\">\n                    <Link className=\"gray-color\" href={'/channels/' + channel.id}>\n                      {dict.view}\n                      <i className=\"va fa fa-arrow-left mr-2\"></i>\n                    </Link>\n                  </div>\n                </CardContent>\n            </Card>\n          </Col>\n        )}\n      </Row>\n      <Row noGap>\n        <Col></Col>\n        <Col className='center mb-20'>\n          <a className=\"gray-color\" onClick={() => props.loadMore()}>\n            {dict.more}\n          </a>\n        </Col>\n        <Col></Col>\n      </Row>\n      </React.Fragment>\n\n    )\n  } else {\n    return (<ul></ul>)\n  }\n}\nexport default ChannelList;\n","import React from \"react\";\nimport { Page, Navbar, Searchbar, Subnavbar, Link, BlockTitle, Fab, Icon, Tabs, Tab, Block, Toolbar} from 'framework7-react';\nimport ChannelList from \"./list\"\nimport { dict } from '../../Dict';\n\nconst ChannelIndex = (props) => {\n  return (\n    <Page pageContent={false}>\n      <Navbar title={dict.channels} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n        <Subnavbar inner={false}>\n          <Searchbar\n            disableButtonText={dict.cancel}\n            placeholder={dict.search}\n            onChange={(e) => {\n              props.search({ query: e.target.value })\n            }}\n          ></Searchbar>\n        </Subnavbar>\n      </Navbar>\n      <Toolbar tabbar bottom>\n        <Link tabLink=\"#tab-1\" tabLinkActive><i className=\"va ml-5 fa fa-link\"></i></Link>\n        <Link tabLink=\"#tab-2\"><i className=\"va ml-5 fa fa-plug\"></i></Link>\n        <Link tabLink=\"#tab-3\"><i className=\"va ml-5 fa fa-user-o\"></i></Link>\n      </Toolbar>\n      <BlockTitle></BlockTitle>\n      <Fab href=\"/channels/new\" target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"deeporange\">\n        <Icon ios=\"f7:add\" aurora=\"f7:add\" md=\"material:add\"></Icon>\n        <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n      </Fab>\n      <Tabs swipeable>\n        <Tab id=\"tab-1\" className=\"page-content\" tabActive>\n          <Block>\n            <ChannelList channels={props.channels} interaction={props.interaction} loadMore={props.loadMore} />\n          </Block>\n        </Tab>\n\n        <Tab id=\"tab-2\" className=\"page-content\" >\n          <Block>\n            <ChannelList channels={props.channels} interaction={props.interaction} loadMore={props.loadMore} />\n          </Block>\n        </Tab>\n\n        <Tab id=\"tab-3\" className=\"page-content\" >\n          <Block>\n            <ChannelList channels={props.channels} interaction={props.interaction} loadMore={props.loadMore} />\n          </Block>\n        </Tab>\n      </Tabs>\n    </Page>\n  )\n}\nexport default ChannelIndex;\n","import React from \"react\"\nimport { Page,Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport ChannelIndex from \"../../containers/channels/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict} from '../../Dict';\nimport Framework7 from 'framework7/framework7.esm.bundle';\nimport {loggedIn} from \"../../components/users/loggedIn.js\"\n\n\nexport default class Channel extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.loggedIn = loggedIn.bind(this);\n    this.interaction = this.interaction.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.search = this.search.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      channels: [],\n      query: null,\n      page: 1,\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  componentDidMount(){\n    this.loggedIn();\n    this.loadData();\n  }\n\n  loadData(){\n    MyActions.getList('channels', this.state.page, {} , this.state.token);\n  }\n\n  search(obj) {\n    this.setState({ channels: [], page: 1 });\n    this.setState(obj, () => {\n      MyActions.getList('channels/search', this.state.page, { q: this.state.query });\n    });\n  }\n\n\n  setInstance(){\n    var channel = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if(channel && klass === 'Channel') {\n      this.setState({channels: this.state.channels.map(el => (el.id === channel.id ? Object.assign({}, el, channel) : el))});\n    }\n  }\n\n\n\n  loadMore() {\n    if (this.state.query && this.state.query.length > 0) {\n      this.setState({ page: this.state.page + 1 }, () => {\n        MyActions.getList('channels/search', this.state.page, {q: this.state.query }, this.state.token);\n      });\n    } else {\n      this.setState({ page: this.state.page + 1 }, () => {\n        MyActions.getList('channels', this.state.page, {}, this.state.token);\n      });\n    }\n\n  }\n\n  getList() {\n    var channels = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (channels.length > 0 && klass === 'Channel') {\n      this.setState({\n        channels: this.state.channels.concat(channels),\n      });\n    }\n  }\n\n  interaction(interaction_type, interactionable_id, interactionable_type, source_type=null, source_id=null){\n    var data = {interaction_type: interaction_type, interactionable_id: interactionable_id, interactionable_type: interactionable_type, source_type: source_type, source_id: source_id}\n    MyActions.setInstance('interactions', data, this.state.token);\n  }\n\n  render() {\n    const {channels} = this.state;\n    return(<ChannelIndex interaction={this.interaction} search={this.search} loadMore={this.loadMore} channels={channels}/>)\n  }\n}\n","import React from \"react\";\nimport { List, ListItem, ListInput, Block, Row, Button} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport crypto from 'crypto-js';\nimport fa from '../../js/fa.js';\nconst ChannelForm = (props) => {\n  if (props.channel) {\n    return (\n      <React.Fragment>\n        <List form>\n          <ListInput\n            label={dict.title}\n            type=\"text\"\n            placeholder='...'\n            value={props.title}\n            onInput={(e) => {\n              props.handleChange({ title: e.target.value})\n            }}\n            />\n          <ListInput\n            label={dict.abstract}\n            type=\"textarea\"\n            placeholder='...'\n            value={props.content}\n            resizable\n            onInput={(e) => {\n              props.handleChange({ content: e.target.value})\n            }}\n            />\n        </List>\n        <Block strong className='minus-z'>\n          <Row tag=\"p\">\n            <Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button>\n          </Row>\n        </Block>\n      </React.Fragment>\n    )} else {\n      return (null)\n    }\n  }\n  export default ChannelForm;\n","export function uploadImageCallBack(file) {\n  return new Promise(\n    (resolve, reject) => {\n      const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\n      xhr.open('POST', 'http://localhost:3001/v1/uploads');\n      xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\n      const data = new FormData(); // eslint-disable-line no-undef\n      data.append('upload[image]', file);\n      xhr.send(data);\n      xhr.addEventListener('load', () => {\n        const response = JSON.parse(xhr.responseText);\n        resolve(response);\n      });\n      xhr.addEventListener('error', () => {\n        const error = JSON.parse(xhr.responseText);\n        reject(error);\n      });\n    },\n  );\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport ChannelForm from \"../../containers/channels/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport {uploadImageCallBack} from \"./uploader.js\"\n\nexport default class ChannelCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.onEditorStateChange = this.onEditorStateChange.bind(this)\n    this.getList = this.getList.bind(this)\n    this.uploadImageCallBack = uploadImageCallBack.bind(this);\n\n\n    this.state = {\n      channel: {},\n      editorState: EditorState.createEmpty(),\n      token: window.localStorage.getItem('token'),\n      title: null,\n      content: null,\n      interaction: null,\n      page: 0\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n\n\n  submit(){\n    var data = {title: this.state.title, content: this.state.content}\n    MyActions.setInstance('channels', data, this.state.token);\n  }\n\n  onEditorStateChange(editorState){\n    this.setState({\n      editorState,\n    });\n  };\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n  }\n\n\n  getList() {\n  }\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/channels/');\n  }\n\n\n\n\n\n  render() {\n    const {channel, editorState} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.channel_form} backLink={dict.back} />\n        <BlockTitle>{dict.channel_form}</BlockTitle>\n        <ChannelForm channel={channel}  editorState={editorState} onEditorStateChange={this.onEditorStateChange} submit={this.submit}  handleChange={this.handleChangeValue} uploadImageCallBack={this.uploadImageCallBack}/>\n      </Page>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport ChannelForm from \"../../containers/channels/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n\nexport default class ChannelUpdate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.onEditorStateChange = this.onEditorStateChange.bind(this)\n    this.getList = this.getList.bind(this)\n\n    this.state = {\n      channel: {title: '', draft: ''},\n      token: window.localStorage.getItem('token'),\n      id: null,\n      title: null,\n      content: null,\n      page: 0\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  submit(){\n    var data = {id: this.state.id, title: this.state.title, content: this.state.content}\n    MyActions.updateInstance('channels', data, this.state.token);\n  }\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    if (this.$f7route.params['channelId']) {\n      MyActions.getInstance('channels', this.$f7route.params['channelId'], this.state.token);\n    }\n  }\n\n  getList() {\n\n  }\n\n  getInstance(){\n    var channel = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (channel && klass === 'Channel'){\n      this.setState({\n        channel: channel,\n        title: channel.title,\n        id: channel.id,\n        content: channel.content\n      });\n    }\n  }\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  onEditorStateChange(editorState){\n      this.setState({\n      editorState,\n    });\n  };\n\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/channels/');\n  }\n\n\n  render() {\n    const { channel, title, content} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.form} backLink={dict.back} />\n        <BlockTitle>{dict.channel_form}</BlockTitle>\n        <ChannelForm channel={channel} title={title} content={content}  onEditorStateChange={this.onEditorStateChange} submit={this.submit}  handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { List, ListItem, Button, Icon} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport crypto from 'crypto-js';\nconst UserOptions = (props) => {\n  var options = [<option value=''></option>]\n  if(props.users){\n    for (let i = 0; i < props.users.length; i++) {\n      options.push(\n        <option value={props.users[i].id}>\n          {props.users[i].email}\n        </option>\n      )\n    }\n\n  }\n  return options\n\n}\nexport default UserOptions;\n","import React from \"react\";\nimport { List, ListItem, BlockTitle, Block, Row, Button} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport UserOptions from \"../users/options\";\n\nconst AssignmentForm = (props) => {\n    return (\n      <React.Fragment>\n        <BlockTitle>{dict.assignment_form}</BlockTitle>\n        <List form inset>\n          <ListItem\n            title={dict.email}\n            smartSelect\n            >\n            <select name=\"content\"\n              onChange={(e) => {  props.handleChange({ user_id: e.target.value}) }}>\n              <UserOptions users={props.users}/>\n            </select>\n          </ListItem>\n        </List>\n      <Block strong inset>\n        <Row tag=\"p\">\n          <Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button>\n        </Row>\n      </Block>\n      </React.Fragment>\n    )\n  }\n  export default AssignmentForm;\n","  \nimport React from \"react\";\nimport { List, ListItem, Button, Icon} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport crypto from 'crypto-js';\nconst UserList = (props) => {\n    var body = []\n  if(props.users){\n\n    \n    for (let i = 0; i < props.users.length; i++) {\n        var td = []\n        body.push(<tr key={crypto.lib.WordArray.random(32)}>\n        <td key={crypto.lib.WordArray.random(32)}>{props.users[i].id}</td>\n        <td key={crypto.lib.WordArray.random(32)}>{props.users[i].email}</td>\n        <td className=\"checkbox-cell\" key={crypto.lib.WordArray.random(32)}>\n            <Button color='gray' onClick={() => props.removeRole(props.users[i].id)}>\n              <Icon ios=\"f7:trash\" aurora=\"f7:trash\" md=\"material:trash\"></Icon>\n            </Button>\n          </td>\n        </tr>)\n    }\n\n  return(\n    <div className=\"data-table card\">\n      <table>\n        <thead>\n          <tr>\n            <td>ID</td>\n            <td>Email</td>\n          </tr>\n        </thead>\n\n        <tbody>\n          {body}\n        </tbody>\n      </table>\n    </div>\n\n  )\n}\nelse {\n  return(null)\n}\n}\nexport default UserList;","import React from \"react\";\nimport { List, Icon, ListInput, Block, Row, Button, BlockTitle } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\nimport UserOptions from \"../users/options\";\n\nconst AccessControlForm = (props) => {\n    return (\n        <React.Fragment>\n            <BlockTitle>{dict.access_control_form}</BlockTitle>\n            <List form inset>\n                <ListInput\n                    label={dict.item}\n                    type=\"text\"\n                    placeholder='...'\n                    onInput={(e) => {\n                        props.handleChange({ abilityTitle: e.target.value })\n                    }}\n                />\n                <ListInput\n                    label={dict.value}\n                    type=\"select\"\n                    defaultValue={true}\n                    placeholder=\"Please choose...\"\n                    onChange={(e) => {\n                        props.handleChange({ abilityValue: e.target.value })\n                    }}\n                >\n                    <option value={true}>{dict.true}</option>\n                    <option value={false}>{dict.false}</option>\n                </ListInput>\n            </List>\n            <Block strong inset>\n                <Row tag=\"p\">\n                    <Button className=\"col\" fill onClick={props.addAbility}>{dict.submit}</Button>\n                </Row>\n            </Block>\n        </React.Fragment>\n    )\n}\nexport default AccessControlForm;\n","\nimport React from \"react\";\nimport { List, ListItem, Button, Icon, BlockTitle } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\nconst AbilityList = (props) => {\n    var body = []\n    if (props.ability) {\n\n\n        for (let i = 0; i < props.ability.length; i++) {\n            var td = []\n            body.push(<tr key={crypto.lib.WordArray.random(32)}>\n                <td key={crypto.lib.WordArray.random(32)}>{props.ability[i].title}</td>\n                <td key={crypto.lib.WordArray.random(32)}>{dict[props.ability[i].value]}</td>\n                <td className=\"checkbox-cell\" key={crypto.lib.WordArray.random(32)}>\n                    <Button color='gray' onClick={() => props.removeAbility(props.ability[i].title)}>\n                        <Icon ios=\"f7:trash\" aurora=\"f7:trash\" md=\"material:trash\"></Icon>\n                    </Button>\n                </td>\n            </tr>)\n        }\n\n        return (\n            <React.Fragment>\n            <BlockTitle>{dict.access_control_list}</BlockTitle>\n            <div className=\"data-table card\">\n                <table>\n                    <thead>\n                        <tr>\n                            <td>{dict.title}</td>\n                            <td>{dict.value}</td>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n                        {body}\n                    </tbody>\n                </table>\n            </div>\n            </React.Fragment>\n\n        )\n    }\n    else {\n        return (null)\n    }\n}\nexport default AbilityList;","import React from \"react\";\nimport { Page, Navbar, List, BlockTitle, ListItem, Fab, Icon,Preloader, Block} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport AssignmentForm from \"../assignments/form\";\nimport AssignmentList from \"../assignments/list\";\n\nimport AccessControlForm from \"../access_controls/form\";\nimport AccessControlList from \"../access_controls/list\";\n\nconst RoleShow = (props) => {\n  if (props.role){\n    return(\n      <React.Fragment>\n        <BlockTitle>{dict.title}</BlockTitle>\n        <List simple-list>\n          <ListItem>{props.role.title}</ListItem>\n        </List>\n\n        <AccessControlList  ability={props.ability} removeAbility={props.removeAbility}/>\n        <AccessControlForm  addAbility={props.addAbility} handleChange={props.handleChange} />\n        \n\n        <AssignmentList users={props.assignedUsers} removeRole={props.removeRole} />\n        <AssignmentForm users={props.users}  submit={props.submit} handleChange={props.handleChange}/>\n\n        \n      </React.Fragment>\n    )\n  } else {\n    return(null)\n  }\n}\nexport default RoleShow;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon, Fab\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport RoleShow from \"../../containers/roles/show\"\n\nexport default class Layout extends Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.getList = this.getList.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.removeRole = this.removeRole.bind(this);\n    this.addAbility = this.addAbility.bind(this);\n    this.removeAbility = this.removeAbility.bind(this);\n\n    \n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      role: null,\n      id: null,\n      users: null,\n      assignedUsers: null,\n      user_id: null,\n      abilityTitle: '',\n      abilityValue: true,\n      ability: null,\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.getInstance);\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.getInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    MyActions.getInstance('roles', this.$f7route.params['roleId'], this.state.token);\n    MyActions.getList('users', this.state.page, {}, this.state.token);\n  }\n\n  getInstance() {\n    var role = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (role && klass === 'Role') {\n      this.setState({\n        role: role,\n        id: role.id,\n        assignedUsers: role.users,\n        ability: role.ability\n      });\n    }\n  }\n\n  getList() {\n    var users = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (users && klass === 'User') {\n      this.setState({\n        users: users,\n      });\n    }\n  }\n\n  submit() {\n    var data = { role_id: this.state.id, user_id: this.state.user_id }\n    MyActions.setInstance('users/assignments', data, this.state.token);\n  }\n\n  addAbility() {\n    var data = { id: this.state.id, ability_title: this.state.abilityTitle, ability_value: this.state.abilityValue}\n    MyActions.setInstance('roles/abilities', data, this.state.token);\n  }\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  fab() {\n    if (this.state.role) {\n      return (\n        <Fab href={\"/roles/\" + this.state.role.id + \"/edit\"} target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"lime\">\n          <Icon ios=\"f7:edit\" aurora=\"f7:edit\" md=\"material:edit\"></Icon>\n          <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n        </Fab>\n      )\n    }\n  }\n\n  removeRole(user_id) {\n    MyActions.removeInstance('users/assignments', { user_id: user_id, role_id: this.state.id }, this.state.token);\n  }\n\n  removeAbility(title){\n    MyActions.removeInstance('roles/abilities', { id: this.state.id, title: title }, this.state.token);\n  }\n\n  render() {\n    const { role, users, assignedUsers, ability } = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.roles} backLink={dict.back} />\n        <BlockTitle></BlockTitle>\n        {this.fab()}\n        <RoleShow role={role} users={users} ability={ability} removeAbility={this.removeAbility} assignedUsers={assignedUsers} addAbility={this.addAbility} removeRole={this.removeRole} submit={this.submit} handleChange={this.handleChangeValue} />\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { List, ListItem} from 'framework7-react';\nimport crypto from 'crypto-js';\n\nconst RoleList = (props) => {\n\n  if (props.roles) {\n    return (\n      <List mediaList>\n        {props.roles.map((role) =>\n          <ListItem\n            key={crypto.lib.WordArray.random(32)}\n            link={\"/roles/\" + role.id}\n            ignoreCache={true}\n            title={role.title}\n            after=\"\"\n            subtitle=\"\"\n            text=\"\"\n            ></ListItem>\n        )}\n      </List>\n    )} else {\n      return (<ul></ul>)\n    }\n  }\n  export default RoleList;\n","import React from \"react\";\nimport { Page, Navbar, List, BlockTitle, ListItem, Fab, Icon,Preloader, Block} from 'framework7-react';\nimport RoleList from \"./list\"\nimport { dict} from '../../Dict';\n\nconst RoleIndex = (props) => {\n  return(\n    <Page>\n      <Navbar title={dict.roles} backLink={dict.back} >\n      </Navbar>\n      <BlockTitle>{dict.list}</BlockTitle>\n      <Fab href=\"/roles/new\" target=\"#main-view\"  position=\"left-bottom\" slot=\"fixed\" color=\"deeporange\">\n        <Icon ios=\"f7:add\" aurora=\"f7:add\" md=\"material:add\"></Icon>\n        <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n      </Fab>\n      <RoleList roles={props.roles}/>\n    </Page>\n  )\n}\nexport default RoleIndex;\n","import React from \"react\"\nimport { Page,Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport RoleIndex from \"../../containers/roles/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict} from '../../Dict';\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n\nexport default class Layout extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      roles: null,\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    MyActions.getList('roles', this.state.page, {}, this.state.token);\n  }\n\n  getList() {\n    var roles = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (roles && klass === 'Role'){\n      this.setState({\n        roles: roles,\n      });\n    }\n  }\n\n  render() {\n    const {roles} = this.state;\n    return(<RoleIndex roles={roles}/>)\n  }\n}\n","import React from \"react\";\nimport { List, ListItem, ListInput, Block, Row, Button, BlockTitle } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\n\n\nconst RoleForm = (props) => {\n  if (props.defaultRole) {\n    var isDefaultRole = true;\n  } else {\n    var isDefaultRole = false\n  }\n  return (\n    <React.Fragment>\n      <BlockTitle>{dict.role}</BlockTitle>\n      <List form>\n        <ListInput\n          label={dict.title}\n          type=\"text\"\n          placeholder='...'\n          defaultValue={props.role.title}\n          onInput={(e) => {\n            props.handleChange({ title: e.target.value })\n          }}\n        />\n        <ListItem radio value={false} checked={!isDefaultRole} name=\"defaultRole\" title={dict.NonDefault}\n          onChange={(e) => {\n            console.log(e)\n            props.handleChange({ defaultRole: JSON.parse(e.target.value) })\n          }}>\n        </ListItem>\n        <ListItem radio value={true} checked={isDefaultRole} name=\"defaultRole\" title={dict.Default}\n          onChange={(e) => {\n            console.log(e)\n            props.handleChange({ defaultRole: JSON.parse(e.target.value) });\n          }}>\n        </ListItem>\n      </List>\n\n      <Block strong>\n        <Row tag=\"p\">\n          <Button className=\"col\" fill disabled={!props.editing} onClick={props.submit}>{dict.submit}</Button>\n        </Row>\n      </Block>\n    </React.Fragment>\n  )\n}\nexport default RoleForm;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport RoleForm from \"../../containers/roles/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class RoleCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      role: {},\n      default_role: true,\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  submit(){\n    var data = {title: this.state.title, default_role: this.state.defaultRole}\n    MyActions.setInstance('roles', data, this.state.token);\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/roles/');\n  }\n\n\n\n  render() {\n    const {role} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.role_form} backLink={dict.back} />\n        <BlockTitle>{dict.role_form}</BlockTitle>\n        <RoleForm role={role} submit={this.submit} editing={true} handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport RoleForm from \"../../containers/roles/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n\nexport default class DocumentUpdate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      role : {},\n      defaultRole: null,\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n\n  }\n\n\n  submit(){\n    var data = {id:this.state.id, title: this.state.title, default_role: this.state.defaultRole}\n    MyActions.updateInstance('roles', data,  this.state.token);\n  }\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    if (this.$f7route.params['roleId']) {\n      MyActions.getInstance('roles', this.$f7route.params['roleId'],  this.state.token);\n    }\n  }\n\n\n  getInstance(){\n    var role = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (role && klass === 'Role'){\n      this.setState({\n        title: role.title,\n        id: role.id,\n        role: role,\n        defaultRole: role.default_role\n      });\n    }\n  }\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/roles/');\n  }\n\n\n  render() {\n        const {role, defaultRole} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.role_form} backLink={dict.back} />\n        <BlockTitle>{dict.role_form}</BlockTitle>\n        <RoleForm role={role} defaultRole={defaultRole} submit={this.submit} editing={true} handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { Page, Navbar, List, BlockTitle, ListItem, Fab, Icon,Preloader, Block} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport AssignmentForm from \"../assignments/form\";\nimport AssignmentList from \"../assignments/list\";\n\nimport AccessControlForm from \"../access_controls/form\";\nimport AccessControlList from \"../access_controls/list\";\n\nconst SettingShow = (props) => {\n  if (props.setting){\n    return(\n      <React.Fragment>\n        <BlockTitle>{dict.title}</BlockTitle>\n        <List simple-list>\n          <ListItem>{props.setting.title}</ListItem>\n        </List>\n\n        <BlockTitle>{dict.content}</BlockTitle>\n        <List simple-list>\n          <ListItem>{props.setting.content}</ListItem>\n        </List>\n\n        \n      </React.Fragment>\n    )\n  } else {\n    return(null)\n  }\n}\nexport default SettingShow;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon, Fab\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport SettingShow from \"../../containers/settings/show\"\n\nexport default class Layout extends Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.getList = this.getList.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.removeSetting = this.removeSetting.bind(this);\n    this.addAbility = this.addAbility.bind(this);\n    this.removeAbility = this.removeAbility.bind(this);\n\n    \n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      setting: null,\n      id: null,\n      users: null,\n      assignedUsers: null,\n      user_id: null,\n      abilityTitle: '',\n      abilityValue: true,\n      ability: null,\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.getInstance);\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.getInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    MyActions.getInstance('settings', this.$f7route.params['settingId'], this.state.token);\n    MyActions.getList('users', this.state.page, {}, this.state.token);\n  }\n\n  getInstance() {\n    var setting = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (setting && klass === 'Setting') {\n      this.setState({\n        setting: setting,\n        id: setting.id,\n        assignedUsers: setting.users,\n        ability: setting.ability\n      });\n    }\n  }\n\n  getList() {\n    var users = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (users && klass === 'User') {\n      this.setState({\n        users: users,\n      });\n    }\n  }\n\n  submit() {\n    var data = { setting_id: this.state.id, user_id: this.state.user_id }\n    MyActions.setInstance('users/assignments', data, this.state.token);\n  }\n\n  addAbility() {\n    var data = { id: this.state.id, ability_title: this.state.abilityTitle, ability_value: this.state.abilityValue}\n    MyActions.setInstance('settings/abilities', data, this.state.token);\n  }\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  fab() {\n    if (this.state.setting) {\n      return (\n        <Fab href={\"/settings/\" + this.state.setting.id + \"/edit\"} target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"lime\">\n          <Icon ios=\"f7:edit\" aurora=\"f7:edit\" md=\"material:edit\"></Icon>\n          <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n        </Fab>\n      )\n    }\n  }\n\n  removeSetting(user_id) {\n    MyActions.removeInstance('users/assignments', { user_id: user_id, setting_id: this.state.id }, this.state.token);\n  }\n\n  removeAbility(title){\n    MyActions.removeInstance('settings/abilities', { id: this.state.id, title: title }, this.state.token);\n  }\n\n  render() {\n    const { setting, users, assignedUsers, ability } = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.settings} backLink={dict.back} />\n        <BlockTitle></BlockTitle>\n        {this.fab()}\n        <SettingShow setting={setting} users={users} ability={ability} removeAbility={this.removeAbility} assignedUsers={assignedUsers} addAbility={this.addAbility} removeSetting={this.removeSetting} submit={this.submit} handleChange={this.handleChangeValue} />\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { List, ListItem} from 'framework7-react';\nimport crypto from 'crypto-js';\n\nconst SettingList = (props) => {\n\n  if (props.settings) {\n    return (\n      <List mediaList>\n        {props.settings.map((setting) =>\n          <ListItem\n            key={crypto.lib.WordArray.random(32)}\n            link={\"/settings/\" + setting.id}\n            ignoreCache={true}\n            title={setting.title}\n            after=\"\"\n            subtitle=\"\"\n            text=\"\"\n            ></ListItem>\n        )}\n      </List>\n    )} else {\n      return (<ul></ul>)\n    }\n  }\n  export default SettingList;\n","import React from \"react\";\nimport { Page, Navbar, List, BlockTitle, ListItem, Fab, Icon,Preloader, Block} from 'framework7-react';\nimport SettingList from \"./list\"\nimport { dict} from '../../Dict';\n\nconst SettingIndex = (props) => {\n  return(\n    <Page>\n      <Navbar title={dict.settings} backLink={dict.back} >\n      </Navbar>\n      <BlockTitle>{dict.list}</BlockTitle>\n      <Fab href=\"/settings/new\" target=\"#main-view\"  position=\"left-bottom\" slot=\"fixed\" color=\"deeporange\">\n        <Icon ios=\"f7:add\" aurora=\"f7:add\" md=\"material:add\"></Icon>\n        <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n      </Fab>\n      <SettingList settings={props.settings}/>\n    </Page>\n  )\n}\nexport default SettingIndex;\n","import React from \"react\"\nimport { Page,Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport SettingIndex from \"../../containers/settings/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict} from '../../Dict';\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n\nexport default class Layout extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      settings: null,\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    MyActions.getList('settings', this.state.page, {}, this.state.token);\n  }\n\n  getList() {\n    var settings = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (settings && klass === 'Setting'){\n      this.setState({\n        settings: settings,\n      });\n    }\n  }\n\n  render() {\n    const {settings} = this.state;\n    return(<SettingIndex settings={settings}/>)\n  }\n}\n","import React from \"react\";\nimport { List, ListItem, ListInput, Block, Row, Button, BlockTitle } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\n\n\nconst SettingForm = (props) => {\n  console.log(props)\n  return (\n    <React.Fragment>\n      <BlockTitle>{dict.setting}</BlockTitle>\n      <List form>\n        <ListInput\n          label='Title'\n          inputStyle={{direction: 'ltr'}}\n          type=\"text\"\n          placeholder='...'\n          defaultValue={props.title}\n          onInput={(e) => {\n            props.handleChange({ title: e.target.value })\n          }}\n        />\n        <ListInput\n          label=\"Schema\"\n          type=\"text\"\n          inputStyle={{direction: 'ltr'}}\n          value={props.content}\n          placeholder=\"JSON\"\n          onInput={(e) => {\n            props.handleChange({ content: e.target.value })\n          }}\n        ></ListInput>\n      </List>\n\n      <Block strong>\n        <Row tag=\"p\">\n          <Button className=\"col\" fill disabled={!props.editing} onClick={props.submit}>{dict.submit}</Button>\n        </Row>\n      </Block>\n    </React.Fragment>\n  )\n}\nexport default SettingForm;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport SettingForm from \"../../containers/settings/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class SettingCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      title: '',\n      content: '',\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  submit(){\n    var data = {title: this.state.title, content: this.state.content}\n    MyActions.setInstance('settings', data, this.state.token);\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/settings/');\n  }\n\n\n\n  render() {\n    const {title, content} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.setting_form} backLink={dict.back} />\n        <BlockTitle>{dict.setting_form}</BlockTitle>\n        <SettingForm title={title} content={content} submit={this.submit} editing={true} handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport SettingForm from \"../../containers/settings/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class SettingCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n\n    \n    this.state = {\n      token: window.localStorage.getItem('token'),\n      title: '',\n      id: null,\n      content: '',\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    MyActions.getInstance('settings', this.$f7route.params['settingId'], this.state.token);\n  }\n\n\n  getInstance() {\n    var setting = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (setting && klass === 'Setting') {\n      this.setState({\n        title: setting.title,\n        id: setting.id,\n        content: setting.content\n      });\n    }\n  }\n\n  submit(){\n    var data = {id: this.state.id, title: this.state.title, content: this.state.content}\n    MyActions.updateInstance('settings', data, this.state.token);\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/settings/');\n  }\n\n\n\n  render() {\n    const {title, content} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.setting_form} backLink={dict.back} />\n        <BlockTitle>{dict.setting_form}</BlockTitle>\n        <SettingForm title={title} content={content} submit={this.submit} editing={true} handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { Card, List, ListItem, CardContent, CardHeader} from 'framework7-react';\nimport crypto from 'crypto-js';\nimport { dict } from '../../Dict';\n\nconst ChannelCompactList = (props) => {\n  if (props.channels && props.channels.length > 0) {\n    console.log(props.channels)\n    return (\n      <React.Fragment>\n        <Card>\n          <CardHeader>\n            {dict.channels}\n          </CardHeader>\n          <CardContent>\n          <List>\n            {props.channels.map((channel) =>\n              <ListItem\n                link={\"/channels/\"+channel.id}\n                title={channel.title.substring(0, 30)}\n              ></ListItem>\n            )}\n          </List>\n          </CardContent>\n        </Card>\n      </React.Fragment>\n\n    )\n  } else {\n    return (<ul></ul>)\n  }\n}\nexport default ChannelCompactList;\n","import React from \"react\";\nimport { Row, CardHeader, Card, CardContent, Col, Link, CardFooter, Chip, Icon } from 'framework7-react';\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport 'moment/locale/fa';\n\nconst ExpertiesList = (props) => {\n\n    if (props.experties) {\n        if (props.editable) {\n            return (\n                <Row noGap>\n                    {props.experties.map((expert) =>\n                        <a onClick={() => props.removeExperties(expert)}>\n                            <Chip text={expert} mediaBgColor=\"orange\">\n                                <Icon slot=\"media\" aurora=\"fa:times\"></Icon>\n                            </Chip>\n                        </a>\n                    )}\n                </Row>\n            )\n        } else {\n            return (\n                <Row noGap>\n                    {props.experties.map((expert) =>\n                        <a href={'/experties/'+expert}><Chip text={expert} /></a>\n                    )}\n                </Row>\n            )\n        }\n\n    } else {\n        return (null)\n    }\n}\nexport default ExpertiesList;\n","import React from \"react\";\nimport { List, ListItem, Link} from 'framework7-react';\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport 'moment/locale/fa';\n\nconst SimpleList = (props) => {\n  if(props.profiles){\n    return (\n      <List>\n        {props.profiles.map((profile) =>\n          <ListItem\n          title={profile.fullname}\n          subtitle=\"...\"\n          link={'/profiles/'+profile.id}>\n          <img slot=\"media\" src={profile.avatar} width=\"25\" />\n          </ListItem>\n        )}\n      </List>\n    )\n  } else {\n    return (<ul></ul>)\n  }\n}\nexport default SimpleList;\n","import React from \"react\";\nimport { Row, CardHeader, Card, CardContent, Col, Link, CardFooter, Chip, Icon } from 'framework7-react';\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport 'moment/locale/fa';\nimport SimpleList from \"./simpleList\"\n\nconst Followers = (props) => {\n    console.log(props)\n    if (props.followers) {\n        return (\n            <Card>\n                <CardHeader>\n                    {dict.followers}\n                </CardHeader>\n                <CardContent>\n                    <SimpleList profiles={props.followers} />\n                </CardContent>\n            </Card>)\n    } else {\n        return (null)\n    }\n}\nexport default Followers;\n","import React from \"react\";\nimport { Row, CardHeader, Card, CardContent, Col, Link, CardFooter, Chip, Icon } from 'framework7-react';\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport 'moment/locale/fa';\nimport SimpleList from \"./simpleList\"\n\nconst Followers = (props) => {\n    if (props.followees) {\n        return (\n            <Card>\n                <CardHeader>\n                    {dict.followees}\n                </CardHeader>\n                <CardContent>\n                    <SimpleList profiles={props.followees} />\n                </CardContent>\n            </Card>)\n    } else {\n        return (null)\n    }\n}\nexport default Followers;\n","import React from \"react\";\nimport { Card, Chip, CardContent, CardHeader, Col, Row, Tab, Tabs, Icon } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ActualForm from \"../actuals/form\";\nimport ActualList from \"../actuals/list\";\nimport { Chart } from 'react-charts'\nimport { color } from \"d3\";\nimport ChannelCompactList from \"../channels/compactlist\"\nimport ExpertiesList from \"./experties\";\nimport InteractionMenu from \"../interactions/menu\"\nimport Followers from \"./followers\"\nimport Followees from \"./followees\"\n\nconst ProfileShow = (props) => {\n  const data = React.useMemo(\n    () => [\n      {\n        label: 'Series 1',\n        data: [[0, 1], [1, 2], [2, 4], [3, 2], [4, 7]]\n      },\n      {\n        label: 'Series 2',\n        data: [[0, 3], [1, 1], [2, 5], [3, 6], [4, 4]]\n      }\n    ],\n    []\n  )\n\n  const axes = React.useMemo(\n    () => [\n      { primary: true, type: 'linear', position: 'bottom' },\n      { type: 'linear', position: 'left' }\n    ],\n    []\n  )\n\n  if (props.profile) {\n    return (\n\n      <Tabs>\n        <Tab id=\"tab-1\" className=\"page-content\" tabActive>\n          <Row>\n            <Col width=\"100\" tabletWidth=\"50\">\n\n              <Card>\n                <CardHeader>\n                  <img src={props.profile.avatar} width=\"80\"></img>\n                  <div className='profile-card'>{props.profile.fullname}</div>\n                  <div className=\"demo-facebook-date\"><InteractionMenu model={props.profile} klass='Profile' interaction={props.interaction} sourceType='Profile' sourceId={props.profile.id} /></div>\n                </CardHeader>\n                <CardContent>\n                  <ExpertiesList experties={props.profile.experties} />\n                </CardContent>\n              </Card>\n              <Followers followers={props.profile.followers} profile={props.profile}/>\n            </Col>\n\n            <Col width=\"100\" tabletWidth=\"50\">\n            <ChannelCompactList channels={props.channels} />\n            <Followees followees={props.profile.followees} profile={props.profile}/>\n            </Col>\n          </Row>\n\n        </Tab>\n        <Tab id=\"tab-2\" className=\"page-content\">\n          <Row noGap>\n            <Col width=\"100\" tabletWidth=\"50\">\n              {/*\n                  <div\n                    style={{\n                      display: 'inline-block',\n                      borderRadius: '5px',\n                      padding: '10px',\n                      marginRight: '10px',\n                      backgroundColor: 'white',\n                      width: '250px',\n                      height: '200px'\n                    }}\n                  > \n                    <Chart data={data} axes={axes} />\n                    </div>\n                    */}\n              {props.metas.map((m) =>\n                <React.Fragment>\n                  <ActualList meta={m.meta} editable={false} actuals={m.actuals} removeActual={props.removeActual} />\n                </React.Fragment>\n              )}\n            </Col>\n          </Row>\n        </Tab>\n\n        <Tab id=\"tab-3\" className=\"page-content\">\n          <div className=\"block-title\">Only Tablet Side By Side</div>\n          <Row>\n            <Col width=\"100\" tabletWidth=\"100\">\n              <div className=\"timeline timeline-sides\">\n                <div className=\"timeline-item\">\n                  <div className=\"timeline-item-date\">21 <small>DEC</small></div>\n                  <div className=\"timeline-item-divider\"></div>\n                  <div className=\"timeline-item-content\">\n                    <div className=\"timeline-item-inner\">\n                      <div className=\"timeline-item-time\">12:30</div>\n                      <div className=\"timeline-item-title\">Title</div>\n                      <div className=\"timeline-item-subtitle\">Subtitle</div>\n                      <div className=\"timeline-item-text\">Text</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"timeline-item\">\n                  <div className=\"timeline-item-date\">21 <small>DEC</small></div>\n                  <div className=\"timeline-item-divider\"></div>\n                  <div className=\"timeline-item-content\">\n                    <div className=\"timeline-item-inner\">\n                      <div className=\"timeline-item-time\">12:30</div>\n                      <div className=\"timeline-item-title\">Title</div>\n                      <div className=\"timeline-item-subtitle\">Subtitle</div>\n                      <div className=\"timeline-item-text\">Text</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Col>\n          </Row>\n        </Tab>\n      </Tabs >\n\n    )\n  } else {\n    return (null)\n  }\n}\nexport default ProfileShow;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Link,\n  Tabs,\n  Toolbar,\n  Tab,\n  Range,\n  Block,\n  Icon, Fab\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport ProfileShow from \"../../containers/profiles/show\"\n\nexport default class Layout extends Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.addTag = this.addTag.bind(this);\n    this.interaction = this.interaction.bind(this);\n    \n    this.state = {\n      token: window.localStorage.getItem('token'),\n      profile: null,\n      id: null,\n      actuals: null,\n      metas: null,\n      channels: null,\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    MyActions.getInstance('profiles', this.$f7route.params['profileId'], this.state.token);\n  }\n\n  getInstance() {\n    var profile = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (profile && klass === 'Profile') {\n      this.setState({\n        profile: profile,\n        id: profile.id,\n        actuals: profile.actuals,\n        metas: profile.metas,\n        channels: profile.channels,\n      });\n    }\n  }\n\n  fab() {\n    if (this.state.profile) {\n      return (\n        <Fab href={\"/profiles/\" + this.state.profile.id + \"/edit\"} target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"lime\">\n          <Icon ios=\"f7:edit\" aurora=\"f7:edit\" md=\"material:edit\"></Icon>\n          <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n        </Fab>\n      )\n    }\n  }\n\n  addTag(){\n    console.log('hey');\n  }\n\n  interaction(interaction_type, interactionable_id, interactionable_type, source_type = null, source_id = null) {\n    var data = { interaction_type: interaction_type, interactionable_id: interactionable_id, interactionable_type: interactionable_type, source_type: source_type, source_id: source_id }\n    MyActions.setInstance('interactions', data, this.state.token);\n  }\n\n  render() {\n    const { profile, actuals, metas, channels } = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.profiles} backLinkForce={true} backLink={dict.back} />\n        <Toolbar tabbar bottom>\n          <Link tabLink=\"#tab-1\" tabLinkActive><i className=\"va ml-5 fa fa-user-circle\"></i></Link>\n          <Link tabLink=\"#tab-2\"><i className=\"va ml-5 fa fa-bar-chart\"></i></Link>\n          <Link tabLink=\"#tab-3\"><i className=\"va ml-5 fa fa-list\"></i></Link>\n        </Toolbar>\n        {this.fab()}\n        <ProfileShow profile={profile} actuals={actuals} channels={channels} metas={metas} addTag={this.addTag} interaction={this.interaction}/>\n\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { Row, CardHeader, Card, CardContent, Col, Link, CardFooter, Chip, Gauge } from 'framework7-react';\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport 'moment/locale/fa';\nimport ExpertiesList from \"./experties\";\nimport InteractionMenu from \"../interactions/menu\"\n\nconst ProfileList = (props) => {\n\n  if (props.profiles) {\n    console.log(props.profiles)\n    return (\n      <Row noGap>\n        {props.profiles.map((profile) =>\n          <Col width=\"100\" tabletWidth=\"33\">\n            <Card className=\"demo-facebook-card\">\n              <CardHeader className=\"no-border\">\n                <div className=\"demo-facebook-avatar\"><img src={profile.avatar} width=\"34\" height=\"34\" /></div>\n                <div className=\"demo-facebook-name \"><Link className=\"gray-color\" href={'/profiles/' + profile.id}>{profile.fullname.substring(0, 30)}</Link></div>\n                <div className=\"demo-facebook-date\"><InteractionMenu model={profile} klass='Profile' interaction={props.interaction} sourceType='Profile' sourceId={profile.id} /></div>\n        <div className=\"demo-facebook-sub\">\n          <Moment locale=\"fa\" fromNow ago>{profile.last_login}</Moment> {dict.ago}\n          </div>\n              </CardHeader>\n              <CardFooter className='profile-footer'>\n              <ExpertiesList experties={profile.experties} />\n              </CardFooter>\n            </Card>\n          </Col>\n        )}\n      </Row>\n    )\n  } else {\n    return (<ul></ul>)\n  }\n}\nexport default ProfileList;\n","import React from \"react\";\nimport { Page, Navbar, Searchbar, BlockTitle, Subnavbar, Fab, Icon, Link } from 'framework7-react';\nimport ProfileList from \"./list\"\nimport { dict } from '../../Dict';\n\nconst ProfileIndex = (props) => {\n  return (\n    <Page>\n      <Navbar title={dict.profiles} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n        <Subnavbar inner={false}>\n          <Searchbar\n            disableButtonText={dict.cancel}\n            placeholder={dict.search}\n            onChange={(e) => {\n              props.search({ query: e.target.value })\n            }}\n          ></Searchbar>\n        </Subnavbar>\n      </Navbar>\n      <BlockTitle></BlockTitle>\n      <Fab href=\"/profiles/new\" target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"deeporange\">\n        <Icon ios=\"f7:add\" aurora=\"f7:add\" md=\"material:add\"></Icon>\n        <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n      </Fab>\n      <ProfileList profiles={props.profiles} interaction={props.interaction} />\n\n    </Page>\n  )\n}\nexport default ProfileIndex;\n","import React from \"react\"\nimport { Page,Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport ProfileIndex from \"../../containers/profiles/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict} from '../../Dict';\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n\nexport default class Layout extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.search = this.search.bind(this);\n    this.interaction = this.interaction.bind(this);\n    \n    \n    \n    this.state = {\n      token: window.localStorage.getItem('token'),\n      profiles: null,\n      query: null,\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({ text: dict.receiving, closeTimeout: 2000, position: 'top'});\n    MyActions.getList('profiles', this.state.page);\n  }\n\n  search(obj){\n    this.setState(obj, () => {\n      MyActions.getList('profiles/search', this.state.page, {q: this.state.query});\n  });    \n  }\n\n  getList() {\n    var profiles = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (profiles && klass === 'Profile'){\n      this.setState({\n        profiles: profiles,\n      });\n    }\n  }\n\n  interaction(interaction_type, interactionable_id, interactionable_type, source_type=null, source_id=null){\n    var data = {interaction_type: interaction_type, interactionable_id: interactionable_id, interactionable_type: interactionable_type, source_type: source_type, source_id: source_id}\n    MyActions.setInstance('interactions', data, this.state.token);\n  }\n\n  render() {\n    const {profiles} = this.state;\n    return(<ProfileIndex profiles={profiles} interaction={this.interaction} search={this.search}/>)\n  }\n}\n","import React from \"react\";\nimport { List, ListItem, ListInput, CardFooter, Button, Card, Link, CardHeader, CardContent, Row } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\nimport ActualForm from \"../actuals/form\";\nimport ActualList from \"../actuals/list\";\nimport ExpertiesList from \"./experties\";\nimport ImageUploader from 'react-images-upload';\nconst ProfileForm = (props) => {\n  if (props.name && props.metas) {\n    return (\n      <React.Fragment>\n        <Card>\n          <CardHeader>{dict.profile_info}</CardHeader>\n          <CardContent>\n            <List form>\n              <ListInput\n                label={dict.firstname}\n                type=\"text\"\n                placeholder='...'\n                defaultValue={props.name}\n                onInput={(e) => {\n                  props.handleChange({ name: e.target.value })\n                }}\n              />\n\n              <ListInput\n                label={dict.surename}\n                type=\"text\"\n                placeholder='...'\n                defaultValue={props.surename}\n                onInput={(e) => {\n                  props.handleChange({ surename: e.target.value })\n                }}\n              />\n            </List>\n          </CardContent>\n          <CardFooter>\n            <Link></Link>\n            <Button className=\"col\" fill onClick={props.submit}>{dict.submit}</Button>\n          </CardFooter>\n        </Card>\n\n        <Card>\n          <CardHeader>{dict.experties}</CardHeader>\n          <CardContent>\n            <List>\n              <ListItem>\n                <ExpertiesList experties={props.experties} editable={true} removeExperties={props.removeExperties}/>\n              </ListItem>\n            </List>\n\n            <List form>\n              <ListInput\n                label={dict.new_experties}\n                type=\"text\"\n                placeholder='...'\n                defaultValue={props.expert}\n                onInput={(e) => {\n                  props.handleChange({ expert: e.target.value })\n                }}\n              />\n\n            </List>\n          </CardContent>\n          <CardFooter>\n            <Link></Link>\n            <Button className=\"col\" fill onClick={props.submitExperties}>{dict.submit}</Button>\n          </CardFooter>\n        </Card>\n\n\n        <Card>\n          <CardHeader>\n            <img src={props.avatar} width=\"80\"></img>\n          </CardHeader>\n          <ImageUploader\n            withIcon={true}\n            buttonText={dict.choose_image}\n            onChange={props.onDrop}\n            buttonClassName='upload-btn'\n            imgExtension={['.jpg', '.jpeg', '.png']}\n            maxFileSize={5242880}\n          />\n        </Card>\n        {props.metas.map((m) =>\n          <React.Fragment>\n            <ActualList meta={m.meta} editable={true} actuals={m.actuals} removeActual={props.removeActual} />\n            <ActualForm meta={m.meta} submit={props.submitFields} onChangeValue={props.handleChangeValueFields} />\n          </React.Fragment>\n        )}\n\n\n      </React.Fragment>\n    )\n  } else {\n    return (null)\n  }\n\n}\nexport default ProfileForm;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  List,\n  ListItem,\n  ListInput,\n  Toggle,\n  BlockTitle,\n  Row,\n  Button,\n  Range,\n  Block,\n  Icon\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport ProfileForm from \"../../containers/profiles/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class ProfileCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.handleChangeValueFields = this.handleChangeValueFields.bind(this);\n    this.removeActual = this.removeActual.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.submitFields = this.submitFields.bind(this);\n    this.onDrop = this.onDrop.bind(this);    \n    this.getList = this.getList.bind(this);\n    \n    \n    this.getList = this.getList.bind(this);\n\n    this.state = {\n      profile: {},\n      metas: null,\n      token: window.localStorage.getItem('token'),\n      fields: [],\n      name: 'dd',\n      surename: '',\n      pictures: [],\n      avatar: null,\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.getInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  componentDidMount(){\n    this.loadData();\n\n  }\n\n  loadData(){\n    MyActions.getList('metas', this.state.page);\n  }\n\n  onDrop(picture) {\n    console.log(picture[0])\n    MyActions.fileUpload('profiles', this.state.id, picture[0], this.state.token);\n  }\n\n\n  submit(){\n    var data = {id: this.state.id, name: this.state.name, surename: this.state.surename}\n    MyActions.updateInstance('profiles', data, this.state.token);\n  }\n\n  submitFields(){\n    var data = {meta_id: this.state.metaId, content: this.state.fields}\n    MyActions.setInstance('actuals', data, this.state.token);\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  handleChangeValueFields(key, value, metaId) {\n    var fields = this.state.fields\n    if (fields.length > 0) {\n      for (let i = 0; i < fields.length; i++) {\n        if (fields[i].fid && fields[i].fid === key) {\n          let newState = Object.assign({}, this.state);\n          newState.fields[i] = { fid: key, value: value, metaId: metaId }\n          this.setState(newState);\n        } else {\n          this.setState({ fields: this.state.fields.concat({ fid: key, value: value , metaId:metaId}) });\n        }\n      }\n    } else {\n      this.setState({ fields: this.state.fields.concat({ fid: key, value: value, metaId:metaId }) });\n    }\n  }\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/profiles/');\n  }\n\n  getInstance() {\n    var profile = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (profile && klass === 'Profile') {\n      this.setState({\n        metas: profile.metas,\n        profile: profile\n      });\n    }\n  }\n\n\n  removeActual(uuid){\n    MyActions.removeInstance('actuals', {uuid: uuid});\n  }\n\n  getList() {\n    var metas = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (metas && klass === 'Meta'){\n      this.setState({\n        metas: metas,\n      });\n    }\n  }\n\n\n\n  render() {\n    const {profile, metas, name, avatar, surename} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.profile_form} backLink={dict.back} />\n        <BlockTitle>{dict.profile_form}</BlockTitle>\n        <ProfileForm name={name} avatar={avatar} surename={surename} metas={metas} onDrop={this.onDrop} removeActual={this.removeActual} submitFields={this.submitFields} submit={this.submit} editing={true} handleChangeValueFields={this.handleChangeValueFields} handleChange={this.handleChangeValue}/>\n      </Page>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar,\n  BlockTitle,\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport ProfileForm from \"../../containers/profiles/form\"\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class ProfileCreate extends Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.handleChangeValueFields = this.handleChangeValueFields.bind(this);\n    this.removeActual = this.removeActual.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.submitFields = this.submitFields.bind(this);\n    this.onDrop = this.onDrop.bind(this);    \n    this.getList = this.getList.bind(this);\n    this.submitExperties = this.submitExperties.bind(this);\n    this.removeExperties = this.removeExperties.bind(this);\n    \n\n    \n\n    this.state = {\n      name: null,\n      surename: null,\n      metas: null,\n      metaId: null,\n      actuals: null,\n      experties: null,\n      expert: null,\n      token: window.localStorage.getItem('token'),\n      fields: [],\n      id: null, \n      pictures: [],\n      avatar: null,\n    }\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n    ModelStore.on(\"file_posted\", this.getInstance);    \n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.getInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    ModelStore.removeListener(\"file_posted\", this.getInstance);\n  }\n\n  componentDidMount(){\n    this.loadData();\n  }\n\n  loadData(){\n    if (this.$f7route.params['profileId']) {\n      MyActions.getInstance('profiles', this.$f7route.params['profileId']);\n    }\n  }\n\n  onDrop(picture) {\n    console.log(picture[0])\n    MyActions.fileUpload('profiles', this.state.id, picture[0], this.state.token);\n  }\n\n\n  submit(){\n    var data = {id: this.state.id, name: this.state.name, surename: this.state.surename}\n    MyActions.updateInstance('profiles', data, this.state.token);\n  }\n\n  submitFields(){\n    var data = {meta_id: this.state.metaId, content: this.state.fields}\n    MyActions.setInstance('actuals', data, this.state.token);\n  }\n\n  submitExperties(){\n    var data = {id: this.state.id, experties: this.state.expert}\n    MyActions.setInstance('profiles/add_experties/'+this.$f7route.params['profileId'], data, this.state.token);\n  }\n\n  removeExperties(experties){\n    var data = {id: this.state.id, experties: experties}\n    MyActions.setInstance('profiles/remove_experties/'+this.$f7route.params['profileId'], data, this.state.token);\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  handleChangeValueFields(key, value, metaId) {\n    var fields = this.state.fields\n    if (fields.length > 0) {\n      for (let i = 0; i < fields.length; i++) {\n        if (fields[i].fid && fields[i].fid === key) {\n          let newState = Object.assign({}, this.state);\n          newState.fields[i] = { fid: key, value: value, metaId: metaId }\n          this.setState(newState);\n        } else {\n          this.setState({ fields: this.state.fields.concat({ fid: key, value: value , metaId:metaId}) });\n        }\n      }\n    } else {\n      this.setState({ fields: this.state.fields.concat({ fid: key, value: value, metaId:metaId }) });\n    }\n  }\n\n\n  setInstance(){\n    const self = this;\n    this.$f7router.navigate('/profiles/');\n  }\n\n  getInstance() {\n    var profile = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (profile && klass === 'Profile') {\n      this.setState({\n        id: profile.id, \n        metas: profile.metas,\n        name: profile.name,\n        surename : profile.surename,\n        avatar: profile.avatar,\n        experties: profile.experties\n      });\n    }\n  }\n\n\n  removeActual(uuid){\n    MyActions.removeInstance('actuals', {uuid: uuid});\n  }\n\n  getList() {\n    var metas = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (metas && klass === 'Meta'){\n      this.setState({\n        metas: metas,\n      });\n    }\n  }\n\n\n\n  render() {\n    const {name, surename, avatar,metas, actuals, experties} = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.profile_form} backLink={dict.back} />\n        <BlockTitle>{dict.profile_form}</BlockTitle>\n        <ProfileForm name={name} avatar={avatar} surename={surename} metas={metas} experties={experties} onDrop={this.onDrop} removeActual={this.removeActual} submitFields={this.submitFields} submit={this.submit} editing={true} handleChangeValueFields={this.handleChangeValueFields} handleChange={this.handleChangeValue} submitExperties={this.submitExperties} removeExperties={this.removeExperties}/>\n      </Page>\n    );\n  }\n}\n\n","import React from \"react\";\nimport { Page, Navbar, Searchbar, BlockTitle, NavRight, Fab, Icon, Link } from 'framework7-react'; import crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport 'moment/locale/fa';\nimport SimpleList from \"../profiles/simpleList\"\n\nconst FriendshipIndex = (props) => {\n    if (props.friendship) {\n        return (\n            <Page >\n                <Navbar title={dict.profiles} backLink={dict.back}>\n                    <Link panelOpen=\"right\">\n                        <Icon f7=\"bars\"></Icon>\n                    </Link>\n\n                </Navbar>\n                <BlockTitle></BlockTitle>\n                <SimpleList profiles={props.friendship.followees} />\n            </Page>\n        )\n    } else {\n        return (null)\n    }\n}\nexport default FriendshipIndex;\n","import React from \"react\"\nimport { Page, Fab, Icon } from 'framework7-react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport FriendshipIndex from \"../../containers/friendships/index\"\nimport * as MyActions from \"../../actions/MyActions\";\nimport { loggedIn } from \"../users/loggedIn.js\"\n\n\nexport default class Friendship extends React.Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.loggedIn = loggedIn.bind(this);\n\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      friendship: null,\n      query: null,\n      page: 1\n    }\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    this.loggedIn();\n    this.loadData();\n  }\n\n  loadData() {\n    MyActions.getInstance('friendships', this.$f7route.params['sourceId'], this.state.token);\n  }\n\n\n  getInstance() {\n    var friendship = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (friendship && klass === 'Friendship') {\n      this.setState({\n        friendship: friendship,\n        id: friendship.id,\n      });\n    }\n    console.log(friendship, klass)\n  }\n\n\n\n  render() {\n    const { friendship } = this.state;\n    return (<FriendshipIndex  friendship={friendship}  />)\n  }\n}\n","import React from \"react\";\nimport { Page, Navbar, List, Button, ListItem, ListInput, Icon, Link, Card, CardHeader, CardContent, CardFooter } from 'framework7-react'; import crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\n\n\n\nconst PrivacyIndex = (props) => {\n    if (props.profilePrivacy) {\n        function findSetting(settings, title){\n            for (let i = 0; i < settings.length; i++) {\n                if(settings[i].title == title){\n                    return settings[i].value\n                }\n            }\n        }\n        function options(op, title,settings) {\n            var result = [<option></option>]\n            var selected = false\n            for (let i = 0; i < op.length; i++) {\n                if(op[i].title == findSetting(settings, title)){\n                    selected = true\n                } else {\n                    selected = false\n                }\n                result.push(\n                    <option value={op[i].title} selected={selected}>\n                        {op[i].label}\n                    </option>\n                )\n            }\n            return result\n        }\n\n\n        return (\n            <Page >\n                <Navbar title={dict.privacy_settings} backLink={dict.back}>\n                    <Link panelOpen=\"right\">\n                        <Icon f7=\"bars\"></Icon>\n                    </Link>\n                </Navbar>\n                <Card>\n                    <CardHeader>{dict.settings}</CardHeader>\n                    <CardContent>\n                        <List >\n                            {props.profilePrivacy.setting_schemas.map((schema) =>\n                                <ListInput\n                                    label={schema.label}\n                                    type=\"select\"\n                                    onChange={(e) => {\n                                        props.handleChangeValue( schema.title, e.target.value)\n                                    }\n                                    }\n                                >\n                                    {options(schema.options, schema.title ,props.privacySettings)}\n                                </ListInput>)}\n                        </List>\n                    </CardContent>\n                    <CardFooter>\n                        <Link></Link>\n                         <Button className=\"col\" fill  onClick={props.submit}>{dict.submit}</Button>          \n                    </CardFooter>\n                </Card>\n            </Page>\n        )\n    } else {\n        return (null)\n    }\n}\nexport default PrivacyIndex;\n","import React, { Component } from 'react';\nimport {\n  Page,\n  Navbar\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport PrivacyIndex from \"../../containers/privacy/index\"\n\nexport default class Layout extends Component {\n  constructor() {\n    super();\n    this.getInstance = this.getInstance.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    \n    this.state = {\n      token: window.localStorage.getItem('token'),\n      profilePrivacy: null,\n      privacySettings: null,\n      fields: [],\n\n    }\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.setInstance);\n\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  componentDidMount() {\n    MyActions.getInstance('privacy', 1, this.state.token);\n  }\n\n  getInstance() {\n    var profilePrivacy = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (profilePrivacy && klass === 'Privacy') {\n      this.setState({\n        profilePrivacy: profilePrivacy,\n        privacySettings: profilePrivacy.privacy_settings,\n        fields : profilePrivacy.privacy_settings\n      });\n    }\n  }\n\n  setInstance(){\n    const self = this;\n    self.$f7.dialog.alert(dict.completed_successfully, dict.message);\n  }\n\n\n  submit() {\n    var data = { id: 1, privacy: this.state.fields}\n    MyActions.setInstance('privacy', data, this.state.token);\n  }\n\n\n\n  handleChangeValue(key, value) {\n    var fields = this.state.fields\n    if (fields.length > 0) {\n      for (let i = 0; i < fields.length; i++) {\n        if (fields[i].title && fields[i].title == key) {\n          let newState = Object.assign({}, this.state);\n          newState.fields[i] = { title: key, value: value }\n          this.setState(newState);\n        } \n      }\n    } else {\n      this.setState({ fields: this.state.fields.concat({ title: key, value: value }) });\n    }\n  }\n\n  render() {\n    const { profilePrivacy, privacySettings } = this.state;\n    return (\n      <Page>\n        <Navbar title={dict.privacy_settings} backLink={dict.back} />\n        <PrivacyIndex profilePrivacy={profilePrivacy} privacySettings={privacySettings} handleChangeValue={this.handleChangeValue} submit={this.submit}/>\n      </Page>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link, List, CardHeader, ListInput, CardContent, CardFooter, Button, Page, Card, Navbar, Icon } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\n\nconst LoginForm = (props) => {\n  return (\n    <Page>\n      <Navbar title={dict.sign_up} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n      </Navbar>\n      <Card>\n        <CardHeader>{dict.login}</CardHeader>\n        <CardContent className='mh-auto'>\n          <List >\n            <ListInput\n              label={dict.email}\n              type=\"text\"\n              autofocus={true}\n              placeholder={dict.enter_your_email}\n              value={props.email}\n              onInput={(e) => {\n                props.handleChange({ email: e.target.value })\n              }}\n            />\n            {/*<ListInput\n              label={dict.password}\n              type=\"password\"\n              placeholder={dict.enter_your_password}\n              value={props.password}\n              onInput={(e) => {\n                props.handleChange({ password: e.target.value })\n              }}\n            />*/}\n          </List>\n        </CardContent>\n        <CardFooter>\n          <Link href=\"/sign_up/\" animate={false} ignoreCache={true}>{dict.you_can_sign_up} </Link>\n          <Button fill className='fs-11 external f-color-black bg-teal' href=\"https://auth.ut.ac.ir:8443/cas/login?service=https%3A%2F%2Fsn.ut.ac.ir%2Fusers%2Fservice\"  animate={false} ignoreCache={true}>{dict.cas} </Button>\n          <Link className=\"btn-notice\"></Link>\n          <Button className=\"col btn\" fill onClick={props.submit}>{dict.login}</Button>\n        </CardFooter>\n      </Card>\n    </Page>\n  )\n}\nexport default LoginForm;\n","import React from 'react';\nimport {\n  Page,\n  Navbar,\n  NavLeft,\n  NavTitle,\n  NavRight,\n  Link,\n  Toolbar,\n  Block,\n  BlockTitle,\n  List,\n  ListItem,\n  Row,\n  Col,\n  Button, Icon, Fab,Searchbar, Subnavbar, LoginScreenTitle, ListInput, ListButton, BlockFooter\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport LoginForm from \"../../containers/users/Login\"\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class extends React.Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      email: '',\n      password: '',\n    };\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n  componentDidMount(){\n    if(this.$f7route.params['token']) {\n      MyActions.setInstance('users/validate_token', {}, this.$f7route.params['token']);\n    }\n    if(this.state.token && this.state.token.length > 10){\n      MyActions.setInstance('users/validate_token', {}, this.state.token);\n    }\n  }\n\n  submit(){\n    var data = {email: this.state.email, password: this.state.password}\n    MyActions.setInstance('users/login', data);\n  }\n\n  setInstance(){\n    var klass = ModelStore.getKlass()\n    if (klass === 'Login') {\n      this.$f7router.navigate('/verification/'+this.state.email);\n    }\n    if (klass === 'Validate') {\n      this.$f7router.navigate('/');\n      window.location.reload()\n    }\n    console.log(klass)\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  render() {\n    const {username, password} = this.state;\n    return (\n      <LoginForm submit={this.submit} handleChange={this.handleChangeValue}/>\n    )\n  }\n\n}\n","import React from 'react';\nimport {\n  Page,\n  Navbar,\n  NavLeft,\n  NavTitle,\n  NavRight,\n  Link,\n  Toolbar,\n  Block,\n  BlockTitle,\n  List,\n  ListItem,\n  Row,\n  Col,\n  Button, Icon, Fab,Searchbar, Subnavbar, LoginScreenTitle, ListInput, ListButton, BlockFooter\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport LoginForm from \"../../containers/users/Login\"\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class extends React.Component {\n  constructor() {\n    super();\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n\n    this.state = {\n      email: '',\n      password: '',\n    };\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n  componentDidMount(){\n    MyActions.setInstance('users/validate_token', {}, this.$f7route.params['token']);\n  }\n\n  setInstance() {\n    var user = ModelStore.getIntance()\n    var klass = ModelStore.getKlass()\n    if (klass === 'Validate') {\n      window.localStorage.setItem('token', user.token);\n      this.$f7router.navigate('/');\n      window.location.reload()\n    } else {\n      this.$f7router.navigate('/login_error/');\n      window.location.reload()\n    }\n  }\n\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  render() {\n    const {username, password} = this.state;\n    return (\n      <LoginForm submit={this.submit} handleChange={this.handleChangeValue}/>\n    )\n  }\n\n}\n","import React from \"react\";\nimport { Link, List, ListItem, ListInput, Navbar, Icon, Button, Page, LoginScreenTitle, ListButton, CardFooter, Card, CardHeader, CardContent } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\n\nconst SignUpForm = (props) => {\n  return (\n    <Page>\n      <Navbar title={dict.sign_up} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n      </Navbar>\n      <Card>\n        <CardHeader>{dict.sign_up}</CardHeader>\n        <CardContent>\n          <List >\n            <ListInput\n              label={dict.firstname + ' *'}\n              placeholder={dict.enter_your_name}\n              type=\"text\"\n              name={crypto.lib.WordArray.random(32)}\n              onInput={(e) => {\n                props.handleChange({ name: e.target.value })\n              }}\n            />\n\n            <ListInput\n              label={dict.surename + ' *'}\n              placeholder={dict.enter_your_surename}\n              type=\"text\"\n              name={crypto.lib.WordArray.random(32)}\n              onInput={(e) => {\n                props.handleChange({ surename: e.target.value })\n              }}\n            />\n\n\n            <ListInput\n              label={' * ' + dict.email}\n              type=\"email\"\n              validate\n              placeholder={dict.enter_your_email}\n              className='ltr'\n              value={props.email}\n              onInput={(e) => {\n                props.handleChange({ email: e.target.value })\n              }}\n            />\n          {/*\n            <ListInput\n              label={dict.password + ' *'}\n              type=\"password\"\n              placeholder={dict.enter_your_password}\n              autocomplete='new-password'\n              name={crypto.lib.WordArray.random(32)}\n              value={props.password}\n              onInput={(e) => {\n                props.handleChange({ password: e.target.value })\n              }}\n            />\n            <ListInput\n              label={dict.password_confirmation + ' *'}\n              type=\"password\"\n              autocomplete='off'\n              placeholder={dict.enter_your_password_confirmation}\n              value={props.password}\n              onInput={(e) => {\n                props.handleChange({ password_confirmation: e.target.value })\n              }}\n            />*/}\n          </List>\n        </CardContent>\n        <CardFooter>\n          <Link href=\"/login/\">{dict.if_registered}{'\\u00A0'}{dict.you_can_login} </Link>\n          <Link className=\"btn-notice\"></Link>\n          <Button className=\"col btn\" fill onClick={props.submit}>{dict.sign_up}</Button>\n        </CardFooter>\n      </Card>\n    </Page>\n  )\n}\nexport default SignUpForm;\n","import React from 'react';\nimport {\n  Page,\n  Navbar,\n  NavLeft,\n  NavTitle,\n  NavRight,\n  Link,\n  Toolbar,\n  Block,\n  BlockTitle,\n  List,\n  ListItem,\n  Row,\n  Col,\n  Button, Icon, Fab, Searchbar, Subnavbar, LoginScreenTitle, ListInput, ListButton, BlockFooter\n} from 'framework7-react';\nimport { dict } from '../../Dict';\nimport SignUpForm from \"../../containers/users/SignUp\"\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class extends React.Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n\n    this.state = {\n      email: '',\n      name: '',\n      surename: '',\n    };\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  submit() {\n    this.$$('.btn').hide();\n    this.$$('.btn-notice').text(dict.submitting);\n    var data = { \n      email: this.state.email,\n       name: this.state.name, \n       surename: this.state.surename }\n    if (\n      (this.state.email && this.state.email.length > 0) &&\n      (this.state.name && this.state.name.length > 0) &&\n      (this.state.surename && this.state.surename.length > 0) \n      ) {\n      MyActions.setInstance('users/sign_up', data);\n    } else {\n      const self = this;\n      self.$f7.dialog.alert(dict.incomplete_data, dict.alert);\n    }\n  }\n\n  setInstance() {\n    var klass = ModelStore.getKlass()\n    if (klass === 'SignUp') {\n      this.$$('.btn').show();\n      this.$f7router.navigate('/verification/'+this.state.email);\n    }\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n    console.log(obj)\n  }\n\n  render() {\n    const { username, password } = this.state;\n    return (\n      <SignUpForm submit={this.submit} handleChange={this.handleChangeValue} />\n    )\n  }\n\n}\n","import React from \"react\";\nimport { Link, List, CardHeader, ListInput, CardContent, CardFooter, Button, Page, Card, Navbar, Icon } from 'framework7-react';\nimport { dict } from '../../Dict';\nimport crypto from 'crypto-js';\n\nconst LoginForm = (props) => {\n  return (\n    <Page>\n      <Navbar title={dict.verification} >\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n      </Navbar>\n      <Card>\n        <CardHeader>{dict.login}</CardHeader>\n        <CardContent >\n          <List >\n          <ListInput\n              label={dict.email}\n              type=\"text\"\n              autofocus={true}\n              placeholder={dict.enter_your_email}\n              value={props.email}\n              onInput={(e) => {\n                props.handleChange({ email: e.target.value })\n              }}\n            />\n            <ListInput\n              label={dict.verification_code}\n              type=\"text\"\n              placeholder={dict.enter_verification_code}\n              onInput={(e) => {\n                props.handleChange({ verificationCode: e.target.value })\n              }}\n            />\n          </List>\n        </CardContent>\n        <CardFooter>\n          <Link href=\"/sign_up/\" animate={false} ignoreCache={true}>{dict.you_can_sign_up} </Link>\n          <Link className=\"btn-notice\"></Link>\n          <Button className=\"col btn\" fill onClick={props.submit}>{dict.login}</Button>\n        </CardFooter>\n      </Card>\n    </Page>\n  )\n}\nexport default LoginForm;\n","import React from 'react';\nimport {\n  Page,\n  Navbar,\n  NavLeft,\n  NavTitle,\n  NavRight,\n  Link,\n  Toolbar,\n  Block,\n  BlockTitle,\n  List,\n  ListItem,\n  Row,\n  Col,\n  Button, Icon, Fab,Searchbar, Subnavbar, LoginScreenTitle, ListInput, ListButton, BlockFooter\n} from 'framework7-react';\nimport { dict} from '../../Dict';\nimport VerificationForm from \"../../containers/users/Verification\"\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\nexport default class extends React.Component {\n  constructor() {\n    super();\n    this.submit = this.submit.bind(this);\n    this.handleChangeValue = this.handleChangeValue.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n\n    this.state = {\n      verificationCode: '',\n      email: '',\n    };\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  componentDidMount(){\n    this.setState({email: this.$f7route.params['email']})\n  }\n\n  submit(){\n    var data = {verification_code: this.state.verificationCode}\n    MyActions.setInstance('users/verify', data);\n  }\n\n  setInstance(){\n    var user = ModelStore.getIntance();\n    var klass = ModelStore.getKlass()\n    if (user && klass == 'Verify'){\n      window.localStorage.setItem('token', user.token);\n      this.$f7router.navigate('/');\n      window.location.reload()\n    }\n  }\n\n\n  handleChangeValue(obj) {\n    this.setState(obj);\n  }\n\n  render() {\n    const {username, email} = this.state;\n    return (\n      <VerificationForm submit={this.submit} email={email} handleChange={this.handleChangeValue}/>\n    )\n  }\n\n}\n","import React from \"react\";\nimport {\n  Page,\n  Card,\n  Row,\n  Col,\n  Fab,\n  Icon,\n  Navbar,\n  Link,\n  Button,\n  CardContent,\n  CardFooter,\n  CardHeader,\n  FabButtons,\n  FabButton,\n  Block,\n} from \"framework7-react\";\n\nimport { dict } from \"../../Dict\";\n\n\nconst RoomIndex = (props) => {\n  function videos() {\n    var result = [];\n\n    if (props.feeds) {\n      {\n        props.feeds.map((feed) => {\n          result.push(\n            <div class=\"col-100 tablet-33\" key={\"container-\" + feed.id}>\n              <video\n                controls={true}\n                key={feed.id}\n                id={\"video-\" + feed.id}\n                src=\"\"\n                width=\"320\"\n                height=\"240\"\n                autoPlay\n                playsInline\n                muted={props.muted}\n              />\n            </div>\n          );\n          props.streamAttacher(feed)\n        });\n      }\n    }\n    return result;\n  }\n  return (\n    <Page onPageAfterIn={props.pageAfterIn.bind(this)}>\n      <Navbar title={dict.profiles} backLink={dict.back}>\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n      </Navbar>\n      <Block>\n        <Row className=\"center\" id=\"hosts\">\n          {videos()}\n        </Row>\n      </Block>\n\n      <Fab\n        position=\"center-bottom\"\n        slot=\"fixed\"\n        color=\"orange\"\n        className=\"f-color-black\"\n      >\n        <i class=\"fa fa-cogs\" aria-hidden=\"true\"></i>\n        <i class=\"fa fa-cog\" aria-hidden=\"true\"></i>\n        <FabButtons position=\"center\">\n          <FabButton\n            className=\"f-color-black\"\n            outline\n            active\n            onClick={() => props.publishMicrophone()}\n          >\n            <i class=\"fa fa-microphone\" aria-hidden=\"true\"></i>\n          </FabButton>\n          <FabButton\n            className=\"f-color-black\"\n            onClick={() => props.publishCamera()}\n          >\n            <i class=\"fa fa-video-camera\" aria-hidden=\"true\"></i>\n          </FabButton>\n          <FabButton></FabButton>\n          <FabButton className=\"f-color-black\">\n            <i class=\"fa fa-desktop\" aria-hidden=\"true\"></i>\n          </FabButton>\n        </FabButtons>\n      </Fab>\n    </Page>\n  );\n};\nexport default RoomIndex;\n","/*\n\tThe MIT License (MIT)\n\n\tCopyright (c) 2016 Meetecho\n\n\tPermission is hereby granted, free of charge, to any person obtaining\n\ta copy of this software and associated documentation files (the \"Software\"),\n\tto deal in the Software without restriction, including without limitation\n\tthe rights to use, copy, modify, merge, publish, distribute, sublicense,\n\tand/or sell copies of the Software, and to permit persons to whom the\n\tSoftware is furnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included\n\tin all copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\tOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n\tTHE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n\tOTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n\tARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n\tOTHER DEALINGS IN THE SOFTWARE.\n */\n\n// List of sessions\nimport jQuery from 'jquery';\nimport adapter from 'webrtc-adapter';\n\nconst RTCRtpTransceiver = window.RTCRtpTransceiver;\nJanus.sessions = {};\n\nJanus.isExtensionEnabled = function() {\n\tif(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\n\t\t// No need for the extension, getDisplayMedia is supported\n\t\treturn true;\n\t}\n\tif(window.navigator.userAgent.match('Chrome')) {\n\t\tvar chromever = parseInt(window.navigator.userAgent.match(/Chrome\\/(.*) /)[1], 10);\n\t\tvar maxver = 33;\n\t\tif(window.navigator.userAgent.match('Linux'))\n\t\t\tmaxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n\t\tif(chromever >= 26 && chromever <= maxver) {\n\t\t\t// Older versions of Chrome don't support this extension-based approach, so lie\n\t\t\treturn true;\n\t\t}\n\t\treturn Janus.extension.isInstalled();\n\t} else {\n\t\t// Firefox of others, no need for the extension (but this doesn't mean it will work)\n\t\treturn true;\n\t}\n};\n\nvar defaultExtension = {\n\t// Screensharing Chrome Extension ID\n\textensionId: 'hapfgfdkleiggjjpfpenajgdnfckjpaj',\n\tisInstalled: function() { return document.querySelector('#janus-extension-installed') !== null; },\n\tgetScreen: function (callback) {\n\t\tvar pending = window.setTimeout(function () {\n\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\terror.name = 'The required Chrome extension is not installed: click <a href=\"#\">here</a> to install it. (NOTE: this will need you to refresh the page)';\n\t\t\treturn callback(error);\n\t\t}, 1000);\n\t\tthis.cache[pending] = callback;\n\t\twindow.postMessage({ type: 'janusGetScreen', id: pending }, '*');\n\t},\n\tinit: function () {\n\t\tvar cache = {};\n\t\tthis.cache = cache;\n\t\t// Wait for events from the Chrome Extension\n\t\twindow.addEventListener('message', function (event) {\n\t\t\tif(event.origin != window.location.origin)\n\t\t\t\treturn;\n\t\t\tif(event.data.type == 'janusGotScreen' && cache[event.data.id]) {\n\t\t\t\tvar callback = cache[event.data.id];\n\t\t\t\tdelete cache[event.data.id];\n\n\t\t\t\tif (event.data.sourceId === '') {\n\t\t\t\t\t// user canceled\n\t\t\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\t\t\terror.name = 'You cancelled the request for permission, giving up...';\n\t\t\t\t\tcallback(error);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(null, event.data.sourceId);\n\t\t\t\t}\n\t\t\t} else if (event.data.type == 'janusGetScreenPending') {\n\t\t\t\tconsole.log('clearing ', event.data.id);\n\t\t\t\twindow.clearTimeout(event.data.id);\n\t\t\t}\n\t\t});\n\t}\n};\n\nJanus.useDefaultDependencies = function (deps) {\n\tvar f = (deps && deps.fetch) || fetch;\n\tvar p = (deps && deps.Promise) || Promise;\n\tvar socketCls = (deps && deps.WebSocket) || WebSocket;\n\n\treturn {\n\t\tnewWebSocket: function(server, proto) { return new socketCls(server, proto); },\n\t\textension: (deps && deps.extension) || defaultExtension,\n\t\tisArray: function(arr) { return Array.isArray(arr); },\n\t\twebRTCAdapter: (deps && deps.adapter) || adapter,\n\t\thttpAPICall: function(url, options) {\n\t\t\tvar fetchOptions = {\n\t\t\t\tmethod: options.verb,\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json, text/plain, */*'\n\t\t\t\t},\n\t\t\t\tcache: 'no-cache'\n\t\t\t};\n\t\t\tif(options.verb === \"POST\") {\n\t\t\t\tfetchOptions.headers['Content-Type'] = 'application/json';\n\t\t\t}\n\t\t\tif(options.withCredentials !== undefined) {\n\t\t\t\tfetchOptions.credentials = options.withCredentials === true ? 'include' : (options.withCredentials ? options.withCredentials : 'omit');\n\t\t\t}\n\t\t\tif(options.body) {\n\t\t\t\tfetchOptions.body = JSON.stringify(options.body);\n\t\t\t}\n\n\t\t\tvar fetching = f(url, fetchOptions).catch(function(error) {\n\t\t\t\treturn p.reject({message: 'Probably a network error, is the server down?', error: error});\n\t\t\t});\n\n\t\t\t/*\n\t\t\t * fetch() does not natively support timeouts.\n\t\t\t * Work around this by starting a timeout manually, and racing it agains the fetch() to see which thing resolves first.\n\t\t\t */\n\n\t\t\tif(options.timeout) {\n\t\t\t\tvar timeout = new p(function(resolve, reject) {\n\t\t\t\t\tvar timerId = setTimeout(function() {\n\t\t\t\t\t\tclearTimeout(timerId);\n\t\t\t\t\t\treturn reject({message: 'Request timed out', timeout: options.timeout});\n\t\t\t\t\t}, options.timeout);\n\t\t\t\t});\n\t\t\t\tfetching = p.race([fetching, timeout]);\n\t\t\t}\n\n\t\t\tfetching.then(function(response) {\n\t\t\t\tif(response.ok) {\n\t\t\t\t\tif(typeof(options.success) === typeof(Janus.noop)) {\n\t\t\t\t\t\treturn response.json().then(function(parsed) {\n\t\t\t\t\t\t\toptions.success(parsed);\n\t\t\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t\t\treturn p.reject({message: 'Failed to parse response body', error: error, response: response});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn p.reject({message: 'API call failed', response: response});\n\t\t\t\t}\n\t\t\t}).catch(function(error) {\n\t\t\t\tif(typeof(options.error) === typeof(Janus.noop)) {\n\t\t\t\t\toptions.error(error.message || '<< internal error >>', error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn fetching;\n\t\t}\n\t}\n};\n\nJanus.useOldDependencies = function (deps) {\n\tvar jq = (deps && deps.jQuery) || jQuery;\n\tvar socketCls = (deps && deps.WebSocket) || WebSocket;\n\treturn {\n\t\tnewWebSocket: function(server, proto) { return new socketCls(server, proto); },\n\t\tisArray: function(arr) { return jq.isArray(arr); },\n\t\textension: (deps && deps.extension) || defaultExtension,\n\t\twebRTCAdapter: (deps && deps.adapter) || adapter,\n\t\thttpAPICall: function(url, options) {\n\t\t\tvar payload = options.body !== undefined ? {\n\t\t\t\tcontentType: 'application/json',\n\t\t\t\tdata: JSON.stringify(options.body)\n\t\t\t} : {};\n\t\t\tvar credentials = options.withCredentials !== undefined ? {xhrFields: {withCredentials: options.withCredentials}} : {};\n\n\t\t\treturn jq.ajax(jq.extend(payload, credentials, {\n\t\t\t\turl: url,\n\t\t\t\ttype: options.verb,\n\t\t\t\tcache: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tasync: options.async,\n\t\t\t\ttimeout: options.timeout,\n\t\t\t\tsuccess: function(result) {\n\t\t\t\t\tif(typeof(options.success) === typeof(Janus.noop)) {\n\t\t\t\t\t\toptions.success(result);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr, status, err) {\n\t\t\t\t\tif(typeof(options.error) === typeof(Janus.noop)) {\n\t\t\t\t\t\toptions.error(status, err);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t};\n};\n\nJanus.noop = function() {};\n\nJanus.dataChanDefaultLabel = \"JanusDataChannel\";\n\n// Note: in the future we may want to change this, e.g., as was\n// attempted in https://github.com/meetecho/janus-gateway/issues/1670\nJanus.endOfCandidates = null;\n\n// Initialization\nJanus.init = function(options) {\n\toptions = options || {};\n\toptions.callback = (typeof options.callback == \"function\") ? options.callback : Janus.noop;\n\tif(Janus.initDone) {\n\t\t// Already initialized\n\t\toptions.callback();\n\t} else {\n\t\tif(typeof console == \"undefined\" || typeof console.log == \"undefined\") {\n\t\t\tconsole = { log: function() {} };\n\t\t}\n\t\t// Console logging (all debugging disabled by default)\n\t\tJanus.trace = Janus.noop;\n\t\tJanus.debug = Janus.noop;\n\t\tJanus.vdebug = Janus.noop;\n\t\tJanus.log = Janus.noop;\n\t\tJanus.warn = Janus.noop;\n\t\tJanus.error = Janus.noop;\n\t\tif(options.debug === true || options.debug === \"all\") {\n\t\t\t// Enable all debugging levels\n\t\t\tJanus.trace = console.trace.bind(console);\n\t\t\tJanus.debug = console.debug.bind(console);\n\t\t\tJanus.vdebug = console.debug.bind(console);\n\t\t\tJanus.log = console.log.bind(console);\n\t\t\tJanus.warn = console.warn.bind(console);\n\t\t\tJanus.error = console.error.bind(console);\n\t\t} else if(Array.isArray(options.debug)) {\n\t\t\tfor(var d of options.debug) {\n\t\t\t\tswitch(d) {\n\t\t\t\t\tcase \"trace\":\n\t\t\t\t\t\tJanus.trace = console.trace.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"debug\":\n\t\t\t\t\t\tJanus.debug = console.debug.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"vdebug\":\n\t\t\t\t\t\tJanus.vdebug = console.debug.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"log\":\n\t\t\t\t\t\tJanus.log = console.log.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"warn\":\n\t\t\t\t\t\tJanus.warn = console.warn.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"error\":\n\t\t\t\t\t\tJanus.error = console.error.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error(\"Unknown debugging option '\" + d + \"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tJanus.log(\"Initializing library\");\n\n\t\tvar usedDependencies = options.dependencies || Janus.useDefaultDependencies();\n\t\tJanus.isArray = usedDependencies.isArray;\n\t\tJanus.webRTCAdapter = usedDependencies.webRTCAdapter;\n\t\tJanus.httpAPICall = usedDependencies.httpAPICall;\n\t\tJanus.newWebSocket = usedDependencies.newWebSocket;\n\t\tJanus.extension = usedDependencies.extension;\n\t\tJanus.extension.init();\n\n\t\t// Helper method to enumerate devices\n\t\tJanus.listDevices = function(callback, config) {\n\t\t\tcallback = (typeof callback == \"function\") ? callback : Janus.noop;\n\t\t\tif (config == null) config = { audio: true, video: true };\n\t\t\tif(Janus.isGetUserMediaAvailable()) {\n\t\t\t\tnavigator.mediaDevices.getUserMedia(config)\n\t\t\t\t.then(function(stream) {\n\t\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(function(devices) {\n\t\t\t\t\t\tJanus.debug(devices);\n\t\t\t\t\t\tcallback(devices);\n\t\t\t\t\t\t// Get rid of the now useless stream\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar tracks = stream.getTracks();\n\t\t\t\t\t\t\tfor(var mst of tracks) {\n\t\t\t\t\t\t\t\tif(mst)\n\t\t\t\t\t\t\t\t\tmst.stop();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch(e) {}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function(err) {\n\t\t\t\t\tJanus.error(err);\n\t\t\t\t\tcallback([]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tJanus.warn(\"navigator.mediaDevices unavailable\");\n\t\t\t\tcallback([]);\n\t\t\t}\n\t\t};\n\t\t// Helper methods to attach/reattach a stream to a video element (previously part of adapter.js)\n\t\tJanus.attachMediaStream = function(element, stream) {\n\t\t\ttry {\n\t\t\t\telement.srcObject = stream;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\telement.src = URL.createObjectURL(stream);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tJanus.error(\"Error attaching stream to element\");\n\t\t\t\t\tconsole.log(\"Error attaching stream to element\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tJanus.reattachMediaStream = function(to, from) {\n\t\t\ttry {\n\t\t\t\tto.srcObject = from.srcObject;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\tto.src = from.src;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tJanus.error(\"Error reattaching stream to element\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// Detect tab close: make sure we don't loose existing onbeforeunload handlers\n\t\t// (note: for iOS we need to subscribe to a different event, 'pagehide', see\n\t\t// https://gist.github.com/thehunmonkgroup/6bee8941a49b86be31a787fe8f4b8cfe)\n\t\tvar iOS = ['iPad', 'iPhone', 'iPod'].indexOf(navigator.platform) >= 0;\n\t\tvar eventName = iOS ? 'pagehide' : 'beforeunload';\n\t\tvar oldOBF = window[\"on\" + eventName];\n\t\twindow.addEventListener(eventName, function(event) {\n\t\t\tJanus.log(\"Closing window\");\n\t\t\tfor(var s in Janus.sessions) {\n\t\t\t\tif(Janus.sessions[s] && Janus.sessions[s].destroyOnUnload) {\n\t\t\t\t\tJanus.log(\"Destroying session \" + s);\n\t\t\t\t\tJanus.sessions[s].destroy({unload: true, notifyDestroyed: false});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(oldOBF && typeof oldOBF == \"function\") {\n\t\t\t\toldOBF();\n\t\t\t}\n\t\t});\n\t\t// If this is a Safari Technology Preview, check if VP8 is supported\n\t\tJanus.safariVp8 = false;\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'safari' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 605) {\n\t\t\t// Let's see if RTCRtpSender.getCapabilities() is there\n\t\t\tif(RTCRtpSender && RTCRtpSender.getCapabilities && RTCRtpSender.getCapabilities(\"video\") &&\n\t\t\t\t\tRTCRtpSender.getCapabilities(\"video\").codecs && RTCRtpSender.getCapabilities(\"video\").codecs.length) {\n\t\t\t\tfor(var codec of RTCRtpSender.getCapabilities(\"video\").codecs) {\n\t\t\t\t\tif(codec && codec.mimeType && codec.mimeType.toLowerCase() === \"video/vp8\") {\n\t\t\t\t\t\tJanus.safariVp8 = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(Janus.safariVp8) {\n\t\t\t\t\tJanus.log(\"This version of Safari supports VP8\");\n\t\t\t\t} else {\n\t\t\t\t\tJanus.warn(\"This version of Safari does NOT support VP8: if you're using a Technology Preview, \" +\n\t\t\t\t\t\t\"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We do it in a very ugly way, as there's no alternative...\n\t\t\t\t// We create a PeerConnection to see if VP8 is in an offer\n\t\t\t\tvar testpc = new RTCPeerConnection({});\n\t\t\t\ttestpc.createOffer({offerToReceiveVideo: true}).then(function(offer) {\n\t\t\t\t\tJanus.safariVp8 = offer.sdp.indexOf(\"VP8\") !== -1;\n\t\t\t\t\tif(Janus.safariVp8) {\n\t\t\t\t\t\tJanus.log(\"This version of Safari supports VP8\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.warn(\"This version of Safari does NOT support VP8: if you're using a Technology Preview, \" +\n\t\t\t\t\t\t\t\"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu\");\n\t\t\t\t\t}\n\t\t\t\t\ttestpc.close();\n\t\t\t\t\ttestpc = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t// Check if this browser supports Unified Plan and transceivers\n\t\t// Based on https://codepen.io/anon/pen/ZqLwWV?editors=0010\n\t\tJanus.unifiedPlan = false;\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'firefox' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 59) {\n\t\t\t// Firefox definitely does, starting from version 59\n\t\t\tJanus.unifiedPlan = true;\n\t\t} else if(Janus.webRTCAdapter.browserDetails.browser === 'chrome' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version < 72) {\n\t\t\t// Chrome does, but it's only usable from version 72 on\n\t\t\tJanus.unifiedPlan = false;\n\t\t} else if(!window.RTCRtpTransceiver || !('currentDirection' in RTCRtpTransceiver.prototype)) {\n\t\t\t// Safari supports addTransceiver() but not Unified Plan when\n\t\t\t// currentDirection is not defined (see codepen above).\n\t\t\tJanus.unifiedPlan = false;\n\t\t} else {\n\t\t\t// Check if addTransceiver() throws an exception\n\t\t\tvar tempPc = new RTCPeerConnection();\n\t\t\ttry {\n\t\t\t\ttempPc.addTransceiver('audio');\n\t\t\t\tJanus.unifiedPlan = true;\n\t\t\t} catch (e) {}\n\t\t\ttempPc.close();\n\t\t}\n\t\tJanus.initDone = true;\n\t\toptions.callback();\n\t}\n};\n\n// Helper method to check whether WebRTC is supported by this browser\nJanus.isWebrtcSupported = function() {\n\treturn !!window.RTCPeerConnection;\n};\n// Helper method to check whether devices can be accessed by this browser (e.g., not possible via plain HTTP)\nJanus.isGetUserMediaAvailable = function() {\n\treturn navigator.mediaDevices && navigator.mediaDevices.getUserMedia;\n};\n\n// Helper method to create random identifiers (e.g., transaction)\nJanus.randomString = function(len) {\n\tvar charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\tvar randomString = '';\n\tfor (var i = 0; i < len; i++) {\n\t\tvar randomPoz = Math.floor(Math.random() * charSet.length);\n\t\trandomString += charSet.substring(randomPoz,randomPoz+1);\n\t}\n\treturn randomString;\n};\n\nfunction Janus(gatewayCallbacks) {\n\tgatewayCallbacks = gatewayCallbacks || {};\n\tgatewayCallbacks.success = (typeof gatewayCallbacks.success == \"function\") ? gatewayCallbacks.success : Janus.noop;\n\tgatewayCallbacks.error = (typeof gatewayCallbacks.error == \"function\") ? gatewayCallbacks.error : Janus.noop;\n\tgatewayCallbacks.destroyed = (typeof gatewayCallbacks.destroyed == \"function\") ? gatewayCallbacks.destroyed : Janus.noop;\n\tif(!Janus.initDone) {\n\t\tgatewayCallbacks.error(\"Library not initialized\");\n\t\treturn {};\n\t}\n\tif(!Janus.isWebrtcSupported()) {\n\t\tgatewayCallbacks.error(\"WebRTC not supported by this browser\");\n\t\treturn {};\n\t}\n\tJanus.log(\"Library initialized: \" + Janus.initDone);\n\tif(!gatewayCallbacks.server) {\n\t\tgatewayCallbacks.error(\"Invalid server url\");\n\t\treturn {};\n\t}\n\tvar websockets = false;\n\tvar ws = null;\n\tvar wsHandlers = {};\n\tvar wsKeepaliveTimeoutId = null;\n\tvar servers = null;\n\tvar serversIndex = 0;\n\tvar server = gatewayCallbacks.server;\n\tif(Janus.isArray(server)) {\n\t\tJanus.log(\"Multiple servers provided (\" + server.length + \"), will use the first that works\");\n\t\tserver = null;\n\t\tservers = gatewayCallbacks.server;\n\t\tJanus.debug(servers);\n\t} else {\n\t\tif(server.indexOf(\"ws\") === 0) {\n\t\t\twebsockets = true;\n\t\t\tJanus.log(\"Using WebSockets to contact Janus: \" + server);\n\t\t} else {\n\t\t\twebsockets = false;\n\t\t\tJanus.log(\"Using REST API to contact Janus: \" + server);\n\t\t}\n\t}\n\tvar iceServers = gatewayCallbacks.iceServers || [{urls: \"stun:stun.l.google.com:19302\"}];\n\tvar iceTransportPolicy = gatewayCallbacks.iceTransportPolicy;\n\tvar bundlePolicy = gatewayCallbacks.bundlePolicy;\n\t// Whether IPv6 candidates should be gathered\n\tvar ipv6Support = (gatewayCallbacks.ipv6 === true);\n\t// Whether we should enable the withCredentials flag for XHR requests\n\tvar withCredentials = false;\n\tif(gatewayCallbacks.withCredentials !== undefined && gatewayCallbacks.withCredentials !== null)\n\t\twithCredentials = gatewayCallbacks.withCredentials === true;\n\t// Optional max events\n\tvar maxev = 10;\n\tif(gatewayCallbacks.max_poll_events !== undefined && gatewayCallbacks.max_poll_events !== null)\n\t\tmaxev = gatewayCallbacks.max_poll_events;\n\tif(maxev < 1)\n\t\tmaxev = 1;\n\t// Token to use (only if the token based authentication mechanism is enabled)\n\tvar token = null;\n\tif(gatewayCallbacks.token !== undefined && gatewayCallbacks.token !== null)\n\t\ttoken = gatewayCallbacks.token;\n\t// API secret to use (only if the shared API secret is enabled)\n\tvar apisecret = null;\n\tif(gatewayCallbacks.apisecret !== undefined && gatewayCallbacks.apisecret !== null)\n\t\tapisecret = gatewayCallbacks.apisecret;\n\t// Whether we should destroy this session when onbeforeunload is called\n\tthis.destroyOnUnload = true;\n\tif(gatewayCallbacks.destroyOnUnload !== undefined && gatewayCallbacks.destroyOnUnload !== null)\n\t\tthis.destroyOnUnload = (gatewayCallbacks.destroyOnUnload === true);\n\t// Some timeout-related values\n\tvar keepAlivePeriod = 25000;\n\tif(gatewayCallbacks.keepAlivePeriod !== undefined && gatewayCallbacks.keepAlivePeriod !== null)\n\t\tkeepAlivePeriod = gatewayCallbacks.keepAlivePeriod;\n\tif(isNaN(keepAlivePeriod))\n\t\tkeepAlivePeriod = 25000;\n\tvar longPollTimeout = 60000;\n\tif(gatewayCallbacks.longPollTimeout !== undefined && gatewayCallbacks.longPollTimeout !== null)\n\t\tlongPollTimeout = gatewayCallbacks.longPollTimeout;\n\tif(isNaN(longPollTimeout))\n\t\tlongPollTimeout = 60000;\n\n\t// overrides for default maxBitrate values for simulcasting\n\tfunction getMaxBitrates(simulcastMaxBitrates) {\n\t\tvar maxBitrates = {\n\t\t\thigh: 900000,\n\t\t\tmedium: 300000,\n\t\t\tlow: 100000,\n\t\t};\n\n\t\tif (simulcastMaxBitrates !== undefined && simulcastMaxBitrates !== null) {\n\t\t\tif (simulcastMaxBitrates.high)\n\t\t\t\tmaxBitrates.high = simulcastMaxBitrates.high;\n\t\t\tif (simulcastMaxBitrates.medium)\n\t\t\t\tmaxBitrates.medium = simulcastMaxBitrates.medium;\n\t\t\tif (simulcastMaxBitrates.low)\n\t\t\t\tmaxBitrates.low = simulcastMaxBitrates.low;\n\t\t}\n\n\t\treturn maxBitrates;\n\t}\n\n\tvar connected = false;\n\tvar sessionId = null;\n\tvar pluginHandles = {};\n\tvar that = this;\n\tvar retries = 0;\n\tvar transactions = {};\n\tcreateSession(gatewayCallbacks);\n\n\t// Public methods\n\tthis.getServer = function() { return server; };\n\tthis.isConnected = function() { return connected; };\n\tthis.reconnect = function(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks[\"reconnect\"] = true;\n\t\tcreateSession(callbacks);\n\t};\n\tthis.getSessionId = function() { return sessionId; };\n\tthis.destroy = function(callbacks) { destroySession(callbacks); };\n\tthis.attach = function(callbacks) { createHandle(callbacks); };\n\n\tfunction eventHandler() {\n\t\tif(sessionId == null)\n\t\t\treturn;\n\t\tJanus.debug('Long poll...');\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar longpoll = server + \"/\" + sessionId + \"?rid=\" + new Date().getTime();\n\t\tif(maxev)\n\t\t\tlongpoll = longpoll + \"&maxev=\" + maxev;\n\t\tif(token)\n\t\t\tlongpoll = longpoll + \"&token=\" + encodeURIComponent(token);\n\t\tif(apisecret)\n\t\t\tlongpoll = longpoll + \"&apisecret=\" + encodeURIComponent(apisecret);\n\t\tJanus.httpAPICall(longpoll, {\n\t\t\tverb: 'GET',\n\t\t\twithCredentials: withCredentials,\n\t\t\tsuccess: handleEvent,\n\t\t\ttimeout: longPollTimeout,\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\n\t\t\t\tretries++;\n\t\t\t\tif(retries > 3) {\n\t\t\t\t\t// Did we just lose the server? :-(\n\t\t\t\t\tconnected = false;\n\t\t\t\t\tgatewayCallbacks.error(\"Lost connection to the server (is it down?)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teventHandler();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private event handler: this will trigger plugin callbacks, if set\n\tfunction handleEvent(json, skipTimeout) {\n\t\tretries = 0;\n\t\tif(!websockets && sessionId !== undefined && sessionId !== null && skipTimeout !== true)\n\t\t\teventHandler();\n\t\tif(!websockets && Janus.isArray(json)) {\n\t\t\t// We got an array: it means we passed a maxev > 1, iterate on all objects\n\t\t\tfor(var i=0; i<json.length; i++) {\n\t\t\t\thandleEvent(json[i], true);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(json[\"janus\"] === \"keepalive\") {\n\t\t\t// Nothing happened\n\t\t\tJanus.vdebug(\"Got a keepalive on session \" + sessionId);\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"ack\") {\n\t\t\t// Just an ack, we can probably ignore\n\t\t\tJanus.debug(\"Got an ack on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"success\") {\n\t\t\t// Success!\n\t\t\tJanus.debug(\"Got a success on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"trickle\") {\n\t\t\t// We got a trickle candidate from Janus\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar candidate = json[\"candidate\"];\n\t\t\tJanus.debug(\"Got a trickled candidate on session \" + sessionId);\n\t\t\tJanus.debug(candidate);\n\t\t\tvar config = pluginHandle.webrtcStuff;\n\t\t\tif(config.pc && config.remoteSdp) {\n\t\t\t\t// Add candidate right now\n\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t// end-of-candidates\n\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t} else {\n\t\t\t\t\t// New candidate\n\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We didn't do setRemoteDescription (trickle got here before the offer?)\n\t\t\t\tJanus.debug(\"We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate\");\n\t\t\t\tif(!config.candidates)\n\t\t\t\t\tconfig.candidates = [];\n\t\t\t\tconfig.candidates.push(candidate);\n\t\t\t\tJanus.debug(config.candidates);\n\t\t\t}\n\t\t} else if(json[\"janus\"] === \"webrtcup\") {\n\t\t\t// The PeerConnection with the server is up! Notify this\n\t\t\tJanus.debug(\"Got a webrtcup event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.webrtcState(true);\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"hangup\") {\n\t\t\t// A plugin asked the core to hangup a PeerConnection on one of our handles\n\t\t\tJanus.debug(\"Got a hangup event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.webrtcState(false, json[\"reason\"]);\n\t\t\tpluginHandle.hangup();\n\t\t} else if(json[\"janus\"] === \"detached\") {\n\t\t\t// A plugin asked the core to detach one of our handles\n\t\t\tJanus.debug(\"Got a detached event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\t// Don't warn here because destroyHandle causes this situation.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.detached = true;\n\t\t\tpluginHandle.ondetached();\n\t\t\tpluginHandle.detach();\n\t\t} else if(json[\"janus\"] === \"media\") {\n\t\t\t// Media started/stopped flowing\n\t\t\tJanus.debug(\"Got a media event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.mediaState(json[\"type\"], json[\"receiving\"]);\n\t\t} else if(json[\"janus\"] === \"slowlink\") {\n\t\t\tJanus.debug(\"Got a slowlink event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\t// Trouble uplink or downlink\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.slowLink(json[\"uplink\"], json[\"lost\"]);\n\t\t} else if(json[\"janus\"] === \"error\") {\n\t\t\t// Oops, something wrong happened\n\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess) {\n\t\t\t\t\treportSuccess(json);\n\t\t\t\t}\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"event\") {\n\t\t\tJanus.debug(\"Got a plugin event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\tif(!plugindata) {\n\t\t\t\tJanus.warn(\"Missing plugindata...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tJanus.debug(\"  -- Event is coming from \" + sender + \" (\" + plugindata[\"plugin\"] + \")\");\n\t\t\tvar data = plugindata[\"data\"];\n\t\t\tJanus.debug(data);\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.warn(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar jsep = json[\"jsep\"];\n\t\t\tif(jsep) {\n\t\t\t\tJanus.debug(\"Handling SDP as well...\");\n\t\t\t\tJanus.debug(jsep);\n\t\t\t}\n\t\t\tvar callback = pluginHandle.onmessage;\n\t\t\tif(callback) {\n\t\t\t\tJanus.debug(\"Notifying application...\");\n\t\t\t\t// Send to callback specified when attaching plugin handle\n\t\t\t\tcallback(data, jsep);\n\t\t\t} else {\n\t\t\t\t// Send to generic callback (?)\n\t\t\t\tJanus.debug(\"No provided notification callback\");\n\t\t\t}\n\t\t} else if(json[\"janus\"] === \"timeout\") {\n\t\t\tJanus.error(\"Timeout on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tif (websockets) {\n\t\t\t\tws.close(3504, \"Gateway timeout\");\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tJanus.warn(\"Unknown message/event  '\" + json[\"janus\"] + \"' on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t}\n\t}\n\n\t// Private helper to send keep-alive messages on WebSockets\n\tfunction keepAlive() {\n\t\tif(!server || !websockets || !connected)\n\t\t\treturn;\n\t\twsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);\n\t\tvar request = { \"janus\": \"keepalive\", \"session_id\": sessionId, \"transaction\": Janus.randomString(12) };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tws.send(JSON.stringify(request));\n\t}\n\n\t// Private method to create a session\n\tfunction createSession(callbacks) {\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"create\", \"transaction\": transaction };\n\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t// We're reconnecting, claim the session\n\t\t\tconnected = false;\n\t\t\trequest[\"janus\"] = \"claim\";\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\t// If we were using websockets, ignore the old connection\n\t\t\tif(ws) {\n\t\t\t\tws.onopen = null;\n\t\t\t\tws.onerror = null;\n\t\t\t\tws.onclose = null;\n\t\t\t\tif(wsKeepaliveTimeoutId) {\n\t\t\t\t\tclearTimeout(wsKeepaliveTimeoutId);\n\t\t\t\t\twsKeepaliveTimeoutId = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(!server && Janus.isArray(servers)) {\n\t\t\t// We still need to find a working server from the list we were given\n\t\t\tserver = servers[serversIndex];\n\t\t\tif(server.indexOf(\"ws\") === 0) {\n\t\t\t\twebsockets = true;\n\t\t\t\tJanus.log(\"Server #\" + (serversIndex+1) + \": trying WebSockets to contact Janus (\" + server + \")\");\n\t\t\t} else {\n\t\t\t\twebsockets = false;\n\t\t\t\tJanus.log(\"Server #\" + (serversIndex+1) + \": trying REST API to contact Janus (\" + server + \")\");\n\t\t\t}\n\t\t}\n\t\tif(websockets) {\n\t\t\tws = Janus.newWebSocket(server, 'janus-protocol');\n\t\t\twsHandlers = {\n\t\t\t\t'error': function() {\n\t\t\t\t\tJanus.error(\"Error connecting to the Janus WebSockets server... \" + server);\n\t\t\t\t\tif (Janus.isArray(servers) && !callbacks[\"reconnect\"]) {\n\t\t\t\t\t\tserversIndex++;\n\t\t\t\t\t\tif (serversIndex === servers.length) {\n\t\t\t\t\t\t\t// We tried all the servers the user gave us and they all failed\n\t\t\t\t\t\t\tcallbacks.error(\"Error connecting to any of the provided Janus servers: Is the server down?\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Let's try the next server\n\t\t\t\t\t\tserver = null;\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tcreateSession(callbacks);\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcallbacks.error(\"Error connecting to the Janus WebSockets server: Is the server down?\");\n\t\t\t\t},\n\n\t\t\t\t'open': function() {\n\t\t\t\t\t// We need to be notified about the success\n\t\t\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\t\t\tJanus.debug(json);\n\t\t\t\t\t\tif (json[\"janus\"] !== \"success\") {\n\t\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\t\tcallbacks.error(json[\"error\"].reason);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);\n\t\t\t\t\t\tconnected = true;\n\t\t\t\t\t\tsessionId = json[\"session_id\"] ? json[\"session_id\"] : json.data[\"id\"];\n\t\t\t\t\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t\t\t\t\tJanus.log(\"Claimed session: \" + sessionId);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tJanus.log(\"Created session: \" + sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.sessions[sessionId] = that;\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t};\n\t\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t\t},\n\n\t\t\t\t'message': function(event) {\n\t\t\t\t\thandleEvent(JSON.parse(event.data));\n\t\t\t\t},\n\n\t\t\t\t'close': function() {\n\t\t\t\t\tif (!server || !connected) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconnected = false;\n\t\t\t\t\t// FIXME What if this is called when the page is closed?\n\t\t\t\t\tgatewayCallbacks.error(\"Lost connection to the server (is it down?)\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor(var eventName in wsHandlers) {\n\t\t\t\tws.addEventListener(eventName, wsHandlers[eventName]);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconnected = true;\n\t\t\t\tsessionId = json[\"session_id\"] ? json[\"session_id\"] : json.data[\"id\"];\n\t\t\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t\t\tJanus.log(\"Claimed session: \" + sessionId);\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log(\"Created session: \" + sessionId);\n\t\t\t\t}\n\t\t\t\tJanus.sessions[sessionId] = that;\n\t\t\t\teventHandler();\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(Janus.isArray(servers) && !callbacks[\"reconnect\"]) {\n\t\t\t\t\tserversIndex++;\n\t\t\t\t\tif(serversIndex === servers.length) {\n\t\t\t\t\t\t// We tried all the servers the user gave us and they all failed\n\t\t\t\t\t\tcallbacks.error(\"Error connecting to any of the provided Janus servers: Is the server down?\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// Let's try the next server\n\t\t\t\t\tserver = null;\n\t\t\t\t\tsetTimeout(function() { createSession(callbacks); }, 200);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to destroy a session\n\tfunction destroySession(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\t// FIXME This method triggers a success even when we fail\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar unload = (callbacks.unload === true);\n\t\tvar notifyDestroyed = true;\n\t\tif(callbacks.notifyDestroyed !== undefined && callbacks.notifyDestroyed !== null)\n\t\t\tnotifyDestroyed = (callbacks.notifyDestroyed === true);\n\t\tvar cleanupHandles = (callbacks.cleanupHandles === true);\n\t\tJanus.log(\"Destroying session \" + sessionId + \" (unload=\" + unload + \")\");\n\t\tif(!sessionId) {\n\t\t\tJanus.warn(\"No session to destroy\");\n\t\t\tcallbacks.success();\n\t\t\tif(notifyDestroyed)\n\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\treturn;\n\t\t}\n\t\tif(cleanupHandles) {\n\t\t\tfor(var handleId in pluginHandles)\n\t\t\t\tdestroyHandle(handleId, { noRequest: true });\n\t\t}\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tsessionId = null;\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\t// No need to destroy all handles first, Janus will do that itself\n\t\tvar request = { \"janus\": \"destroy\", \"transaction\": Janus.randomString(12) };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(unload) {\n\t\t\t// We're unloading the page: use sendBeacon for HTTP instead,\n\t\t\t// or just close the WebSocket connection if we're using that\n\t\t\tif(websockets) {\n\t\t\t\tws.onclose = null;\n\t\t\t\tws.close();\n\t\t\t\tws = null;\n\t\t\t} else {\n\t\t\t\tnavigator.sendBeacon(server + \"/\" + sessionId, JSON.stringify(request));\n\t\t\t}\n\t\t\tJanus.log(\"Destroyed session:\");\n\t\t\tsessionId = null;\n\t\t\tconnected = false;\n\t\t\tcallbacks.success();\n\t\t\tif(notifyDestroyed)\n\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\treturn;\n\t\t}\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\n\t\t\tvar unbindWebSocket = function() {\n\t\t\t\tfor(var eventName in wsHandlers) {\n\t\t\t\t\tws.removeEventListener(eventName, wsHandlers[eventName]);\n\t\t\t\t}\n\t\t\t\tws.removeEventListener('message', onUnbindMessage);\n\t\t\t\tws.removeEventListener('error', onUnbindError);\n\t\t\t\tif(wsKeepaliveTimeoutId) {\n\t\t\t\t\tclearTimeout(wsKeepaliveTimeoutId);\n\t\t\t\t}\n\t\t\t\tws.close();\n\t\t\t};\n\n\t\t\tvar onUnbindMessage = function(event){\n\t\t\t\tvar data = JSON.parse(event.data);\n\t\t\t\tif(data.session_id == request.session_id && data.transaction == request.transaction) {\n\t\t\t\t\tunbindWebSocket();\n\t\t\t\t\tcallbacks.success();\n\t\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onUnbindError = function(event) {\n\t\t\t\tunbindWebSocket();\n\t\t\t\tcallbacks.error(\"Failed to destroy the server: Is the server down?\");\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t};\n\n\t\t\tws.addEventListener('message', onUnbindMessage);\n\t\t\tws.addEventListener('error', onUnbindError);\n\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Destroyed session:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tsessionId = null;\n\t\t\t\tconnected = false;\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tcallbacks.success();\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\t// Reset everything anyway\n\t\t\t\tsessionId = null;\n\t\t\t\tconnected = false;\n\t\t\t\tcallbacks.success();\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to create a plugin handle\n\tfunction createHandle(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.consentDialog = (typeof callbacks.consentDialog == \"function\") ? callbacks.consentDialog : Janus.noop;\n\t\tcallbacks.iceState = (typeof callbacks.iceState == \"function\") ? callbacks.iceState : Janus.noop;\n\t\tcallbacks.mediaState = (typeof callbacks.mediaState == \"function\") ? callbacks.mediaState : Janus.noop;\n\t\tcallbacks.webrtcState = (typeof callbacks.webrtcState == \"function\") ? callbacks.webrtcState : Janus.noop;\n\t\tcallbacks.slowLink = (typeof callbacks.slowLink == \"function\") ? callbacks.slowLink : Janus.noop;\n\t\tcallbacks.onmessage = (typeof callbacks.onmessage == \"function\") ? callbacks.onmessage : Janus.noop;\n\t\tcallbacks.onlocalstream = (typeof callbacks.onlocalstream == \"function\") ? callbacks.onlocalstream : Janus.noop;\n\t\tcallbacks.onremotestream = (typeof callbacks.onremotestream == \"function\") ? callbacks.onremotestream : Janus.noop;\n\t\tcallbacks.ondata = (typeof callbacks.ondata == \"function\") ? callbacks.ondata : Janus.noop;\n\t\tcallbacks.ondataopen = (typeof callbacks.ondataopen == \"function\") ? callbacks.ondataopen : Janus.noop;\n\t\tcallbacks.oncleanup = (typeof callbacks.oncleanup == \"function\") ? callbacks.oncleanup : Janus.noop;\n\t\tcallbacks.ondetached = (typeof callbacks.ondetached == \"function\") ? callbacks.ondetached : Janus.noop;\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar plugin = callbacks.plugin;\n\t\tif(!plugin) {\n\t\t\tJanus.error(\"Invalid plugin\");\n\t\t\tcallbacks.error(\"Invalid plugin\");\n\t\t\treturn;\n\t\t}\n\t\tvar opaqueId = callbacks.opaqueId;\n\t\tvar handleToken = callbacks.token ? callbacks.token : token;\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"attach\", \"plugin\": plugin, \"opaque_id\": opaqueId, \"transaction\": transaction };\n\t\tif(handleToken)\n\t\t\trequest[\"token\"] = handleToken;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar handleId = json.data[\"id\"];\n\t\t\t\tJanus.log(\"Created handle: \" + handleId);\n\t\t\t\tvar pluginHandle =\n\t\t\t\t\t{\n\t\t\t\t\t\tsession : that,\n\t\t\t\t\t\tplugin : plugin,\n\t\t\t\t\t\tid : handleId,\n\t\t\t\t\t\ttoken : handleToken,\n\t\t\t\t\t\tdetached : false,\n\t\t\t\t\t\twebrtcStuff : {\n\t\t\t\t\t\t\tstarted : false,\n\t\t\t\t\t\t\tmyStream : null,\n\t\t\t\t\t\t\tstreamExternal : false,\n\t\t\t\t\t\t\tremoteStream : null,\n\t\t\t\t\t\t\tmySdp : null,\n\t\t\t\t\t\t\tmediaConstraints : null,\n\t\t\t\t\t\t\tpc : null,\n\t\t\t\t\t\t\tdataChannel : {},\n\t\t\t\t\t\t\tdtmfSender : null,\n\t\t\t\t\t\t\ttrickle : true,\n\t\t\t\t\t\t\ticeDone : false,\n\t\t\t\t\t\t\tvolume : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbitrate : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\tbsnow : null,\n\t\t\t\t\t\t\t\tbsbefore : null,\n\t\t\t\t\t\t\t\ttsnow : null,\n\t\t\t\t\t\t\t\ttsbefore : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetId : function() { return handleId; },\n\t\t\t\t\t\tgetPlugin : function() { return plugin; },\n\t\t\t\t\t\tgetVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetRemoteVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetLocalVolume : function() { return getVolume(handleId, false); },\n\t\t\t\t\t\tisAudioMuted : function() { return isMuted(handleId, false); },\n\t\t\t\t\t\tmuteAudio : function() { return mute(handleId, false, true); },\n\t\t\t\t\t\tunmuteAudio : function() { return mute(handleId, false, false); },\n\t\t\t\t\t\tisVideoMuted : function() { return isMuted(handleId, true); },\n\t\t\t\t\t\tmuteVideo : function() { return mute(handleId, true, true); },\n\t\t\t\t\t\tunmuteVideo : function() { return mute(handleId, true, false); },\n\t\t\t\t\t\tgetBitrate : function() { return getBitrate(handleId); },\n\t\t\t\t\t\tsend : function(callbacks) { sendMessage(handleId, callbacks); },\n\t\t\t\t\t\tdata : function(callbacks) { sendData(handleId, callbacks); },\n\t\t\t\t\t\tdtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n\t\t\t\t\t\tconsentDialog : callbacks.consentDialog,\n\t\t\t\t\t\ticeState : callbacks.iceState,\n\t\t\t\t\t\tmediaState : callbacks.mediaState,\n\t\t\t\t\t\twebrtcState : callbacks.webrtcState,\n\t\t\t\t\t\tslowLink : callbacks.slowLink,\n\t\t\t\t\t\tonmessage : callbacks.onmessage,\n\t\t\t\t\t\tcreateOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },\n\t\t\t\t\t\tcreateAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },\n\t\t\t\t\t\thandleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n\t\t\t\t\t\tonlocalstream : callbacks.onlocalstream,\n\t\t\t\t\t\tonremotestream : callbacks.onremotestream,\n\t\t\t\t\t\tondata : callbacks.ondata,\n\t\t\t\t\t\tondataopen : callbacks.ondataopen,\n\t\t\t\t\t\toncleanup : callbacks.oncleanup,\n\t\t\t\t\t\tondetached : callbacks.ondetached,\n\t\t\t\t\t\thangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n\t\t\t\t\t\tdetach : function(callbacks) { destroyHandle(handleId, callbacks); }\n\t\t\t\t\t};\n\t\t\t\tpluginHandles[handleId] = pluginHandle;\n\t\t\t\tcallbacks.success(pluginHandle);\n\t\t\t};\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar handleId = json.data[\"id\"];\n\t\t\t\tJanus.log(\"Created handle: \" + handleId);\n\t\t\t\tvar pluginHandle =\n\t\t\t\t\t{\n\t\t\t\t\t\tsession : that,\n\t\t\t\t\t\tplugin : plugin,\n\t\t\t\t\t\tid : handleId,\n\t\t\t\t\t\ttoken : handleToken,\n\t\t\t\t\t\tdetached : false,\n\t\t\t\t\t\twebrtcStuff : {\n\t\t\t\t\t\t\tstarted : false,\n\t\t\t\t\t\t\tmyStream : null,\n\t\t\t\t\t\t\tstreamExternal : false,\n\t\t\t\t\t\t\tremoteStream : null,\n\t\t\t\t\t\t\tmySdp : null,\n\t\t\t\t\t\t\tmediaConstraints : null,\n\t\t\t\t\t\t\tpc : null,\n\t\t\t\t\t\t\tdataChannel : {},\n\t\t\t\t\t\t\tdtmfSender : null,\n\t\t\t\t\t\t\ttrickle : true,\n\t\t\t\t\t\t\ticeDone : false,\n\t\t\t\t\t\t\tvolume : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbitrate : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\tbsnow : null,\n\t\t\t\t\t\t\t\tbsbefore : null,\n\t\t\t\t\t\t\t\ttsnow : null,\n\t\t\t\t\t\t\t\ttsbefore : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetId : function() { return handleId; },\n\t\t\t\t\t\tgetPlugin : function() { return plugin; },\n\t\t\t\t\t\tgetVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetRemoteVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetLocalVolume : function() { return getVolume(handleId, false); },\n\t\t\t\t\t\tisAudioMuted : function() { return isMuted(handleId, false); },\n\t\t\t\t\t\tmuteAudio : function() { return mute(handleId, false, true); },\n\t\t\t\t\t\tunmuteAudio : function() { return mute(handleId, false, false); },\n\t\t\t\t\t\tisVideoMuted : function() { return isMuted(handleId, true); },\n\t\t\t\t\t\tmuteVideo : function() { return mute(handleId, true, true); },\n\t\t\t\t\t\tunmuteVideo : function() { return mute(handleId, true, false); },\n\t\t\t\t\t\tgetBitrate : function() { return getBitrate(handleId); },\n\t\t\t\t\t\tsend : function(callbacks) { sendMessage(handleId, callbacks); },\n\t\t\t\t\t\tdata : function(callbacks) { sendData(handleId, callbacks); },\n\t\t\t\t\t\tdtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n\t\t\t\t\t\tconsentDialog : callbacks.consentDialog,\n\t\t\t\t\t\ticeState : callbacks.iceState,\n\t\t\t\t\t\tmediaState : callbacks.mediaState,\n\t\t\t\t\t\twebrtcState : callbacks.webrtcState,\n\t\t\t\t\t\tslowLink : callbacks.slowLink,\n\t\t\t\t\t\tonmessage : callbacks.onmessage,\n\t\t\t\t\t\tcreateOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },\n\t\t\t\t\t\tcreateAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },\n\t\t\t\t\t\thandleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n\t\t\t\t\t\tonlocalstream : callbacks.onlocalstream,\n\t\t\t\t\t\tonremotestream : callbacks.onremotestream,\n\t\t\t\t\t\tondata : callbacks.ondata,\n\t\t\t\t\t\tondataopen : callbacks.ondataopen,\n\t\t\t\t\t\toncleanup : callbacks.oncleanup,\n\t\t\t\t\t\tondetached : callbacks.ondetached,\n\t\t\t\t\t\thangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n\t\t\t\t\t\tdetach : function(callbacks) { destroyHandle(handleId, callbacks); }\n\t\t\t\t\t}\n\t\t\t\tpluginHandles[handleId] = pluginHandle;\n\t\t\t\tcallbacks.success(pluginHandle);\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to send a message\n\tfunction sendMessage(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar message = callbacks.message;\n\t\tvar jsep = callbacks.jsep;\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"message\", \"body\": message, \"transaction\": transaction };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(jsep) {\n\t\t\trequest.jsep = {\n\t\t\t\ttype: jsep.type,\n\t\t\t\tsdp: jsep.sdp\n\t\t\t};\n\t\t\tif(jsep.e2ee)\n\t\t\t\trequest.jsep.e2ee = true;\n\t\t}\n\t\tJanus.debug(\"Sending message to plugin (handle=\" + handleId + \"):\");\n\t\tJanus.debug(request);\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.debug(\"Message sent!\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] === \"success\") {\n\t\t\t\t\t// We got a success, must have been a synchronous transaction\n\t\t\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\t\t\tif(!plugindata) {\n\t\t\t\t\t\tJanus.warn(\"Request succeeded, but missing plugindata...\");\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n\t\t\t\t\tvar data = plugindata[\"data\"];\n\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\tcallbacks.success(data);\n\t\t\t\t\treturn;\n\t\t\t\t} else if(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\t// Not a success and not an ack, must be an error\n\t\t\t\t\tif(json[\"error\"]) {\n\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\tcallbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.error(\"Unknown error\");\t// FIXME\n\t\t\t\t\t\tcallbacks.error(\"Unknown error\");\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If we got here, the plugin decided to handle the request asynchronously\n\t\t\t\tcallbacks.success();\n\t\t\t};\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(\"Message sent!\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] === \"success\") {\n\t\t\t\t\t// We got a success, must have been a synchronous transaction\n\t\t\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\t\t\tif(!plugindata) {\n\t\t\t\t\t\tJanus.warn(\"Request succeeded, but missing plugindata...\");\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n\t\t\t\t\tvar data = plugindata[\"data\"];\n\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\tcallbacks.success(data);\n\t\t\t\t\treturn;\n\t\t\t\t} else if(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\t// Not a success and not an ack, must be an error\n\t\t\t\t\tif(json[\"error\"]) {\n\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\tcallbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.error(\"Unknown error\");\t// FIXME\n\t\t\t\t\t\tcallbacks.error(\"Unknown error\");\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If we got here, the plugin decided to handle the request asynchronously\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to send a trickle candidate\n\tfunction sendTrickleCandidate(handleId, candidate) {\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar request = { \"janus\": \"trickle\", \"candidate\": candidate, \"transaction\": Janus.randomString(12) };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tJanus.vdebug(\"Sending trickle candidate (handle=\" + handleId + \"):\");\n\t\tJanus.vdebug(request);\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.vdebug(\"Candidate sent!\");\n\t\t\t\tJanus.vdebug(json);\n\t\t\t\tif(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to create a data channel\n\tfunction createDataChannel(handleId, dclabel, dcprotocol, incoming, pendingData) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar onDataChannelMessage = function(event) {\n\t\t\tJanus.log('Received message on data channel:', event);\n\t\t\tvar label = event.target.label;\n\t\t\tpluginHandle.ondata(event.data, label);\n\t\t};\n\t\tvar onDataChannelStateChange = function(event) {\n\t\t\tJanus.log('Received state change on data channel:', event);\n\t\t\tvar label = event.target.label;\n\t\t\tvar protocol = event.target.protocol;\n\t\t\tvar dcState = config.dataChannel[label] ? config.dataChannel[label].readyState : \"null\";\n\t\t\tJanus.log('State change on <' + label + '> data channel: ' + dcState);\n\t\t\tif(dcState === 'open') {\n\t\t\t\t// Any pending messages to send?\n\t\t\t\tif(config.dataChannel[label].pending && config.dataChannel[label].pending.length > 0) {\n\t\t\t\t\tJanus.log(\"Sending pending messages on <\" + label + \">:\", config.dataChannel[label].pending.length);\n\t\t\t\t\tfor(var data of config.dataChannel[label].pending) {\n\t\t\t\t\t\tJanus.log(\"Sending data on data channel <\" + label + \">\");\n\t\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\t\tconfig.dataChannel[label].send(data);\n\t\t\t\t\t}\n\t\t\t\t\tconfig.dataChannel[label].pending = [];\n\t\t\t\t}\n\t\t\t\t// Notify the open data channel\n\t\t\t\tpluginHandle.ondataopen(label, protocol);\n\t\t\t}\n\t\t};\n\t\tvar onDataChannelError = function(error) {\n\t\t\tJanus.error('Got error on data channel:', error);\n\t\t\t// TODO\n\t\t};\n\t\tif(!incoming) {\n\t\t\t// FIXME Add options (ordered, maxRetransmits, etc.)\n\t\t\tvar dcoptions = { ordered: true };\n\t\t\tif(dcprotocol)\n\t\t\t\tdcoptions.protocol = dcprotocol;\n\t\t\tconfig.dataChannel[dclabel] = config.pc.createDataChannel(dclabel, dcoptions);\n\t\t} else {\n\t\t\t// The channel was created by Janus\n\t\t\tconfig.dataChannel[dclabel] = incoming;\n\t\t}\n\t\tconfig.dataChannel[dclabel].onmessage = onDataChannelMessage;\n\t\tconfig.dataChannel[dclabel].onopen = onDataChannelStateChange;\n\t\tconfig.dataChannel[dclabel].onclose = onDataChannelStateChange;\n\t\tconfig.dataChannel[dclabel].onerror = onDataChannelError;\n\t\tconfig.dataChannel[dclabel].pending = [];\n\t\tif(pendingData)\n\t\t\tconfig.dataChannel[dclabel].pending.push(pendingData);\n\t}\n\n\t// Private method to send a data channel message\n\tfunction sendData(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar data = callbacks.text || callbacks.data;\n\t\tif(!data) {\n\t\t\tJanus.warn(\"Invalid data\");\n\t\t\tcallbacks.error(\"Invalid data\");\n\t\t\treturn;\n\t\t}\n\t\tvar label = callbacks.label ? callbacks.label : Janus.dataChanDefaultLabel;\n\t\tif(!config.dataChannel[label]) {\n\t\t\t// Create new data channel and wait for it to open\n\t\t\tcreateDataChannel(handleId, label, callbacks.protocol, false, data, callbacks.protocol);\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(config.dataChannel[label].readyState !== \"open\") {\n\t\t\tconfig.dataChannel[label].pending.push(data);\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tJanus.log(\"Sending data on data channel <\" + label + \">\");\n\t\tJanus.debug(data);\n\t\tconfig.dataChannel[label].send(data);\n\t\tcallbacks.success();\n\t}\n\n\t// Private method to send a DTMF tone\n\tfunction sendDtmf(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.dtmfSender) {\n\t\t\t// Create the DTMF sender the proper way, if possible\n\t\t\tif(config.pc) {\n\t\t\t\tvar senders = config.pc.getSenders();\n\t\t\t\tvar audioSender = senders.find(function(sender) {\n\t\t\t\t\treturn sender.track && sender.track.kind === 'audio';\n\t\t\t\t});\n\t\t\t\tif(!audioSender) {\n\t\t\t\t\tJanus.warn(\"Invalid DTMF configuration (no audio track)\");\n\t\t\t\t\tcallbacks.error(\"Invalid DTMF configuration (no audio track)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconfig.dtmfSender = audioSender.dtmf;\n\t\t\t\tif(config.dtmfSender) {\n\t\t\t\t\tJanus.log(\"Created DTMF Sender\");\n\t\t\t\t\tconfig.dtmfSender.ontonechange = function(tone) { Janus.debug(\"Sent DTMF tone: \" + tone.tone); };\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!config.dtmfSender) {\n\t\t\t\tJanus.warn(\"Invalid DTMF configuration\");\n\t\t\t\tcallbacks.error(\"Invalid DTMF configuration\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tvar dtmf = callbacks.dtmf;\n\t\tif(!dtmf) {\n\t\t\tJanus.warn(\"Invalid DTMF parameters\");\n\t\t\tcallbacks.error(\"Invalid DTMF parameters\");\n\t\t\treturn;\n\t\t}\n\t\tvar tones = dtmf.tones;\n\t\tif(!tones) {\n\t\t\tJanus.warn(\"Invalid DTMF string\");\n\t\t\tcallbacks.error(\"Invalid DTMF string\");\n\t\t\treturn;\n\t\t}\n\t\tvar duration = (typeof dtmf.duration === 'number') ? dtmf.duration : 500; // We choose 500ms as the default duration for a tone\n\t\tvar gap = (typeof dtmf.gap === 'number') ? dtmf.gap : 50; // We choose 50ms as the default gap between tones\n\t\tJanus.debug(\"Sending DTMF string \" + tones + \" (duration \" + duration + \"ms, gap \" + gap + \"ms)\");\n\t\tconfig.dtmfSender.insertDTMF(tones, duration, gap);\n\t\tcallbacks.success();\n\t}\n\n\t// Private method to destroy a plugin handle\n\tfunction destroyHandle(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar noRequest = (callbacks.noRequest === true);\n\t\tJanus.log(\"Destroying handle \" + handleId + \" (only-locally=\" + noRequest + \")\");\n\t\tcleanupWebrtc(handleId);\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || pluginHandle.detached) {\n\t\t\t// Plugin was already detached by Janus, calling detach again will return a handle not found error, so just exit here\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(noRequest) {\n\t\t\t// We're only removing the handle locally\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar request = { \"janus\": \"detach\", \"transaction\": Janus.randomString(12) };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Destroyed handle:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tdelete pluginHandles[handleId];\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\t// We cleanup anyway\n\t\t\t\tdelete pluginHandles[handleId];\n\t\t\t\tcallbacks.success();\n\t\t\t}\n\t\t});\n\t}\n\n\t// WebRTC stuff\n\tfunction streamsDone(handleId, jsep, media, callbacks, stream) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tJanus.debug(\"streamsDone:\", stream);\n\t\tif(stream) {\n\t\t\tJanus.debug(\"  -- Audio tracks:\", stream.getAudioTracks());\n\t\t\tJanus.debug(\"  -- Video tracks:\", stream.getVideoTracks());\n\t\t}\n\t\t// We're now capturing the new stream: check if we're updating or if it's a new thing\n\t\tvar addTracks = false;\n\t\tif(!config.myStream || !media.update || config.streamExternal) {\n\t\t\tconfig.myStream = stream;\n\t\t\taddTracks = true;\n\t\t} else {\n\t\t\t// We only need to update the existing stream\n\t\t\tif(((!media.update && isAudioSendEnabled(media)) || (media.update && (media.addAudio || media.replaceAudio))) &&\n\t\t\t\t\tstream.getAudioTracks() && stream.getAudioTracks().length) {\n\t\t\t\tconfig.myStream.addTrack(stream.getAudioTracks()[0]);\n\t\t\t\tif(Janus.unifiedPlan) {\n\t\t\t\t\t// Use Transceivers\n\t\t\t\t\tJanus.log((media.replaceAudio ? \"Replacing\" : \"Adding\") + \" audio track:\", stream.getAudioTracks()[0]);\n\t\t\t\t\tvar audioTransceiver = null;\n\t\t\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(audioTransceiver && audioTransceiver.sender) {\n\t\t\t\t\t\taudioTransceiver.sender.replaceTrack(stream.getAudioTracks()[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.pc.addTrack(stream.getAudioTracks()[0], stream);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log((media.replaceAudio ? \"Replacing\" : \"Adding\") + \" audio track:\", stream.getAudioTracks()[0]);\n\t\t\t\t\tconfig.pc.addTrack(stream.getAudioTracks()[0], stream);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(((!media.update && isVideoSendEnabled(media)) || (media.update && (media.addVideo || media.replaceVideo))) &&\n\t\t\t\t\tstream.getVideoTracks() && stream.getVideoTracks().length) {\n\t\t\t\tconfig.myStream.addTrack(stream.getVideoTracks()[0]);\n\t\t\t\tif(Janus.unifiedPlan) {\n\t\t\t\t\t// Use Transceivers\n\t\t\t\t\tJanus.log((media.replaceVideo ? \"Replacing\" : \"Adding\") + \" video track:\", stream.getVideoTracks()[0]);\n\t\t\t\t\tvar videoTransceiver = null;\n\t\t\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(videoTransceiver && videoTransceiver.sender) {\n\t\t\t\t\t\tvideoTransceiver.sender.replaceTrack(stream.getVideoTracks()[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.pc.addTrack(stream.getVideoTracks()[0], stream);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log((media.replaceVideo ? \"Replacing\" : \"Adding\") + \" video track:\", stream.getVideoTracks()[0]);\n\t\t\t\t\tconfig.pc.addTrack(stream.getVideoTracks()[0], stream);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// If we still need to create a PeerConnection, let's do that\n\t\tif(!config.pc) {\n\t\t\tvar pc_config = {\"iceServers\": iceServers, \"iceTransportPolicy\": iceTransportPolicy, \"bundlePolicy\": bundlePolicy};\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\") {\n\t\t\t\t// For Chrome versions before 72, we force a plan-b semantic, and unified-plan otherwise\n\t\t\t\tpc_config[\"sdpSemantics\"] = (Janus.webRTCAdapter.browserDetails.version < 72) ? \"plan-b\" : \"unified-plan\";\n\t\t\t}\n\t\t\tvar pc_constraints = {\n\t\t\t\t\"optional\": [{\"DtlsSrtpKeyAgreement\": true}]\n\t\t\t};\n\t\t\tif(ipv6Support) {\n\t\t\t\tpc_constraints.optional.push({\"googIPv6\":true});\n\t\t\t}\n\t\t\t// Any custom constraint to add?\n\t\t\tif(callbacks.rtcConstraints && typeof callbacks.rtcConstraints === 'object') {\n\t\t\t\tJanus.debug(\"Adding custom PeerConnection constraints:\", callbacks.rtcConstraints);\n\t\t\t\tfor(var i in callbacks.rtcConstraints) {\n\t\t\t\t\tpc_constraints.optional.push(callbacks.rtcConstraints[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\t\t// This is Edge, enable BUNDLE explicitly\n\t\t\t\tpc_config.bundlePolicy = \"max-bundle\";\n\t\t\t}\n\t\t\t// Check if a sender or receiver transform has been provided\n\t\t\tif(RTCRtpSender.prototype.createEncodedAudioStreams &&\n\t\t\t\t\tRTCRtpSender.prototype.createEncodedVideoStreams &&\n\t\t\t\t\t(callbacks.senderTransforms || callbacks.receiverTransforms)) {\n\t\t\t\tconfig.senderTransforms = callbacks.senderTransforms;\n\t\t\t\tconfig.receiverTransforms = callbacks.receiverTransforms;\n\t\t\t\tpc_config[\"forceEncodedAudioInsertableStreams\"] = true;\n\t\t\t\tpc_config[\"forceEncodedVideoInsertableStreams\"] = true;\n\t\t\t\tpc_config[\"encodedInsertableStreams\"] = true;\n\t\t\t}\n\t\t\tJanus.log(\"Creating PeerConnection\");\n\t\t\tJanus.debug(pc_constraints);\n\t\t\tconfig.pc = new RTCPeerConnection(pc_config, pc_constraints);\n\t\t\tJanus.debug(config.pc);\n\t\t\tif(config.pc.getStats) {\t// FIXME\n\t\t\t\tconfig.volume = {};\n\t\t\t\tconfig.bitrate.value = \"0 kbits/sec\";\n\t\t\t}\n\t\t\tJanus.log(\"Preparing local SDP and gathering candidates (trickle=\" + config.trickle + \")\");\n\t\t\tconfig.pc.oniceconnectionstatechange = function(e) {\n\t\t\t\tif(config.pc)\n\t\t\t\t\tpluginHandle.iceState(config.pc.iceConnectionState);\n\t\t\t};\n\t\t\tconfig.pc.onicecandidate = function(event) {\n\t\t\t\tif (!event.candidate ||\n\t\t\t\t\t\t(Janus.webRTCAdapter.browserDetails.browser === 'edge' && event.candidate.candidate.indexOf('endOfCandidates') > 0)) {\n\t\t\t\t\tJanus.log(\"End of candidates.\");\n\t\t\t\t\tconfig.iceDone = true;\n\t\t\t\t\tif(config.trickle === true) {\n\t\t\t\t\t\t// Notify end of candidates\n\t\t\t\t\t\tsendTrickleCandidate(handleId, {\"completed\": true});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No trickle, time to send the complete SDP (including all candidates)\n\t\t\t\t\t\tsendSDP(handleId, callbacks);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\t\tvar candidate = {\n\t\t\t\t\t\t\"candidate\": event.candidate.candidate,\n\t\t\t\t\t\t\"sdpMid\": event.candidate.sdpMid,\n\t\t\t\t\t\t\"sdpMLineIndex\": event.candidate.sdpMLineIndex\n\t\t\t\t\t};\n\t\t\t\t\tif(config.trickle === true) {\n\t\t\t\t\t\t// Send candidate\n\t\t\t\t\t\tsendTrickleCandidate(handleId, candidate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconfig.pc.ontrack = function(event) {\n\t\t\t\tJanus.log(\"Handling Remote Track\");\n\t\t\t\tJanus.debug(event);\n\t\t\t\tif(!event.streams)\n\t\t\t\t\treturn;\n\t\t\t\tconfig.remoteStream = event.streams[0];\n\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\tif(event.track.onended)\n\t\t\t\t\treturn;\n\t\t\t\tif(config.receiverTransforms) {\n\t\t\t\t\tvar receiverStreams = null;\n\t\t\t\t\tif(event.track.kind === \"audio\" && config.receiverTransforms[\"audio\"]) {\n\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedAudioStreams();\n\t\t\t\t\t} else if(event.track.kind === \"video\" && config.receiverTransforms[\"video\"]) {\n\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedVideoStreams();\n\t\t\t\t\t}\n\t\t\t\t\tif(receiverStreams) {\n\t\t\t\t\t\treceiverStreams.readableStream\n\t\t\t\t\t\t\t.pipeThrough(config.receiverTransforms[event.track.kind])\n\t\t\t\t\t\t\t.pipeTo(receiverStreams.writableStream);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar trackMutedTimeoutId = null;\n\t\t\t\tJanus.log(\"Adding onended callback to track:\", event.track);\n\t\t\t\tevent.track.onended = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track removed:\", ev);\n\t\t\t\t\tif(config.remoteStream) {\n\t\t\t\t\t\tclearTimeout(trackMutedTimeoutId);\n\t\t\t\t\t\tconfig.remoteStream.removeTrack(ev.target);\n\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tevent.track.onmute = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track muted:\", ev);\n\t\t\t\t\tif(config.remoteStream && trackMutedTimeoutId == null) {\n\t\t\t\t\t\ttrackMutedTimeoutId = setTimeout(function() {\n\t\t\t\t\t\t\tJanus.log(\"Removing remote track\");\n\t\t\t\t\t\t\tconfig.remoteStream.removeTrack(ev.target);\n\t\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t\t\ttrackMutedTimeoutId = null;\n\t\t\t\t\t\t// Chrome seems to raise mute events only at multiples of 834ms;\n\t\t\t\t\t\t// we set the timeout to three times this value (rounded to 840ms)\n\t\t\t\t\t\t}, 3 * 840);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tevent.track.onunmute = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track flowing again:\", ev);\n\t\t\t\t\tif(trackMutedTimeoutId != null) {\n\t\t\t\t\t\tclearTimeout(trackMutedTimeoutId);\n\t\t\t\t\t\ttrackMutedTimeoutId = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconfig.remoteStream.addTrack(ev.target);\n\t\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\t\tif(addTracks && stream) {\n\t\t\tJanus.log('Adding local stream');\n\t\t\tvar simulcast2 = (callbacks.simulcast2 === true);\n\t\t\tstream.getTracks().forEach(function(track) {\n\t\t\t\tJanus.log('Adding local track:', track);\n\t\t\t\tif(!simulcast2) {\n\t\t\t\t\tvar sender = config.pc.addTrack(track, stream);\n\t\t\t\t\t// Check if insertable streams are involved\n\t\t\t\t\tif(sender && config.senderTransforms) {\n\t\t\t\t\t\tvar senderStreams = null;\n\t\t\t\t\t\tif(sender.track.kind === \"audio\" && config.senderTransforms[\"audio\"]) {\n\t\t\t\t\t\t\tsenderStreams = sender.createEncodedAudioStreams();\n\t\t\t\t\t\t} else if(sender.track.kind === \"video\" && config.senderTransforms[\"video\"]) {\n\t\t\t\t\t\t\tsenderStreams = sender.createEncodedVideoStreams();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(senderStreams) {\n\t\t\t\t\t\t\tsenderStreams.readableStream\n\t\t\t\t\t\t\t\t.pipeThrough(config.senderTransforms[sender.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(senderStreams.writableStream);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(track.kind === \"audio\") {\n\t\t\t\t\t\tconfig.pc.addTrack(track, stream);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.log('Enabling rid-based simulcasting:', track);\n\t\t\t\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\t\t\t\tconfig.pc.addTransceiver(track, {\n\t\t\t\t\t\t\tdirection: \"sendrecv\",\n\t\t\t\t\t\t\tstreams: [stream],\n\t\t\t\t\t\t\tsendEncodings: [\n\t\t\t\t\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },\n\t\t\t\t\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// Any data channel to create?\n\t\tif(isDataEnabled(media) && !config.dataChannel[Janus.dataChanDefaultLabel]) {\n\t\t\tJanus.log(\"Creating default data channel\");\n\t\t\tcreateDataChannel(handleId, Janus.dataChanDefaultLabel, null, false);\n\t\t\tconfig.pc.ondatachannel = function(event) {\n\t\t\t\tJanus.log(\"Data channel created by Janus:\", event);\n\t\t\t\tcreateDataChannel(handleId, event.channel.label, event.channel.protocol, event.channel);\n\t\t\t};\n\t\t}\n\t\t// If there's a new local stream, let's notify the application\n\t\tif(config.myStream) {\n\t\t\tpluginHandle.onlocalstream(config.myStream);\n\t\t}\n\t\t// Create offer/answer now\n\t\tif(!jsep) {\n\t\t\tcreateOffer(handleId, media, callbacks);\n\t\t} else {\n\t\t\tconfig.pc.setRemoteDescription(jsep)\n\t\t\t\t.then(function() {\n\t\t\t\t\tJanus.log(\"Remote description accepted!\");\n\t\t\t\t\tconfig.remoteSdp = jsep.sdp;\n\t\t\t\t\t// Any trickle candidate we cached?\n\t\t\t\t\tif(config.candidates && config.candidates.length > 0) {\n\t\t\t\t\t\tfor(var i = 0; i< config.candidates.length; i++) {\n\t\t\t\t\t\t\tvar candidate = config.candidates[i];\n\t\t\t\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t\t\t\t// end-of-candidates\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// New candidate\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconfig.candidates = [];\n\t\t\t\t\t}\n\t\t\t\t\t// Create the answer now\n\t\t\t\t\tcreateAnswer(handleId, media, callbacks);\n\t\t\t\t}, callbacks.error);\n\t\t}\n\t}\n\n\tfunction prepareWebrtc(handleId, offer, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n\t\tvar jsep = callbacks.jsep;\n\t\tif(offer && jsep) {\n\t\t\tJanus.error(\"Provided a JSEP to a createOffer\");\n\t\t\tcallbacks.error(\"Provided a JSEP to a createOffer\");\n\t\t\treturn;\n\t\t} else if(!offer && (!jsep || !jsep.type || !jsep.sdp)) {\n\t\t\tJanus.error(\"A valid JSEP is required for createAnswer\");\n\t\t\tcallbacks.error(\"A valid JSEP is required for createAnswer\");\n\t\t\treturn;\n\t\t}\n\t\t/* Check that callbacks.media is a (not null) Object */\n\t\tcallbacks.media = (typeof callbacks.media === 'object' && callbacks.media) ? callbacks.media : { audio: true, video: true };\n\t\tvar media = callbacks.media;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tconfig.trickle = isTrickleEnabled(callbacks.trickle);\n\t\t// Are we updating a session?\n\t\tif(!config.pc) {\n\t\t\t// Nope, new PeerConnection\n\t\t\tmedia.update = false;\n\t\t\tmedia.keepAudio = false;\n\t\t\tmedia.keepVideo = false;\n\t\t} else {\n\t\t\tJanus.log(\"Updating existing media session\");\n\t\t\tmedia.update = true;\n\t\t\t// Check if there's anything to add/remove/replace, or if we\n\t\t\t// can go directly to preparing the new SDP offer or answer\n\t\t\tif(callbacks.stream) {\n\t\t\t\t// External stream: is this the same as the one we were using before?\n\t\t\t\tif(callbacks.stream !== config.myStream) {\n\t\t\t\t\tJanus.log(\"Renegotiation involves a new external stream\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Check if there are changes on audio\n\t\t\t\tif(media.addAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\tmedia.removeAudio = false;\n\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\tif(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {\n\t\t\t\t\t\tJanus.error(\"Can't add audio stream, there already is one\");\n\t\t\t\t\t\tcallbacks.error(\"Can't add audio stream, there already is one\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if(media.removeAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\tmedia.addAudio = false;\n\t\t\t\t\tmedia.audioSend = false;\n\t\t\t\t} else if(media.replaceAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.addAudio = false;\n\t\t\t\t\tmedia.removeAudio = false;\n\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t}\n\t\t\t\tif(!config.myStream) {\n\t\t\t\t\t// No media stream: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\tif(media.replaceAudio) {\n\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(isAudioSendEnabled(media)) {\n\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\t\t\t// No audio track: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\t\tif(media.replaceAudio) {\n\t\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isAudioSendEnabled(media)) {\n\t\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We have an audio track: should we keep it as it is?\n\t\t\t\t\t\tif(isAudioSendEnabled(media) &&\n\t\t\t\t\t\t\t\t!media.removeAudio && !media.replaceAudio) {\n\t\t\t\t\t\t\tmedia.keepAudio = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Check if there are changes on video\n\t\t\t\tif(media.addVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\tmedia.removeVideo = false;\n\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\tif(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {\n\t\t\t\t\t\tJanus.error(\"Can't add video stream, there already is one\");\n\t\t\t\t\t\tcallbacks.error(\"Can't add video stream, there already is one\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if(media.removeVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\tmedia.addVideo = false;\n\t\t\t\t\tmedia.videoSend = false;\n\t\t\t\t} else if(media.replaceVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.addVideo = false;\n\t\t\t\t\tmedia.removeVideo = false;\n\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t}\n\t\t\t\tif(!config.myStream) {\n\t\t\t\t\t// No media stream: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\tif(media.replaceVideo) {\n\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(isVideoSendEnabled(media)) {\n\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\t\t\t// No video track: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\t\tif(media.replaceVideo) {\n\t\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isVideoSendEnabled(media)) {\n\t\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We have a video track: should we keep it as it is?\n\t\t\t\t\t\tif(isVideoSendEnabled(media) && !media.removeVideo && !media.replaceVideo) {\n\t\t\t\t\t\t\tmedia.keepVideo = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Data channels can only be added\n\t\t\t\tif(media.addData) {\n\t\t\t\t\tmedia.data = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we're updating and keeping all tracks, let's skip the getUserMedia part\n\t\t\tif((isAudioSendEnabled(media) && media.keepAudio) &&\n\t\t\t\t\t(isVideoSendEnabled(media) && media.keepVideo)) {\n\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, config.myStream);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// If we're updating, check if we need to remove/replace one of the tracks\n\t\tif(media.update && !config.streamExternal) {\n\t\t\tif(media.removeAudio || media.replaceAudio) {\n\t\t\t\tif(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {\n\t\t\t\t\tvar at = config.myStream.getAudioTracks()[0];\n\t\t\t\t\tJanus.log(\"Removing audio track:\", at);\n\t\t\t\t\tconfig.myStream.removeTrack(at);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tat.stop();\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t\tif(config.pc.getSenders() && config.pc.getSenders().length) {\n\t\t\t\t\tvar ra = true;\n\t\t\t\t\tif(media.replaceAudio && Janus.unifiedPlan) {\n\t\t\t\t\t\t// We can use replaceTrack\n\t\t\t\t\t\tra = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(ra) {\n\t\t\t\t\t\tfor(var asnd of config.pc.getSenders()) {\n\t\t\t\t\t\t\tif(asnd && asnd.track && asnd.track.kind === \"audio\") {\n\t\t\t\t\t\t\t\tJanus.log(\"Removing audio sender:\", asnd);\n\t\t\t\t\t\t\t\tconfig.pc.removeTrack(asnd);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(media.removeVideo || media.replaceVideo) {\n\t\t\t\tif(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {\n\t\t\t\t\tvar vt = config.myStream.getVideoTracks()[0];\n\t\t\t\t\tJanus.log(\"Removing video track:\", vt);\n\t\t\t\t\tconfig.myStream.removeTrack(vt);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvt.stop();\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t\tif(config.pc.getSenders() && config.pc.getSenders().length) {\n\t\t\t\t\tvar rv = true;\n\t\t\t\t\tif(media.replaceVideo && Janus.unifiedPlan) {\n\t\t\t\t\t\t// We can use replaceTrack\n\t\t\t\t\t\trv = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(rv) {\n\t\t\t\t\t\tfor(var vsnd of config.pc.getSenders()) {\n\t\t\t\t\t\t\tif(vsnd && vsnd.track && vsnd.track.kind === \"video\") {\n\t\t\t\t\t\t\t\tJanus.log(\"Removing video sender:\", vsnd);\n\t\t\t\t\t\t\t\tconfig.pc.removeTrack(vsnd);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Was a MediaStream object passed, or do we need to take care of that?\n\t\tif(callbacks.stream) {\n\t\t\tvar stream = callbacks.stream;\n\t\t\tJanus.log(\"MediaStream provided by the application\");\n\t\t\tJanus.debug(stream);\n\t\t\t// If this is an update, let's check if we need to release the previous stream\n\t\t\tif(media.update) {\n\t\t\t\tif(config.myStream && config.myStream !== callbacks.stream && !config.streamExternal) {\n\t\t\t\t\t// We're replacing a stream we captured ourselves with an external one\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Try a MediaStreamTrack.stop() for each track\n\t\t\t\t\t\tvar tracks = config.myStream.getTracks();\n\t\t\t\t\t\tfor(var mst of tracks) {\n\t\t\t\t\t\t\tJanus.log(mst);\n\t\t\t\t\t\t\tif(mst)\n\t\t\t\t\t\t\t\tmst.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t// Do nothing if this fails\n\t\t\t\t\t}\n\t\t\t\t\tconfig.myStream = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Skip the getUserMedia part\n\t\t\tconfig.streamExternal = true;\n\t\t\tpluginHandle.consentDialog(false);\n\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\treturn;\n\t\t}\n\t\tif(isAudioSendEnabled(media) || isVideoSendEnabled(media)) {\n\t\t\tif(!Janus.isGetUserMediaAvailable()) {\n\t\t\t\tcallbacks.error(\"getUserMedia not available\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar constraints = { mandatory: {}, optional: []};\n\t\t\tpluginHandle.consentDialog(true);\n\t\t\tvar audioSupport = isAudioSendEnabled(media);\n\t\t\tif(audioSupport && media && typeof media.audio === 'object')\n\t\t\t\taudioSupport = media.audio;\n\t\t\tvar videoSupport = isVideoSendEnabled(media);\n\t\t\tif(videoSupport && media) {\n\t\t\t\tvar simulcast = (callbacks.simulcast === true);\n\t\t\t\tvar simulcast2 = (callbacks.simulcast2 === true);\n\t\t\t\tif((simulcast || simulcast2) && !jsep && !media.video)\n\t\t\t\t\tmedia.video = \"hires\";\n\t\t\t\tif(media.video && media.video != 'screen' && media.video != 'window') {\n\t\t\t\t\tif(typeof media.video === 'object') {\n\t\t\t\t\t\tvideoSupport = media.video;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar width = 0;\n\t\t\t\t\t\tvar height = 0, maxHeight = 0;\n\t\t\t\t\t\tif(media.video === 'lowres') {\n\t\t\t\t\t\t\t// Small resolution, 4:3\n\t\t\t\t\t\t\theight = 240;\n\t\t\t\t\t\t\tmaxHeight = 240;\n\t\t\t\t\t\t\twidth = 320;\n\t\t\t\t\t\t} else if(media.video === 'lowres-16:9') {\n\t\t\t\t\t\t\t// Small resolution, 16:9\n\t\t\t\t\t\t\theight = 180;\n\t\t\t\t\t\t\tmaxHeight = 180;\n\t\t\t\t\t\t\twidth = 320;\n\t\t\t\t\t\t} else if(media.video === 'hires' || media.video === 'hires-16:9' || media.video === 'hdres') {\n\t\t\t\t\t\t\t// High(HD) resolution is only 16:9\n\t\t\t\t\t\t\theight = 720;\n\t\t\t\t\t\t\tmaxHeight = 720;\n\t\t\t\t\t\t\twidth = 1280;\n\t\t\t\t\t\t} else if(media.video === 'fhdres') {\n\t\t\t\t\t\t\t// Full HD resolution is only 16:9\n\t\t\t\t\t\t\theight = 1080;\n\t\t\t\t\t\t\tmaxHeight = 1080;\n\t\t\t\t\t\t\twidth = 1920;\n\t\t\t\t\t\t} else if(media.video === '4kres') {\n\t\t\t\t\t\t\t// 4K resolution is only 16:9\n\t\t\t\t\t\t\theight = 2160;\n\t\t\t\t\t\t\tmaxHeight = 2160;\n\t\t\t\t\t\t\twidth = 3840;\n\t\t\t\t\t\t} else if(media.video === 'stdres') {\n\t\t\t\t\t\t\t// Normal resolution, 4:3\n\t\t\t\t\t\t\theight = 480;\n\t\t\t\t\t\t\tmaxHeight = 480;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t} else if(media.video === 'stdres-16:9') {\n\t\t\t\t\t\t\t// Normal resolution, 16:9\n\t\t\t\t\t\t\theight = 360;\n\t\t\t\t\t\t\tmaxHeight = 360;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tJanus.log(\"Default video setting is stdres 4:3\");\n\t\t\t\t\t\t\theight = 480;\n\t\t\t\t\t\t\tmaxHeight = 480;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Adding media constraint:\", media.video);\n\t\t\t\t\t\tvideoSupport = {\n\t\t\t\t\t\t\t'height': {'ideal': height},\n\t\t\t\t\t\t\t'width': {'ideal': width}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tJanus.log(\"Adding video constraint:\", videoSupport);\n\t\t\t\t\t}\n\t\t\t\t} else if(media.video === 'screen' || media.video === 'window') {\n\t\t\t\t\tif(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\n\t\t\t\t\t\t// The new experimental getDisplayMedia API is available, let's use that\n\t\t\t\t\t\t// https://groups.google.com/forum/#!topic/discuss-webrtc/Uf0SrR4uxzk\n\t\t\t\t\t\t// https://webrtchacks.com/chrome-screensharing-getdisplaymedia/\n\t\t\t\t\t\tconstraints.video = {};\n\t\t\t\t\t\tif(media.screenshareFrameRate) {\n\t\t\t\t\t\t\tconstraints.video.frameRate = media.screenshareFrameRate;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(media.screenshareHeight) {\n\t\t\t\t\t\t\tconstraints.video.height = media.screenshareHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(media.screenshareWidth) {\n\t\t\t\t\t\t\tconstraints.video.width = media.screenshareWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconstraints.audio = media.captureDesktopAudio;\n\t\t\t\t\t\tnavigator.mediaDevices.getDisplayMedia(constraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tif(isAudioSendEnabled(media) && !media.keepAudio) {\n\t\t\t\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n\t\t\t\t\t\t\t\t\t.then(function (audioStream) {\n\t\t\t\t\t\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// We're going to try and use the extension for Chrome 34+, the old approach\n\t\t\t\t\t// for older versions of Chrome, or the experimental support in Firefox 33+\n\t\t\t\t\tfunction callbackUserMedia (error, stream) {\n\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\tif(error) {\n\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfunction getScreenMedia(constraints, gsmCallback, useAudio) {\n\t\t\t\t\t\tJanus.log(\"Adding media constraint (screen capture)\");\n\t\t\t\t\t\tJanus.debug(constraints);\n\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia(constraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tif(useAudio) {\n\t\t\t\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n\t\t\t\t\t\t\t\t\t.then(function (audioStream) {\n\t\t\t\t\t\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t\t\t\t\t\t\tgsmCallback(null, stream);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tgsmCallback(null, stream);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) { pluginHandle.consentDialog(false); gsmCallback(error); });\n\t\t\t\t\t}\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'chrome') {\n\t\t\t\t\t\tvar chromever = Janus.webRTCAdapter.browserDetails.version;\n\t\t\t\t\t\tvar maxver = 33;\n\t\t\t\t\t\tif(window.navigator.userAgent.match('Linux'))\n\t\t\t\t\t\t\tmaxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n\t\t\t\t\t\tif(chromever >= 26 && chromever <= maxver) {\n\t\t\t\t\t\t\t// Chrome 26->33 requires some awkward chrome://flags manipulation\n\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\t\t\tgoogLeakyBucket: true,\n\t\t\t\t\t\t\t\t\t\tmaxWidth: window.screen.width,\n\t\t\t\t\t\t\t\t\t\tmaxHeight: window.screen.height,\n\t\t\t\t\t\t\t\t\t\tminFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\tmaxFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\tchromeMediaSource: 'screen'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taudio: isAudioSendEnabled(media) && !media.keepAudio\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgetScreenMedia(constraints, callbackUserMedia);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Chrome 34+ requires an extension\n\t\t\t\t\t\t\tJanus.extension.getScreen(function (error, sourceId) {\n\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\t\treturn callbacks.error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\t\taudio: false,\n\t\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\t\t\t\tchromeMediaSource: 'desktop',\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: window.screen.width,\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: window.screen.height,\n\t\t\t\t\t\t\t\t\t\t\tminFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\t\tmaxFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\toptional: [\n\t\t\t\t\t\t\t\t\t\t\t{googLeakyBucket: true},\n\t\t\t\t\t\t\t\t\t\t\t{googTemporalLayeredScreencast: true}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconstraints.video.mandatory.chromeMediaSourceId = sourceId;\n\t\t\t\t\t\t\t\tgetScreenMedia(constraints, callbackUserMedia,\n\t\t\t\t\t\t\t\t\tisAudioSendEnabled(media) && !media.keepAudio);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser === 'firefox') {\n\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.version >= 33) {\n\t\t\t\t\t\t\t// Firefox 33+ has experimental support for screen sharing\n\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\tmozMediaSource: media.video,\n\t\t\t\t\t\t\t\t\tmediaSource: media.video\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taudio: isAudioSendEnabled(media) && !media.keepAudio\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgetScreenMedia(constraints, function (err, stream) {\n\t\t\t\t\t\t\t\tcallbackUserMedia(err, stream);\n\t\t\t\t\t\t\t\t// Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810\n\t\t\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t\t\tvar lastTime = stream.currentTime;\n\t\t\t\t\t\t\t\t\tvar polly = window.setInterval(function () {\n\t\t\t\t\t\t\t\t\t\tif(!stream)\n\t\t\t\t\t\t\t\t\t\t\twindow.clearInterval(polly);\n\t\t\t\t\t\t\t\t\t\tif(stream.currentTime == lastTime) {\n\t\t\t\t\t\t\t\t\t\t\twindow.clearInterval(polly);\n\t\t\t\t\t\t\t\t\t\t\tif(stream.onended) {\n\t\t\t\t\t\t\t\t\t\t\t\tstream.onended();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlastTime = stream.currentTime;\n\t\t\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\t\t\t\t\terror.name = 'Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)';\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we got here, we're not screensharing\n\t\t\tif(!media || media.video !== 'screen') {\n\t\t\t\t// Check whether all media sources are actually available or not\n\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(function(devices) {\n\t\t\t\t\tvar audioExist = devices.some(function(device) {\n\t\t\t\t\t\treturn device.kind === 'audioinput';\n\t\t\t\t\t}),\n\t\t\t\t\tvideoExist = isScreenSendEnabled(media) || devices.some(function(device) {\n\t\t\t\t\t\treturn device.kind === 'videoinput';\n\t\t\t\t\t});\n\n\t\t\t\t\t// Check whether a missing device is really a problem\n\t\t\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\t\t\tvar needAudioDevice = isAudioSendRequired(media);\n\t\t\t\t\tvar needVideoDevice = isVideoSendRequired(media);\n\t\t\t\t\tif(audioSend || videoSend || needAudioDevice || needVideoDevice) {\n\t\t\t\t\t\t// We need to send either audio or video\n\t\t\t\t\t\tvar haveAudioDevice = audioSend ? audioExist : false;\n\t\t\t\t\t\tvar haveVideoDevice = videoSend ? videoExist : false;\n\t\t\t\t\t\tif(!haveAudioDevice && !haveVideoDevice) {\n\t\t\t\t\t\t\t// FIXME Should we really give up, or just assume recvonly for both?\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('No capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if(!haveAudioDevice && needAudioDevice) {\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('Audio capture is required, but no capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if(!haveVideoDevice && needVideoDevice) {\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('Video capture is required, but no capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar gumConstraints = {\n\t\t\t\t\t\taudio: (audioExist && !media.keepAudio) ? audioSupport : false,\n\t\t\t\t\t\tvideo: (videoExist && !media.keepVideo) ? videoSupport : false\n\t\t\t\t\t};\n\t\t\t\t\tJanus.debug(\"getUserMedia constraints\", gumConstraints);\n\t\t\t\t\tif (!gumConstraints.audio && !gumConstraints.video) {\n\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia(gumConstraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tcallbacks.error({code: error.code, name: error.name, message: error.message});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\tcallbacks.error('enumerateDevices error', error);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// No need to do a getUserMedia, create offer/answer right away\n\t\t\tstreamsDone(handleId, jsep, media, callbacks);\n\t\t}\n\t}\n\n\tfunction prepareWebrtcPeer(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n\t\tvar jsep = callbacks.jsep;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(jsep) {\n\t\t\tif(!config.pc) {\n\t\t\t\tJanus.warn(\"Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep\");\n\t\t\t\tcallbacks.error(\"No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconfig.pc.setRemoteDescription(jsep)\n\t\t\t\t.then(function() {\n\t\t\t\t\tJanus.log(\"Remote description accepted!\");\n\t\t\t\t\tconfig.remoteSdp = jsep.sdp;\n\t\t\t\t\t// Any trickle candidate we cached?\n\t\t\t\t\tif(config.candidates && config.candidates.length > 0) {\n\t\t\t\t\t\tfor(var i = 0; i< config.candidates.length; i++) {\n\t\t\t\t\t\t\tvar candidate = config.candidates[i];\n\t\t\t\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t\t\t\t// end-of-candidates\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// New candidate\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconfig.candidates = [];\n\t\t\t\t\t}\n\t\t\t\t\t// Done\n\t\t\t\t\tcallbacks.success();\n\t\t\t\t}, callbacks.error);\n\t\t} else {\n\t\t\tcallbacks.error(\"Invalid JSEP\");\n\t\t}\n\t}\n\n\tfunction createOffer(handleId, media, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.customizeSdp = (typeof callbacks.customizeSdp == \"function\") ? callbacks.customizeSdp : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar simulcast = (callbacks.simulcast === true);\n\t\tif(!simulcast) {\n\t\t\tJanus.log(\"Creating offer (iceDone=\" + config.iceDone + \")\");\n\t\t} else {\n\t\t\tJanus.log(\"Creating offer (iceDone=\" + config.iceDone + \", simulcast=\" + simulcast + \")\");\n\t\t}\n\t\t// https://code.google.com/p/webrtc/issues/detail?id=3508\n\t\tvar mediaConstraints = {};\n\t\tif(Janus.unifiedPlan) {\n\t\t\t// We can use Transceivers\n\t\t\tvar audioTransceiver = null, videoTransceiver = null;\n\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\tif(!audioTransceiver) {\n\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\tif(!videoTransceiver) {\n\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle audio (and related changes, if any)\n\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\tvar audioRecv = isAudioRecvEnabled(media);\n\t\t\tif(!audioSend && !audioRecv) {\n\t\t\t\t// Audio disabled: have we removed it?\n\t\t\t\tif(media.removeAudio && audioTransceiver) {\n\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\taudioTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\taudioTransceiver.direction = \"inactive\";\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Setting audio transceiver to inactive:\", audioTransceiver);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of audio m-line\n\t\t\t\tif(audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendrecv:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(audioSend && !audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendonly:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(!audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to recvonly:\", audioTransceiver);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\taudioTransceiver = config.pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly audio transceiver:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle video (and related changes, if any)\n\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\tvar videoRecv = isVideoRecvEnabled(media);\n\t\t\tif(!videoSend && !videoRecv) {\n\t\t\t\t// Video disabled: have we removed it?\n\t\t\t\tif(media.removeVideo && videoTransceiver) {\n\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\tvideoTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvideoTransceiver.direction = \"inactive\";\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Setting video transceiver to inactive:\", videoTransceiver);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of video m-line\n\t\t\t\tif(videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendrecv:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(videoSend && !videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendonly:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(!videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to recvonly:\", videoTransceiver);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\tvideoTransceiver = config.pc.addTransceiver(\"video\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly video transceiver:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmediaConstraints[\"offerToReceiveAudio\"] = isAudioRecvEnabled(media);\n\t\t\tmediaConstraints[\"offerToReceiveVideo\"] = isVideoRecvEnabled(media);\n\t\t}\n\t\tvar iceRestart = (callbacks.iceRestart === true);\n\t\tif(iceRestart) {\n\t\t\tmediaConstraints[\"iceRestart\"] = true;\n\t\t}\n\t\tJanus.debug(mediaConstraints);\n\t\t// Check if this is Firefox and we've been asked to do simulcasting\n\t\tvar sendVideo = isVideoSendEnabled(media);\n\t\tif(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n\t\t\t// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b\n\t\t\tJanus.log(\"Enabling Simulcasting for Firefox (RID)\");\n\t\t\tvar sender = config.pc.getSenders().find(function(s) {return s.track.kind === \"video\"});\n\t\t\tif(sender) {\n\t\t\t\tvar parameters = sender.getParameters();\n\t\t\t\tif(!parameters) {\n\t\t\t\t\tparameters = {};\n\t\t\t\t}\n\t\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\t\tparameters.encodings = [\n\t\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },\n\t\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }\n\t\t\t\t];\n\t\t\t\tsender.setParameters(parameters);\n\t\t\t}\n\t\t}\n\t\tconfig.pc.createOffer(mediaConstraints)\n\t\t\t.then(function(offer) {\n\t\t\t\tJanus.debug(offer);\n\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\tvar jsep = {\n\t\t\t\t\t\"type\": offer.type,\n\t\t\t\t\t\"sdp\": offer.sdp\n\t\t\t\t};\n\t\t\t\tcallbacks.customizeSdp(jsep);\n\t\t\t\toffer.sdp = jsep.sdp;\n\t\t\t\tJanus.log(\"Setting local description\");\n\t\t\t\tif(sendVideo && simulcast) {\n\t\t\t\t\t// This SDP munging only works with Chrome (Safari STP may support it too)\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n\t\t\t\t\t\t\tJanus.webRTCAdapter.browserDetails.browser === \"safari\") {\n\t\t\t\t\t\tJanus.log(\"Enabling Simulcasting for Chrome (SDP munging)\");\n\t\t\t\t\t\toffer.sdp = mungeSdpForSimulcasting(offer.sdp);\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser !== \"firefox\") {\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is not Chrome nor Firefox, ignoring\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig.mySdp = offer.sdp;\n\t\t\t\tconfig.pc.setLocalDescription(offer)\n\t\t\t\t\t.catch(callbacks.error);\n\t\t\t\tconfig.mediaConstraints = mediaConstraints;\n\t\t\t\tif(!config.iceDone && !config.trickle) {\n\t\t\t\t\t// Don't do anything until we have all candidates\n\t\t\t\t\tJanus.log(\"Waiting for all candidates...\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If transforms are present, notify Janus that the media is end-to-end encrypted\n\t\t\t\tif(config.senderTransforms || config.receiverTransforms) {\n\t\t\t\t\toffer[\"e2ee\"] = true;\n\t\t\t\t}\n\t\t\t\tcallbacks.success(offer);\n\t\t\t}, callbacks.error);\n\t}\n\n\tfunction createAnswer(handleId, media, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.customizeSdp = (typeof callbacks.customizeSdp == \"function\") ? callbacks.customizeSdp : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar simulcast = (callbacks.simulcast === true);\n\t\tif(!simulcast) {\n\t\t\tJanus.log(\"Creating answer (iceDone=\" + config.iceDone + \")\");\n\t\t} else {\n\t\t\tJanus.log(\"Creating answer (iceDone=\" + config.iceDone + \", simulcast=\" + simulcast + \")\");\n\t\t}\n\t\tvar mediaConstraints = null;\n\t\tif(Janus.unifiedPlan) {\n\t\t\t// We can use Transceivers\n\t\t\tmediaConstraints = {};\n\t\t\tvar audioTransceiver = null, videoTransceiver = null;\n\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\tif(!audioTransceiver)\n\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\tif(!videoTransceiver)\n\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle audio (and related changes, if any)\n\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\tvar audioRecv = isAudioRecvEnabled(media);\n\t\t\tif(!audioSend && !audioRecv) {\n\t\t\t\t// Audio disabled: have we removed it?\n\t\t\t\tif(media.removeAudio && audioTransceiver) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"inactive\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to inactive:\", audioTransceiver);\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of audio m-line\n\t\t\t\tif(audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendrecv:\", audioTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(audioSend && !audioRecv) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendonly:\", audioTransceiver);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t} else if(!audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to recvonly:\", audioTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\taudioTransceiver = config.pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly audio transceiver:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle video (and related changes, if any)\n\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\tvar videoRecv = isVideoRecvEnabled(media);\n\t\t\tif(!videoSend && !videoRecv) {\n\t\t\t\t// Video disabled: have we removed it?\n\t\t\t\tif(media.removeVideo && videoTransceiver) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"inactive\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to inactive:\", videoTransceiver);\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of video m-line\n\t\t\t\tif(videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendrecv:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(videoSend && !videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendonly:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(!videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to recvonly:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\tvideoTransceiver = config.pc.addTransceiver(\"video\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly video transceiver:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"firefox\" || Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\t\tmediaConstraints = {\n\t\t\t\t\tofferToReceiveAudio: isAudioRecvEnabled(media),\n\t\t\t\t\tofferToReceiveVideo: isVideoRecvEnabled(media)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tmediaConstraints = {\n\t\t\t\t\tmandatory: {\n\t\t\t\t\t\tOfferToReceiveAudio: isAudioRecvEnabled(media),\n\t\t\t\t\t\tOfferToReceiveVideo: isVideoRecvEnabled(media)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tJanus.debug(mediaConstraints);\n\t\t// Check if this is Firefox and we've been asked to do simulcasting\n\t\tvar sendVideo = isVideoSendEnabled(media);\n\t\tif(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n\t\t\t// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b\n\t\t\tJanus.log(\"Enabling Simulcasting for Firefox (RID)\");\n\t\t\tvar sender = config.pc.getSenders()[1];\n\t\t\tJanus.log(sender);\n\t\t\tvar parameters = sender.getParameters();\n\t\t\tJanus.log(parameters);\n\n\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\tsender.setParameters({encodings: [\n\t\t\t\t{ rid: \"high\", active: true, priority: \"high\", maxBitrate: maxBitrates.high },\n\t\t\t\t{ rid: \"medium\", active: true, priority: \"medium\", maxBitrate: maxBitrates.medium },\n\t\t\t\t{ rid: \"low\", active: true, priority: \"low\", maxBitrate: maxBitrates.low }\n\t\t\t]});\n\t\t}\n\t\tconfig.pc.createAnswer(mediaConstraints)\n\t\t\t.then(function(answer) {\n\t\t\t\tJanus.debug(answer);\n\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\tvar jsep = {\n\t\t\t\t\t\"type\": answer.type,\n\t\t\t\t\t\"sdp\": answer.sdp\n\t\t\t\t};\n\t\t\t\tcallbacks.customizeSdp(jsep);\n\t\t\t\tanswer.sdp = jsep.sdp;\n\t\t\t\tJanus.log(\"Setting local description\");\n\t\t\t\tif(sendVideo && simulcast) {\n\t\t\t\t\t// This SDP munging only works with Chrome\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\") {\n\t\t\t\t\t\t// FIXME Apparently trying to simulcast when answering breaks video in Chrome...\n\t\t\t\t\t\t//~ Janus.log(\"Enabling Simulcasting for Chrome (SDP munging)\");\n\t\t\t\t\t\t//~ answer.sdp = mungeSdpForSimulcasting(answer.sdp);\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is an answer, and video breaks in Chrome if we enable it\");\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser !== \"firefox\") {\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is not Chrome nor Firefox, ignoring\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig.mySdp = answer.sdp;\n\t\t\t\tconfig.pc.setLocalDescription(answer)\n\t\t\t\t\t.catch(callbacks.error);\n\t\t\t\tconfig.mediaConstraints = mediaConstraints;\n\t\t\t\tif(!config.iceDone && !config.trickle) {\n\t\t\t\t\t// Don't do anything until we have all candidates\n\t\t\t\t\tJanus.log(\"Waiting for all candidates...\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If transforms are present, notify Janus that the media is end-to-end encrypted\n\t\t\t\tif(config.senderTransforms || config.receiverTransforms) {\n\t\t\t\t\tanswer[\"e2ee\"] = true;\n\t\t\t\t}\n\t\t\t\tcallbacks.success(answer);\n\t\t\t}, callbacks.error);\n\t}\n\n\tfunction sendSDP(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle, not sending anything\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tJanus.log(\"Sending offer/answer SDP...\");\n\t\tif(!config.mySdp) {\n\t\t\tJanus.warn(\"Local SDP instance is invalid, not sending anything...\");\n\t\t\treturn;\n\t\t}\n\t\tconfig.mySdp = {\n\t\t\t\"type\": config.pc.localDescription.type,\n\t\t\t\"sdp\": config.pc.localDescription.sdp\n\t\t};\n\t\tif(config.trickle === false)\n\t\t\tconfig.mySdp[\"trickle\"] = false;\n\t\tJanus.debug(callbacks);\n\t\tconfig.sdpSent = true;\n\t\tcallbacks.success(config.mySdp);\n\t}\n\n\tfunction getVolume(handleId, remote) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn 0;\n\t\t}\n\t\tvar stream = remote ? \"remote\" : \"local\";\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.volume[stream])\n\t\t\tconfig.volume[stream] = { value: 0 };\n\t\t// Start getting the volume, if audioLevel in getStats is supported (apparently\n\t\t// they're only available in Chrome/Safari right now: https://webrtc-stats.callstats.io/)\n\t\tif(config.pc.getStats && (Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n\t\t\t\tJanus.webRTCAdapter.browserDetails.browser === \"safari\")) {\n\t\t\tif(remote && !config.remoteStream) {\n\t\t\t\tJanus.warn(\"Remote stream unavailable\");\n\t\t\t\treturn 0;\n\t\t\t} else if(!remote && !config.myStream) {\n\t\t\t\tJanus.warn(\"Local stream unavailable\");\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(!config.volume[stream].timer) {\n\t\t\t\tJanus.log(\"Starting \" + stream + \" volume monitor\");\n\t\t\t\tconfig.volume[stream].timer = setInterval(function() {\n\t\t\t\t\tconfig.pc.getStats()\n\t\t\t\t\t\t.then(function(stats) {\n\t\t\t\t\t\t\tstats.forEach(function (res) {\n\t\t\t\t\t\t\t\tif(!res || res.kind !== \"audio\")\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tif((remote && !res.remoteSource) || (!remote && res.type !== \"media-source\"))\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tconfig.volume[stream].value = (res.audioLevel ? res.audioLevel : 0);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t\treturn 0;\t// We don't have a volume to return yet\n\t\t\t}\n\t\t\treturn config.volume[stream].value;\n\t\t} else {\n\t\t\t// audioInputLevel and audioOutputLevel seem only available in Chrome? audioLevel\n\t\t\t// seems to be available on Chrome and Firefox, but they don't seem to work\n\t\t\tJanus.warn(\"Getting the \" + stream + \" volume unsupported by browser\");\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tfunction isMuted(handleId, video) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn true;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn true;\n\t\t}\n\t\tif(!config.myStream) {\n\t\t\tJanus.warn(\"Invalid local MediaStream\");\n\t\t\treturn true;\n\t\t}\n\t\tif(video) {\n\t\t\t// Check video track\n\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No video track\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !config.myStream.getVideoTracks()[0].enabled;\n\t\t} else {\n\t\t\t// Check audio track\n\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No audio track\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !config.myStream.getAudioTracks()[0].enabled;\n\t\t}\n\t}\n\n\tfunction mute(handleId, video, mute) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn false;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn false;\n\t\t}\n\t\tif(!config.myStream) {\n\t\t\tJanus.warn(\"Invalid local MediaStream\");\n\t\t\treturn false;\n\t\t}\n\t\tif(video) {\n\t\t\t// Mute/unmute video track\n\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No video track\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconfig.myStream.getVideoTracks()[0].enabled = !mute;\n\t\t\treturn true;\n\t\t} else {\n\t\t\t// Mute/unmute audio track\n\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No audio track\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconfig.myStream.getAudioTracks()[0].enabled = !mute;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tfunction getBitrate(handleId) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn \"Invalid handle\";\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc)\n\t\t\treturn \"Invalid PeerConnection\";\n\t\t// Start getting the bitrate, if getStats is supported\n\t\tif(config.pc.getStats) {\n\t\t\tif(!config.bitrate.timer) {\n\t\t\t\tJanus.log(\"Starting bitrate timer (via getStats)\");\n\t\t\t\tconfig.bitrate.timer = setInterval(function() {\n\t\t\t\t\tconfig.pc.getStats()\n\t\t\t\t\t\t.then(function(stats) {\n\t\t\t\t\t\t\tstats.forEach(function (res) {\n\t\t\t\t\t\t\t\tif(!res)\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tvar inStats = false;\n\t\t\t\t\t\t\t\t// Check if these are statistics on incoming media\n\t\t\t\t\t\t\t\tif((res.mediaType === \"video\" || res.id.toLowerCase().indexOf(\"video\") > -1) &&\n\t\t\t\t\t\t\t\t\t\tres.type === \"inbound-rtp\" && res.id.indexOf(\"rtcp\") < 0) {\n\t\t\t\t\t\t\t\t\t// New stats\n\t\t\t\t\t\t\t\t\tinStats = true;\n\t\t\t\t\t\t\t\t} else if(res.type == 'ssrc' && res.bytesReceived &&\n\t\t\t\t\t\t\t\t\t\t(res.googCodecName === \"VP8\" || res.googCodecName === \"\")) {\n\t\t\t\t\t\t\t\t\t// Older Chromer versions\n\t\t\t\t\t\t\t\t\tinStats = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Parse stats now\n\t\t\t\t\t\t\t\tif(inStats) {\n\t\t\t\t\t\t\t\t\tconfig.bitrate.bsnow = res.bytesReceived;\n\t\t\t\t\t\t\t\t\tconfig.bitrate.tsnow = res.timestamp;\n\t\t\t\t\t\t\t\t\tif(config.bitrate.bsbefore === null || config.bitrate.tsbefore === null) {\n\t\t\t\t\t\t\t\t\t\t// Skip this round\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.bsbefore = config.bitrate.bsnow;\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.tsbefore = config.bitrate.tsnow;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Calculate bitrate\n\t\t\t\t\t\t\t\t\t\tvar timePassed = config.bitrate.tsnow - config.bitrate.tsbefore;\n\t\t\t\t\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"safari\")\n\t\t\t\t\t\t\t\t\t\t\ttimePassed = timePassed/1000;\t// Apparently the timestamp is in microseconds, in Safari\n\t\t\t\t\t\t\t\t\t\tvar bitRate = Math.round((config.bitrate.bsnow - config.bitrate.bsbefore) * 8 / timePassed);\n\t\t\t\t\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"safari\")\n\t\t\t\t\t\t\t\t\t\t\tbitRate = parseInt(bitRate/1000);\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.value = bitRate + ' kbits/sec';\n\t\t\t\t\t\t\t\t\t\t//~ Janus.log(\"Estimated bitrate is \" + config.bitrate.value);\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.bsbefore = config.bitrate.bsnow;\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.tsbefore = config.bitrate.tsnow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}, 1000);\n\t\t\t\treturn \"0 kbits/sec\";\t// We don't have a bitrate value yet\n\t\t\t}\n\t\t\treturn config.bitrate.value;\n\t\t} else {\n\t\t\tJanus.warn(\"Getting the video bitrate unsupported by browser\");\n\t\t\treturn \"Feature unsupported by browser\";\n\t\t}\n\t}\n\n\tfunction webrtcError(error) {\n\t\tJanus.error(\"WebRTC error:\", error);\n\t}\n\n\tfunction cleanupWebrtc(handleId, hangupRequest) {\n\t\tJanus.log(\"Cleaning WebRTC stuff\");\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle) {\n\t\t\t// Nothing to clean\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(config) {\n\t\t\tif(hangupRequest === true) {\n\t\t\t\t// Send a hangup request (we don't really care about the response)\n\t\t\t\tvar request = { \"janus\": \"hangup\", \"transaction\": Janus.randomString(12) };\n\t\t\t\tif(pluginHandle.token)\n\t\t\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\t\t\tif(apisecret)\n\t\t\t\t\trequest[\"apisecret\"] = apisecret;\n\t\t\t\tJanus.debug(\"Sending hangup request (handle=\" + handleId + \"):\");\n\t\t\t\tJanus.debug(request);\n\t\t\t\tif(websockets) {\n\t\t\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t\t} else {\n\t\t\t\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\t\t\t\tverb: 'POST',\n\t\t\t\t\t\twithCredentials: withCredentials,\n\t\t\t\t\t\tbody: request\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Cleanup stack\n\t\t\tconfig.remoteStream = null;\n\t\t\tif(config.volume) {\n\t\t\t\tif(config.volume[\"local\"] && config.volume[\"local\"].timer)\n\t\t\t\t\tclearInterval(config.volume[\"local\"].timer);\n\t\t\t\tif(config.volume[\"remote\"] && config.volume[\"remote\"].timer)\n\t\t\t\t\tclearInterval(config.volume[\"remote\"].timer);\n\t\t\t}\n\t\t\tconfig.volume = {};\n\t\t\tif(config.bitrate.timer)\n\t\t\t\tclearInterval(config.bitrate.timer);\n\t\t\tconfig.bitrate.timer = null;\n\t\t\tconfig.bitrate.bsnow = null;\n\t\t\tconfig.bitrate.bsbefore = null;\n\t\t\tconfig.bitrate.tsnow = null;\n\t\t\tconfig.bitrate.tsbefore = null;\n\t\t\tconfig.bitrate.value = null;\n\t\t\ttry {\n\t\t\t\t// Try a MediaStreamTrack.stop() for each track\n\t\t\t\tif(!config.streamExternal && config.myStream) {\n\t\t\t\t\tJanus.log(\"Stopping local stream tracks\");\n\t\t\t\t\tvar tracks = config.myStream.getTracks();\n\t\t\t\t\tfor(var mst of tracks) {\n\t\t\t\t\t\tJanus.log(mst);\n\t\t\t\t\t\tif(mst)\n\t\t\t\t\t\t\tmst.stop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\t// Do nothing if this fails\n\t\t\t}\n\t\t\tconfig.streamExternal = false;\n\t\t\tconfig.myStream = null;\n\t\t\t// Close PeerConnection\n\t\t\ttry {\n\t\t\t\tconfig.pc.close();\n\t\t\t} catch(e) {\n\t\t\t\t// Do nothing\n\t\t\t}\n\t\t\tconfig.pc = null;\n\t\t\tconfig.candidates = null;\n\t\t\tconfig.mySdp = null;\n\t\t\tconfig.remoteSdp = null;\n\t\t\tconfig.iceDone = false;\n\t\t\tconfig.dataChannel = {};\n\t\t\tconfig.dtmfSender = null;\n\t\t\tconfig.senderTransforms = null;\n\t\t\tconfig.receiverTransforms = null;\n\t\t}\n\t\tpluginHandle.oncleanup();\n\t}\n\n\t// Helper method to munge an SDP to enable simulcasting (Chrome only)\n\tfunction mungeSdpForSimulcasting(sdp) {\n\t\t// Let's munge the SDP to add the attributes for enabling simulcasting\n\t\t// (based on https://gist.github.com/ggarber/a19b4c33510028b9c657)\n\t\tvar lines = sdp.split(\"\\r\\n\");\n\t\tvar video = false;\n\t\tvar ssrc = [ -1 ], ssrc_fid = [ -1 ];\n\t\tvar cname = null, msid = null, mslabel = null, label = null;\n\t\tvar insertAt = -1;\n\t\tfor(var i=0; i<lines.length; i++) {\n\t\t\tvar mline = lines[i].match(/m=(\\w+) */);\n\t\t\tif(mline) {\n\t\t\t\tvar medium = mline[1];\n\t\t\t\tif(medium === \"video\") {\n\t\t\t\t\t// New video m-line: make sure it's the first one\n\t\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\t\tvideo = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// New non-video m-line: do we have what we were looking for?\n\t\t\t\t\tif(ssrc[0] > -1) {\n\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!video)\n\t\t\t\tcontinue;\n\t\t\tvar fid = lines[i].match(/a=ssrc-group:FID (\\d+) (\\d+)/);\n\t\t\tif(fid) {\n\t\t\t\tssrc[0] = fid[1];\n\t\t\t\tssrc_fid[0] = fid[2];\n\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(ssrc[0]) {\n\t\t\t\tvar match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tcname = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tmsid = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tmslabel = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tlabel = match[1];\n\t\t\t\t}\n\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(lines[i].length == 0) {\n\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif(ssrc[0] < 0) {\n\t\t\t// Couldn't find a FID attribute, let's just take the first video SSRC we find\n\t\t\tinsertAt = -1;\n\t\t\tvideo = false;\n\t\t\tfor(var i=0; i<lines.length; i++) {\n\t\t\t\tvar mline = lines[i].match(/m=(\\w+) */);\n\t\t\t\tif(mline) {\n\t\t\t\t\tvar medium = mline[1];\n\t\t\t\t\tif(medium === \"video\") {\n\t\t\t\t\t\t// New video m-line: make sure it's the first one\n\t\t\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\t\t\tvideo = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// New non-video m-line: do we have what we were looking for?\n\t\t\t\t\t\tif(ssrc[0] > -1) {\n\t\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(!video)\n\t\t\t\t\tcontinue;\n\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\tvar value = lines[i].match(/a=ssrc:(\\d+)/);\n\t\t\t\t\tif(value) {\n\t\t\t\t\t\tssrc[0] = value[1];\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tcname = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tmsid = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tmslabel = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tlabel = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(lines[i].length === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(ssrc[0] < 0) {\n\t\t\t// Still nothing, let's just return the SDP we were asked to munge\n\t\t\tJanus.warn(\"Couldn't find the video SSRC, simulcasting NOT enabled\");\n\t\t\treturn sdp;\n\t\t}\n\t\tif(insertAt < 0) {\n\t\t\t// Append at the end\n\t\t\tinsertAt = lines.length;\n\t\t}\n\t\t// Generate a couple of SSRCs (for retransmissions too)\n\t\t// Note: should we check if there are conflicts, here?\n\t\tssrc[1] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc[2] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc_fid[1] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc_fid[2] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\t// Add attributes to the SDP\n\t\tfor(var i=0; i<ssrc.length; i++) {\n\t\t\tif(cname) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' cname:' + cname);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(msid) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' msid:' + msid);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(mslabel) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' mslabel:' + mslabel);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(label) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' label:' + label);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\t// Add the same info for the retransmission SSRC\n\t\t\tif(cname) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' cname:' + cname);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(msid) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' msid:' + msid);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(mslabel) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' mslabel:' + mslabel);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(label) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' label:' + label);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t}\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[2] + ' ' + ssrc_fid[2]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[1] + ' ' + ssrc_fid[1]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[0] + ' ' + ssrc_fid[0]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:SIM ' + ssrc[0] + ' ' + ssrc[1] + ' ' + ssrc[2]);\n\t\tsdp = lines.join(\"\\r\\n\");\n\t\tif(!sdp.endsWith(\"\\r\\n\"))\n\t\t\tsdp += \"\\r\\n\";\n\t\treturn sdp;\n\t}\n\n\t// Helper methods to parse a media object\n\tfunction isAudioSendEnabled(media) {\n\t\tJanus.debug(\"isAudioSendEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.audio === false)\n\t\t\treturn false;\t// Generic audio has precedence\n\t\tif(media.audioSend === undefined || media.audioSend === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.audioSend === true);\n\t}\n\n\tfunction isAudioSendRequired(media) {\n\t\tJanus.debug(\"isAudioSendRequired:\", media);\n\t\tif(!media)\n\t\t\treturn false;\t// Default\n\t\tif(media.audio === false || media.audioSend === false)\n\t\t\treturn false;\t// If we're not asking to capture audio, it's not required\n\t\tif(media.failIfNoAudio === undefined || media.failIfNoAudio === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.failIfNoAudio === true);\n\t}\n\n\tfunction isAudioRecvEnabled(media) {\n\t\tJanus.debug(\"isAudioRecvEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.audio === false)\n\t\t\treturn false;\t// Generic audio has precedence\n\t\tif(media.audioRecv === undefined || media.audioRecv === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.audioRecv === true);\n\t}\n\n\tfunction isVideoSendEnabled(media) {\n\t\tJanus.debug(\"isVideoSendEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.video === false)\n\t\t\treturn false;\t// Generic video has precedence\n\t\tif(media.videoSend === undefined || media.videoSend === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.videoSend === true);\n\t}\n\n\tfunction isVideoSendRequired(media) {\n\t\tJanus.debug(\"isVideoSendRequired:\", media);\n\t\tif(!media)\n\t\t\treturn false;\t// Default\n\t\tif(media.video === false || media.videoSend === false)\n\t\t\treturn false;\t// If we're not asking to capture video, it's not required\n\t\tif(media.failIfNoVideo === undefined || media.failIfNoVideo === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.failIfNoVideo === true);\n\t}\n\n\tfunction isVideoRecvEnabled(media) {\n\t\tJanus.debug(\"isVideoRecvEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.video === false)\n\t\t\treturn false;\t// Generic video has precedence\n\t\tif(media.videoRecv === undefined || media.videoRecv === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.videoRecv === true);\n\t}\n\n\tfunction isScreenSendEnabled(media) {\n\t\tJanus.debug(\"isScreenSendEnabled:\", media);\n\t\tif (!media)\n\t\t\treturn false;\n\t\tif (typeof media.video !== 'object' || typeof media.video.mandatory !== 'object')\n\t\t\treturn false;\n\t\tvar constraints = media.video.mandatory;\n\t\tif (constraints.chromeMediaSource)\n\t\t\treturn constraints.chromeMediaSource === 'desktop' || constraints.chromeMediaSource === 'screen';\n\t\telse if (constraints.mozMediaSource)\n\t\t\treturn constraints.mozMediaSource === 'window' || constraints.mozMediaSource === 'screen';\n\t\telse if (constraints.mediaSource)\n\t\t\treturn constraints.mediaSource === 'window' || constraints.mediaSource === 'screen';\n\t\treturn false;\n\t}\n\n\tfunction isDataEnabled(media) {\n\t\tJanus.debug(\"isDataEnabled:\", media);\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\tJanus.warn(\"Edge doesn't support data channels yet\");\n\t\t\treturn false;\n\t\t}\n\t\tif(media === undefined || media === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.data === true);\n\t}\n\n\tfunction isTrickleEnabled(trickle) {\n\t\tJanus.debug(\"isTrickleEnabled:\", trickle);\n\t\treturn (trickle === false) ? false : true;\n\t}\n}\nexport default Janus;","import HomePage from './containers/layouts/HomePage.jsx';\nimport NotFoundPage from './containers/layouts/NotFoundPage';\nimport PanelRightPage from './containers/layouts/PanelRightPage';\n\n\nimport MetaShow from './components/metas/show';\nimport MetaIndex from './components/metas/index';\nimport MetaCreate from './components/metas/create';\nimport MetaUpdate from './components/metas/update';\n\n\nimport PostShow from './components/posts/show';\nimport PostIndex from './components/posts/index';\nimport PostCreate from './components/posts/create';\nimport PostUpdate from './components/posts/update';\n\nimport NotificationIndex from './components/notifications/index';\n\nimport ChannelShow from './components/channels/show';\nimport ChannelIndex from './components/channels/index';\nimport ChannelCreate from './components/channels/create';\nimport ChannelUpdate from './components/channels/update';\n\nimport RoleShow from './components/roles/show';\nimport RoleIndex from './components/roles/index';\nimport RoleCreate from './components/roles/create';\nimport RoleUpdate from './components/roles/update';\n\n\nimport SettingShow from './components/settings/show';\nimport SettingIndex from './components/settings/index';\nimport SettingCreate from './components/settings/create';\nimport SettingUpdate from './components/settings/update';\n\n\nimport ProfileShow from './components/profiles/show';\nimport ProfileIndex from './components/profiles/index';\nimport ProfileCreate from './components/profiles/create';\nimport ProfileUpdate from './components/profiles/update';\n\nimport FriendshipIndex from './components/friendships/index';\n\nimport PrivacyIndex from './components/privacy/index';\n\nimport Login from './components/users/Login';\nimport LoginJwt from './components/users/LoginJwt';\nimport SignUp from './components/users/SignUp';\nimport Verification from './components/users/Verification';\n\nimport RoomIndex from './components/rooms/index';\n\n\nexport default [\n  {\n    path: '/',\n    component: HomePage,\n  },\n  {\n    path: '/login/',\n    component: Login,\n  },\n  {\n    path: '/sign_up/',\n    component: SignUp,\n  },\n  {\n    path: '/verification/:email',\n    component: Verification,\n  },\n  {\n    path: '/login_jwt/:token',\n    component: LoginJwt,\n  },\n  {\n    path: '/panel-right/',\n    component: PanelRightPage,\n  },\n\n\n  {\n    path: '/rooms/',\n    component: RoomIndex,\n  },\n\n  {\n    path: '/metas/',\n    component: MetaIndex,\n  },\n  {\n    path: '/metas/:metaId/edit',\n    component: MetaUpdate,\n  },\n  {\n    path: '/metas/new',\n    component: MetaCreate,\n  },\n  {\n    path: '/metas/:metaId',\n    component: MetaShow,\n  },\n\n  {\n    path: '/notifications/',\n    component: NotificationIndex,\n  },\n\n  {\n    path: '/posts/',\n    component: PostIndex,\n  },\n  {\n    path: '/posts/:postId/edit',\n    component: PostUpdate,\n  },\n  {\n    path: '/posts/new',\n    component: PostCreate,\n  },\n  {\n    path: '/posts/:postId',\n    component: PostShow,\n  },\n\n  {\n    path: '/channels/',\n    component: ChannelIndex,\n  },\n  {\n    path: '/channels/:channelId/edit',\n    component: ChannelUpdate,\n  },\n  {\n    path: '/channels/new',\n    component: ChannelCreate,\n  },\n  {\n    path: '/channels/:channelId',\n    component: ChannelShow,\n  },\n\n  {\n    path: '/roles/',\n    component: RoleIndex,\n  },\n  {\n    path: '/roles/:roleId/edit',\n    component: RoleUpdate,\n  },\n  {\n    path: '/roles/new',\n    component: RoleCreate,\n  },\n  {\n    path: '/roles/:roleId',\n    component: RoleShow,\n  },\n\n  {\n    path: '/profiles/',\n    component: ProfileIndex,\n  },\n  {\n    path: '/profiles/:profileId/edit',\n    component: ProfileUpdate,\n  },\n  {\n    path: '/profiles/new',\n    component: ProfileCreate,\n  },\n  {\n    path: '/profiles/:profileId',\n    component: ProfileShow,\n  },\n  {\n    path: '/friendships/:sourceId',\n    component: FriendshipIndex,\n  },\n  {\n    path: '/privacy_settings/',\n    component: PrivacyIndex,\n  },\n\n  {\n    path: '/settings/',\n    component: SettingIndex,\n  },\n  {\n    path: '/settings/:settingId/edit',\n    component: SettingUpdate,\n  },\n  {\n    path: '/settings/new',\n    component: SettingCreate,\n  },\n  {\n    path: '/settings/:settingId',\n    component: SettingShow,\n  },\n\n  {\n    path: '(.*)',\n    component: NotFoundPage,\n  },\n];\n","import React from 'react';\nimport {\n  Page,\n  Navbar,\n  NavLeft,\n  NavTitle,\n  NavRight,\n  Link,\n  Toolbar,\n  Block,\n  BlockTitle,\n  List,\n  ListItem,\n  Row,\n  Col,\n  Button, Icon, Fab, Searchbar, Subnavbar\n} from 'framework7-react';\nimport { dict } from '../../Dict';\n\nexport default () => (\n  <Page className=\"no-swipe-panel\">\n    <Navbar>\n\n      <NavLeft>\n        <Link panelOpen=\"right\">\n          <Icon f7=\"bars\"></Icon>\n        </Link>\n      </NavLeft>\n    </Navbar>\n    <Toolbar bottom>\n      <Link>Left Link</Link>\n      <Link>Right Link</Link>\n    </Toolbar>\n    <Block strong>\n      <p></p>\n    </Block>\n    <BlockTitle></BlockTitle>\n    <List>\n\n    </List>\n    <BlockTitle></BlockTitle>\n    <Block strong>\n\n    </Block>\n    <BlockTitle></BlockTitle>\n    <Block strong>\n\n    </Block>\n    <List>\n    </List>\n    <Fab href=\"/document_form/\" target=\"#main-view\" position=\"left-bottom\" slot=\"fixed\" color=\"orange\">\n      <Icon ios=\"f7:add\" aurora=\"f7:add\" md=\"material:add\"></Icon>\n      <Icon ios=\"f7:close\" aurora=\"f7:close\" md=\"material:close\"></Icon>\n    </Fab>\n  </Page>\n);\n","import React from \"react\";\nimport { Page, Col, Icon } from \"framework7-react\";\nimport ModelStore from \"../../stores/ModelStore\";\nimport RoomIndex from \"../../containers/rooms/index\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from \"../../Dict\";\nimport { conf } from \"../../conf\";\nimport Janus from \"../../janus.js\";\nimport Framework7 from \"framework7/framework7.esm.bundle\";\n//import {newRemoteFeed} from \"./newRemoteFeed.js\"\n\nexport default class Layout extends React.Component {\n  constructor() {\n    super();\n    this.getList = this.getList.bind(this);\n    this.sessionCreate = this.sessionCreate.bind(this);\n    this.registerUsername = this.registerUsername.bind(this);\n    this.newRemoteFeed = this.newRemoteFeed.bind(this);\n    this.publishCamera = this.publishCamera.bind(this);\n    this.publishMicrophone = this.publishMicrophone.bind(this);\n    this.off = this.off.bind(this);\n    this.on = this.on.bind(this);\n    this.pageAfterIn = this.pageAfterIn.bind(this);\n    this.streamAttacher = this.streamAttacher.bind(this);\n    this.unmute = this.unmute.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem(\"token\"),\n      shortners: null,\n      server: conf.janusServer,\n      janus: null,\n      sfutest: null,\n      opaqueId: \"videoroomtest-\" + Janus.randomString(12),\n      myroom: 1234,\n      myusername: null,\n      myid: null,\n      mystream: null,\n      mypvtid: null,\n      feeds: [],\n      bitrateTimer: [],\n      urls: [],\n      publisedCamera: false,\n      publishedMicrophone: false,\n      muted: true,\n    };\n  }\n  componentWillMount() {\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  sessionCreate() {\n    var self = this;\n    Janus.init({\n      debug: \"none\",\n      callback: function () {\n        var janus = new Janus({\n          server: self.state.server,\n          success: function () {\n            janus.attach({\n              plugin: \"janus.plugin.videoroom\",\n              opaqueId: self.state.opaqueId,\n              success: function (pluginHandle) {\n                self.setState({ janus: janus });\n                self.setState({ sfutest: pluginHandle });\n                Janus.log(\n                  \"Plugin attached! (\" +\n                    self.state.sfutest.getPlugin() +\n                    \", id=\" +\n                    self.state.sfutest.getId() +\n                    \")\"\n                );\n                Janus.log(\"  -- This is a publisher/manager\");\n                self.registerUsername();\n              },\n              error: function (error) {\n                Janus.error(\"  -- Error attaching plugin...\", error);\n                window.alert(\"Error attaching plugin... \" + error);\n              },\n              consentDialog: function (on) {\n                Janus.debug(\n                  \"Consent dialog should be \" + (on ? \"on\" : \"off\") + \" now\"\n                );\n              },\n              iceState: function (state) {\n                Janus.log(\"ICE state changed to \" + state);\n              },\n              mediaState: function (medium, on) {\n                Janus.log(\n                  \"Janus \" +\n                    (on ? \"started\" : \"stopped\") +\n                    \" receiving our \" +\n                    medium\n                );\n              },\n              webrtcState: function (on) {\n                Janus.log(\n                  \"Janus says our WebRTC PeerConnection is \" +\n                    (on ? \"up\" : \"down\") +\n                    \" now\"\n                );\n              },\n              onmessage: function (msg, jsep) {\n                Janus.log(\" ::: Got a message (publisher) :::\", msg);\n                var event = msg[\"videoroom\"];\n                Janus.debug(\"Event: \" + event);\n                if (event) {\n                  if (event === \"joined\") {\n                    console.log(\"joined\");\n                    self.setState({\n                      myid: msg[\"id\"],\n                      mypvtid: msg[\"private_id\"],\n                    });\n\n                    if (msg[\"publishers\"]) {\n                      var list = msg[\"publishers\"];\n                      console.log(\n                        \"Got a list of available publishers/feeds:\",\n                        list\n                      );\n                      for (var f in list) {\n                        var id = list[f][\"id\"];\n                        var display = list[f][\"display\"];\n                        var audio = list[f][\"audio_codec\"];\n                        var video = list[f][\"video_codec\"];\n                        Janus.debug(\n                          \"  >> [\" +\n                            id +\n                            \"] \" +\n                            display +\n                            \" (audio: \" +\n                            audio +\n                            \", video: \" +\n                            video +\n                            \")\"\n                        );\n                        self.newRemoteFeed(id, display, audio, video);\n                      }\n                    }\n                  } else if (event === \"destroyed\") {\n                    // The room has been destroyed\n                    Janus.warn(\"The room has been destroyed!\");\n                  } else if (event === \"event\") {\n                    // Any new feed to attach to?\n                    if (msg[\"publishers\"]) {\n                      var list = msg[\"publishers\"];\n                      Janus.log(\n                        \"Got a list of available publishers/feeds:\",\n                        list\n                      );\n                      for (var f in list) {\n                        var id = list[f][\"id\"];\n                        var display = list[f][\"display\"];\n                        var audio = list[f][\"audio_codec\"];\n                        var video = list[f][\"video_codec\"];\n                        Janus.log(\n                          \"  >> [\" +\n                            id +\n                            \"] \" +\n                            display +\n                            \" (audio: \" +\n                            audio +\n                            \", video: \" +\n                            video +\n                            \")\"\n                        );\n                        self.newRemoteFeed(id, display, audio, video);\n                      }\n                    } else if (msg[\"leaving\"]) {\n                      var leaving = msg[\"leaving\"];\n                      console.log(\"Publisher leaving: \" + leaving);\n                      self.setState(\n                        {\n                          feeds: self.state.feeds.filter(\n                            (item) => item.rfid != leaving\n                          ),\n                        },\n                        () => console.log(\"feeds: >>>>\", self.state.feeds)\n                      );\n                      var unPublishedFeed = self.state.feeds.filter(\n                        (item) => item.rfid === leaving\n                      );\n                      var remoteFeed = unPublishedFeed.shift();\n                      if (remoteFeed != null) {\n                        remoteFeed.detach();\n                      }\n                    } else if (msg[\"unpublished\"]) {\n                      var unpublished = msg[\"unpublished\"];\n                      console.log(\"Publisher left: \" + unpublished);\n                      if (unpublished === \"ok\") {\n                        self.state.sfutest.hangup();\n                        return;\n                      }\n                      self.setState(\n                        {\n                          feeds: self.state.feeds.filter(\n                            (item) => item.rfid != unpublished\n                          ),\n                        }\n                      );\n                      var unPublishedFeed = self.state.feeds.filter(\n                        (item) => item.rfid === unpublished\n                      );\n                      var remoteFeed = unPublishedFeed.shift();\n                      if (remoteFeed != null) {\n                        remoteFeed.detach();\n                      }\n                    } else if (msg[\"error\"]) {\n                    }\n                  }\n                }\n                if (jsep) {\n                  Janus.log(\"Handling SDP as well...\", jsep);\n                  self.state.sfutest.handleRemoteJsep({ jsep: jsep });\n                }\n              },\n              onlocalstream: function (stream) {\n                console.log(\" ::: Got a local stream :::\", stream);\n                console.log(self.state.sfutest.id);\n                var exisiting = self.state.feeds.filter(\n                  (item) => item.id === self.state.sfutest.id\n                );\n                console.log('exisiting', exisiting)\n                if(exisiting.length === 0) {\n                  self.setState({\n                    feeds: self.state.feeds.concat(self.state.sfutest),\n                  });\n\n                }\n                Janus.attachMediaStream(\n                  document.getElementById(\"video-\" + self.state.sfutest.id),\n                  stream\n                );\n                //console.log(self.$$(\"#video-\" + self.state.sfutest.id))\n                document.getElementById(\"video-\" + self.state.sfutest.id).muted = true;\n              },\n              onremotestream: function (stream) {\n                Janus.log(\" ::: Got a remote stream :::\", stream);\n                // The publisher stream is sendonly, we don't expect anything here\n              },\n              oncleanup: function () {\n                Janus.log(\n                  \" ::: Got a cleanup notification: we are unpublished now :::\"\n                );\n              },\n            });\n          },\n          error: function (error) {\n            Janus.error(error);\n            window.alert(error, function () {\n              window.location.reload();\n            });\n          },\n          destroyed: function () {\n            window.location.reload();\n          },\n        });\n      },\n    });\n  }\n  registerUsername() {\n    var self = this;\n    var register = {\n      request: \"join\",\n      room: self.state.myroom,\n      ptype: \"publisher\",\n      display: \"test1\",\n    };\n    self.state.sfutest.send({ message: register });\n  }\n\n  newRemoteFeed(id, feeds, display, audio, video) {\n    var self = this;\n    // A new feed has been published, create a new plugin handle and attach to it as a subscriber\n    var remoteFeed = null;\n    self.state.janus.attach({\n      plugin: \"janus.plugin.videoroom\",\n      opaqueId: this.state.opaqueId,\n      success: function (pluginHandle) {\n        remoteFeed = pluginHandle;\n        remoteFeed.simulcastStarted = false;\n        Janus.log(\n          \"Plugin attached! (\" +\n            remoteFeed.getPlugin() +\n            \", id=\" +\n            remoteFeed.getId() +\n            \")\"\n        );\n        Janus.log(\"  -- This is a subscriber\");\n        // We wait for the plugin to send us an offer\n        var subscribe = {\n          request: \"join\",\n          room: self.state.myroom,\n          ptype: \"subscriber\",\n          feed: id,\n          private_id: self.state.mypvtid,\n        };\n        // In case you don't want to receive audio, video or data, even if the\n        // publisher is sending them, set the 'offer_audio', 'offer_video' or\n        // 'offer_data' properties to false (they're true by default), e.g.:\n        // \t\tsubscribe[\"offer_video\"] = false;\n        // For example, if the publisher is VP8 and this is Safari, let's avoid video\n        if (\n          Janus.webRTCAdapter.browserDetails.browser === \"safari\" &&\n          (video === \"vp9\" || (video === \"vp8\" && !Janus.safariVp8))\n        ) {\n          if (video) video = video.toUpperCase();\n          console.log(\n            \"Publisher is using \" +\n              video +\n              \", but Safari doesn't support it: disabling video\"\n          );\n          subscribe[\"offer_video\"] = false;\n        }\n        remoteFeed.videoCodec = video;\n        remoteFeed.send({ message: subscribe });\n        //console.log(subscribe)\n        //console.log(remoteFeed)\n      },\n      error: function (error) {\n        Janus.error(\"  -- Error attaching plugin...\", error);\n        window.alert(\"Error attaching plugin... \" + error);\n      },\n      onmessage: function (msg, jsep) {\n        Janus.debug(\" ::: Got a message (subscriber) :::\", msg);\n        var event = msg[\"videoroom\"];\n        Janus.log(\"Event: \" + event);\n        if (msg[\"error\"]) {\n          window.alert(msg[\"error\"]);\n        } else if (event) {\n          if (event === \"attached\") {\n            self.setState({ feeds: self.state.feeds.concat(remoteFeed) });\n            //let newObject = self.state.muted;\n            // newObject[remoteFeed.id] = true;\n            // self.setState({\n            //  muted: newObject\n            // });\n            remoteFeed.rfid = msg[\"id\"];\n            remoteFeed.rfdisplay = msg[\"display\"];\n            Janus.log(\n              \"Successfully attached to feed \" +\n                remoteFeed.rfid +\n                \" (\" +\n                remoteFeed.rfdisplay +\n                \") in room \" +\n                msg[\"room\"]\n            );\n            //dom.$$('#details').html('XXXXX');\n          } else if (event === \"event\") {\n          } else {\n            // What has just happened?\n          }\n        }\n        if (jsep) {\n          Janus.log(\"Handling SDP as well...\", jsep);\n          remoteFeed.createAnswer({\n            jsep: jsep,\n            // Add data:true here if you want to subscribe to datachannels as well\n            // (obviously only works if the publisher offered them in the first place)\n            media: { audioSend: false, videoSend: false }, // We want recvonly audio/video\n            success: function (jsep) {\n              Janus.log(\"Got SDP!\", jsep);\n              var body = { request: \"start\", room: self.state.myroom };\n              remoteFeed.send({ message: body, jsep: jsep });\n            },\n            error: function (error) {\n              Janus.log(\"WebRTC error:\", error);\n              window.alert(\"WebRTC error... \" + error.message);\n            },\n          });\n        }\n      },\n      iceState: function (state) {\n        Janus.log(\n          \"ICE state of this WebRTC PeerConnection (feed #\" +\n            remoteFeed.rfindex +\n            \") changed to \" +\n            state\n        );\n      },\n      webrtcState: function (on) {\n        //console.log(on);\n        Janus.log(\n          \"Janus says this WebRTC PeerConnection (feed #\" +\n            remoteFeed.rfindex +\n            \") is \" +\n            (on ? \"up\" : \"down\") +\n            \" now\"\n        );\n      },\n      onlocalstream: function (stream) {\n        //console.log(stream);\n        // The subscriber stream is recvonly, we don't expect anything here\n      },\n      onremotestream: function (stream) {\n        //console.log(\"stream>>>>>>>>>>>>\", stream);\n        // self\n        //  .$$('#hosts').append(\"<video id='video-\"+remoteFeed.rfid+\"' src='' width='320' height='240' autoPlay playsInline />\")\n        Janus.attachMediaStream(\n          document.getElementById(\"video-\" + remoteFeed.id),\n          stream\n        );\n        //.$$(\"#video\" + remoteFeed.rfindex)\n        // .prop(\"src\", window.URL.createObjectURL(stream));\n        // console.log('>>>>>', remoteFeed.id, remoteFeed.rfid)\n        //console.log(remoteFeed)\n      },\n      oncleanup: function () {\n        Janus.log(\n          \" ::: Got a cleanup notification (remote feed \" + id + \") :::\"\n        );\n      },\n    });\n  }\n\n  streamAttacher(feed) {\n    if (feed.id && feed.webrtcStuff && feed.webrtcStuff.remoteStream) {\n      Janus.attachMediaStream(\n        document.getElementById(\"video-\" + feed.id),\n        feed.webrtcStuff.remoteStream\n      );\n    }\n  }\n\n  publishCamera() {\n    var self = this;\n    console.log(\"camera\", !self.state.publisedCamera);\n    self.state.sfutest.createOffer({\n      media: {\n        audioRecv: false,\n        videoRecv: false,\n        videoSend: !self.state.publisedCamera,\n        removeVideo: self.state.publisedCamera,\n        audioSend: self.state.publishedMicrophone,\n        video: \"lowres\",\n      },\n\n      success: function (jsep) {\n        Janus.debug(\"********* Got publisher SDP!\", jsep);\n        if (jsep) {\n          var publish = {\n            request: \"configure\",\n            audio: true,\n            video: true,\n            bitrate: 256 * 1000,\n          };\n          self.state.sfutest.send({ message: publish, jsep: jsep });\n        }\n        self.setState({ publisedCamera: !self.state.publisedCamera });\n      },\n      error: function (error) {\n        Janus.error(\"***** WebRTC error:\", error);\n      },\n    });\n  }\n\n  publishMicrophone() {\n    var self = this;\n    console.log(\"Microphone\", !self.state.publishedMicrophone);\n    self.state.sfutest.createOffer({\n      media: {\n        audioRecv: false,\n        videoRecv: false,\n        audioSend: !self.state.publishedMicrophone,\n        removeAudio: self.state.publishedMicrophone,\n        videoSend: self.state.publisedCamera,\n      },\n\n      success: function (jsep) {\n        Janus.debug(\"********* Got publisher SDP!\", jsep);\n        if (jsep) {\n          var publish = { request: \"configure\", audio: true, video: true };\n          self.state.sfutest.send({ message: publish, jsep: jsep });\n          self.setState({\n            publishedMicrophone: !self.state.publishedMicrophone,\n          });\n        }\n      },\n      error: function (error) {\n        Janus.error(\"***** WebRTC error:\", error);\n      },\n    });\n  }\n\n  off() {\n    console.log(this.state.feeds);\n    var body = {\n      request: \"switch\",\n      feed: this.state.feeds[1].rfid,\n      video: false,\n    };\n    this.state.feeds[1].send({ message: body });\n  }\n\n  on() {\n    console.log(this.state.feeds);\n    var body = {\n      request: \"switch\",\n      feed: this.state.feeds[1].rfid,\n      video: true,\n    };\n    this.state.feeds[1].send({ message: body });\n  }\n\n  componentDidMount() {}\n\n  pageAfterIn() {\n    this.sessionCreate();\n    this.unmute();\n  }\n\n  loadData() {\n    const f7: Framework7 = Framework7.instance;\n    f7.toast.show({\n      text: dict.receiving,\n      closeTimeout: 2000,\n      position: \"top\",\n    });\n    MyActions.getList(\"shortners\", this.state.page, {}, this.state.token);\n  }\n\n  getList() {\n    var shortners = ModelStore.getList();\n    var klass = ModelStore.getKlass();\n    if (shortners && klass === \"Shortner\") {\n      this.setState({\n        shortners: shortners,\n      });\n    }\n  }\n\n  unmute() {\n    this.setState({ muted: false });\n  }\n\n  render() {\n    const {\n      shortners,\n      urls,\n      publishedMicrophone,\n      publisedCamera,\n      feeds,\n      muted,\n    } = this.state;\n    return (\n      <RoomIndex\n        pageAfterIn={this.pageAfterIn}\n        shortners={shortners}\n        streamAttacher={this.streamAttacher}\n        urls={urls}\n        off={this.off}\n        on={this.on}\n        feeds={feeds}\n        muted={muted}\n        unmute={this.unmute}\n        publisedCamera={publisedCamera}\n        publishedMicrophone={publishedMicrophone}\n        publishCamera={this.publishCamera}\n        publishMicrophone={this.publishMicrophone}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport { Page, Navbar, Block } from 'framework7-react';\n\nexport default () => (\n  <Page>\n    <Navbar title=\"Not found\" backLink=\"Back\" />\n    <Block strong>\n      <p>Sorry</p>\n      <p>Requested content not found.</p>\n    </Block>\n  </Page>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// Import Framework7\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n// Import Framework7-React plugin\nimport Framework7React from 'framework7-react';\n\n// Import main App component\nimport App from './components/App.jsx';\n\n// Framework7 styles\nimport 'framework7/css/framework7.bundle.rtl.min.css';\n\n// Icons\nimport './css/icons.css';\n\n// Custom app styles\nimport './css/app.css';\nimport './css/editor.css';\nimport './css/font-awesome.min.css';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\n\n\nimport * as serviceWorker from './serviceWorker';\n\n\n// Init Framework7-React plugin\nFramework7.use(Framework7React);\n\n// Mount React App\nReactDOM.render(React.createElement(App),\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\nimport {\n  App,\n  Panel,\n  View,\n  Statusbar,\n  Popup,\n  Page,\n  Navbar,\n  NavRight,\n  Link,\n  Block,\n  LoginScreen,\n  LoginScreenTitle,\n  List,\n  ListInput,\n  ListButton,\n  BlockFooter\n} from 'framework7-react';\n\nimport routes from '../routes';\n\nexport default function (props) {\n\n  // Framework7 parameters here\n  const f7params = {\n    id: 'io.framework7.testapp', // App bundle ID\n    name: 'Framework7', // App name\n    theme: 'aurora', // Automatic theme detection\n    panel: {\n      rightBreakpoint: 960,\n    },\n    touch: {\n      tapHold: true //enable tap hold events\n    },\n    view: {\n      //ignoreCache: true,\n      //reloadCurrent: true\n    },\n    // App routes\n    routes,\n  };\n\n  return (\n    <App params={f7params}>\n      {/* Statusbar */}\n      <Statusbar />\n\n      {/* Left Panel */}\n      <Panel left cover  themeDark>\n        <View url=\"/panel-left/\" />\n      </Panel>\n\n      {/* Right Panel */}\n      <Panel right reveal themeDark>\n        <View url=\"/panel-right/\"/>\n      </Panel>\n\n      {/* Main View */}\n      <View id=\"main-view\" url=\"/\" pushState={true}  main className=\"safe-areas\"/>\n\n    </App>\n  );\n};\n","module.exports = {\n\n  // Generic\n  'generic.add': '',\n  'generic.cancel': '',\n\n  // BlockType\n  'components.controls.blocktype.h1': 'H1',\n  'components.controls.blocktype.h2': 'H2',\n  'components.controls.blocktype.h3': 'H3',\n  'components.controls.blocktype.h4': 'H4',\n  'components.controls.blocktype.h5': 'H5',\n  'components.controls.blocktype.h6': 'H6',\n  'components.controls.blocktype.blockquote': 'Blockquote',\n  'components.controls.blocktype.code': 'Code',\n  'components.controls.blocktype.blocktype': 'Block Type',\n  'components.controls.blocktype.normal': 'Normal',\n\n  // Color Picker\n  'components.controls.colorpicker.colorpicker': 'Color Picker',\n  'components.controls.colorpicker.text': 'Text',\n  'components.controls.colorpicker.background': 'Highlight',\n\n  // Embedded\n  'components.controls.embedded.embedded': 'Embedded',\n  'components.controls.embedded.embeddedlink': 'Embedded Link',\n  'components.controls.embedded.enterlink': 'Enter link',\n\n  // Emoji\n  'components.controls.emoji.emoji': 'Emoji',\n\n  // FontFamily\n  'components.controls.fontfamily.fontfamily': 'Font',\n\n  // FontSize\n  'components.controls.fontsize.fontsize': 'Font Size',\n\n  // History\n  'components.controls.history.history': 'History',\n  'components.controls.history.undo': 'Undo',\n  'components.controls.history.redo': 'Redo',\n\n  // Image\n  'components.controls.image.image': '',\n  'components.controls.image.fileUpload': '',\n  'components.controls.image.byURL': '',\n  'components.controls.image.dropFileText': '    ',\n\n  // Inline\n  'components.controls.inline.bold': 'Bold',\n  'components.controls.inline.italic': 'Italic',\n  'components.controls.inline.underline': 'Underline',\n  'components.controls.inline.strikethrough': 'Strikethrough',\n  'components.controls.inline.monospace': 'Monospace',\n  'components.controls.inline.superscript': 'Superscript',\n  'components.controls.inline.subscript': 'Subscript',\n\n  // Link\n  'components.controls.link.linkTitle': ' ',\n  'components.controls.link.linkTarget': '',\n  'components.controls.link.linkTargetOption': '    ',\n  'components.controls.link.link': '',\n  'components.controls.link.unlink': ' ',\n\n  // List\n  'components.controls.list.list': 'List',\n  'components.controls.list.unordered': 'Unordered',\n  'components.controls.list.ordered': 'Ordered',\n  'components.controls.list.indent': 'Indent',\n  'components.controls.list.outdent': 'Outdent',\n\n  // Remove\n  'components.controls.remove.remove': 'Remove',\n\n  // TextAlign\n  'components.controls.textalign.textalign': 'Text Align',\n  'components.controls.textalign.left': 'Left',\n  'components.controls.textalign.center': 'Center',\n  'components.controls.textalign.right': 'Right',\n  'components.controls.textalign.justify': 'Justify',\n};\n"],"sourceRoot":""}